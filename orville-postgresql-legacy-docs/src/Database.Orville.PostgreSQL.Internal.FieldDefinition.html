<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-|
Module    : Database.Orville.PostgreSQL.Internal.FieldDefintion
Copyright : Flipstone Technology Partners 2016-2018
License   : MIT
-}</span><span>
</span><a name="line-6"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.FieldDefinition</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-7"></a><span>
</span><a name="line-8"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Int</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Int32</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Int64</span><span class="hs-special">)</span><span>
</span><a name="line-9"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Text</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Text</span><span class="hs-special">)</span><span>
</span><a name="line-10"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Time</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Day</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">UTCTime</span><span class="hs-special">)</span><span>
</span><a name="line-11"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Database.HDBC</span><span>
</span><a name="line-12"></a><span>
</span><a name="line-13"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.NameExpr.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.Expr.NameExpr</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Expr.NameExpr.html#NameForm"><span class="hs-identifier hs-type">NameForm</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-14"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.SqlType</span></a><span>
</span><a name="line-15"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.Types</span></a><span>
</span><a name="line-16"></a><span>
</span><a name="line-17"></a><span class="hs-comment">{- |
  Migration Guide: @textField@ has been renamed to @boundedTextField@. It now
  takes an @Int32@ rather than an @Int@
-}</span><span>
</span><a name="line-21"></a><span class="hs-identifier">textField</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-22"></a><a name="textField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#textField"><span class="hs-identifier">textField</span></a></a><span> </span><a name="local-6989586621679101103"><a href="#local-6989586621679101103"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-6989586621679101104"><a href="#local-6989586621679101104"><span class="hs-identifier">len</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier hs-var">fieldOfType</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#varText"><span class="hs-identifier hs-var">varText</span></a><span> </span><a href="#local-6989586621679101104"><span class="hs-identifier hs-var">len</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679101103"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-23"></a><span>
</span><a name="line-24"></a><span class="hs-comment">{- |
  Migration Guide: @fixedTextField@ retains the same name. It now
  takes an @Int32@ rather than an @Int@
-}</span><span>
</span><a name="line-28"></a><span class="hs-identifier">fixedTextField</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-29"></a><a name="fixedTextField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fixedTextField"><span class="hs-identifier">fixedTextField</span></a></a><span> </span><a name="local-6989586621679101105"><a href="#local-6989586621679101105"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-6989586621679101106"><a href="#local-6989586621679101106"><span class="hs-identifier">len</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier hs-var">fieldOfType</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><a href="#local-6989586621679101106"><span class="hs-identifier hs-var">len</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679101105"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-30"></a><span>
</span><a name="line-31"></a><span class="hs-comment">{- |
  Migration Guide: @unboundedTextField@ retains the same name.
-}</span><span>
</span><a name="line-34"></a><span class="hs-identifier">unboundedTextField</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-35"></a><a name="unboundedTextField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#unboundedTextField"><span class="hs-identifier">unboundedTextField</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier hs-var">fieldOfType</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#unboundedText"><span class="hs-identifier hs-var">unboundedText</span></a><span>
</span><a name="line-36"></a><span>
</span><a name="line-37"></a><span class="hs-comment">{- |
  Migration Guide: @dayField@ has been renamed to @dateField@
-}</span><span>
</span><a name="line-40"></a><span class="hs-identifier">dayField</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><span class="hs-identifier hs-type">Day</span><span>
</span><a name="line-41"></a><a name="dayField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#dayField"><span class="hs-identifier">dayField</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier hs-var">fieldOfType</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#date"><span class="hs-identifier hs-var">date</span></a><span>
</span><a name="line-42"></a><span>
</span><a name="line-43"></a><span class="hs-comment">{- |
  Migration Guide: @utcTimeField@ has been renamed to @utcTimestampField@
-}</span><span>
</span><a name="line-46"></a><span class="hs-identifier">utcTimeField</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><span class="hs-identifier hs-type">UTCTime</span><span>
</span><a name="line-47"></a><a name="utcTimeField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#utcTimeField"><span class="hs-identifier">utcTimeField</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier hs-var">fieldOfType</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#timestamp"><span class="hs-identifier hs-var">timestamp</span></a><span>
</span><a name="line-48"></a><span>
</span><a name="line-49"></a><span class="hs-comment">{- |
  Migration guide: @int32Field@ has been renamed to @integerField@
-}</span><span>
</span><a name="line-52"></a><span class="hs-identifier">int32Field</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><span class="hs-identifier hs-type">Int32</span><span>
</span><a name="line-53"></a><a name="int32Field"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#int32Field"><span class="hs-identifier">int32Field</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier hs-var">fieldOfType</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#integer"><span class="hs-identifier hs-var">integer</span></a><span>
</span><a name="line-54"></a><span>
</span><a name="line-55"></a><span class="hs-comment">{- |
  Migration guide: @int64Field@ has been renamed to @bigIntegerField@
-}</span><span>
</span><a name="line-58"></a><span class="hs-identifier">int64Field</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><span class="hs-identifier hs-type">Int64</span><span>
</span><a name="line-59"></a><a name="int64Field"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#int64Field"><span class="hs-identifier">int64Field</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier hs-var">fieldOfType</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#bigInteger"><span class="hs-identifier hs-var">bigInteger</span></a><span>
</span><a name="line-60"></a><span>
</span><a name="line-61"></a><span class="hs-comment">{- |
  Migration guide: @doubleField@ retains the same name.
-}</span><span>
</span><a name="line-64"></a><span class="hs-identifier">doubleField</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><span class="hs-identifier hs-type">Double</span><span>
</span><a name="line-65"></a><a name="doubleField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#doubleField"><span class="hs-identifier">doubleField</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier hs-var">fieldOfType</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#double"><span class="hs-identifier hs-var">double</span></a><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span class="hs-comment">{- |
  Migration guide: @boolField@ has been renamed to @booleanField@
-}</span><span>
</span><a name="line-70"></a><span class="hs-identifier">boolField</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-71"></a><a name="boolField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#boolField"><span class="hs-identifier">boolField</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier hs-var">fieldOfType</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#boolean"><span class="hs-identifier hs-var">boolean</span></a><span>
</span><a name="line-72"></a><span>
</span><a name="line-73"></a><span class="hs-comment">{- |
  Migration guide: @automaticIdField@ has been renamed to @serialField@
-}</span><span>
</span><a name="line-76"></a><span class="hs-identifier">automaticIdField</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><span class="hs-identifier hs-type">Int32</span><span>
</span><a name="line-77"></a><a name="automaticIdField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#automaticIdField"><span class="hs-identifier">automaticIdField</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier hs-var">fieldOfType</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#serial"><span class="hs-identifier hs-var">serial</span></a><span>
</span><a name="line-78"></a><span>
</span><a name="line-79"></a><span class="hs-comment">{- |
  Migration guide: @searchVectorField@ has been renamed to @textSearchVectorField@
-}</span><span>
</span><a name="line-82"></a><span class="hs-identifier">searchVectorField</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><span class="hs-identifier hs-type">Text</span><span>
</span><a name="line-83"></a><a name="searchVectorField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#searchVectorField"><span class="hs-identifier">searchVectorField</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier hs-var">fieldOfType</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#textSearchVector"><span class="hs-identifier hs-var">textSearchVector</span></a><span>
</span><a name="line-84"></a><span>
</span><a name="line-85"></a><span class="hs-comment">{-|
  Migration Guide: @nullableField@ retains the same name

  Makes a 'NotNull' field 'Nullable' by wrapping the Haskell type of the field
  in 'Maybe'. The field will be marked as 'NULL' in the database schema and
  the value 'Nothing' will be used to represent 'NULL' values when converting
  to and from sql.
-}</span><span>
</span><a name="line-93"></a><span class="hs-identifier">nullableField</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><a href="#local-6989586621679101102"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier hs-type">Nullable</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679101102"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-94"></a><a name="nullableField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#nullableField"><span class="hs-identifier">nullableField</span></a></a><span> </span><a name="local-6989586621679101107"><a href="#local-6989586621679101107"><span class="hs-identifier">field</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-95"></a><span>  </span><span class="hs-keyword">let</span><span>
</span><a name="line-96"></a><span>    </span><a name="local-6989586621679101108"><a href="#local-6989586621679101108"><span class="hs-identifier">nullableType</span></a></a><span> </span><a name="local-6989586621679101109"><a href="#local-6989586621679101109"><span class="hs-identifier">sqlType</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-97"></a><span>      </span><a href="#local-6989586621679101109"><span class="hs-identifier hs-var">sqlType</span></a><span>
</span><a name="line-98"></a><span>        </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">sqlTypeToSql</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-identifier hs-var">SqlNull</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">sqlTypeToSql</span><span> </span><a href="#local-6989586621679101109"><span class="hs-identifier hs-var">sqlType</span></a><span class="hs-special">)</span><span>
</span><a name="line-99"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">sqlTypeFromSql</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-100"></a><span>            </span><span class="hs-glyph">\</span><a name="local-6989586621679101110"><a href="#local-6989586621679101110"><span class="hs-identifier">sql</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-101"></a><span>              </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679101110"><span class="hs-identifier hs-var">sql</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-102"></a><span>                </span><span class="hs-identifier hs-var">SqlNull</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-103"></a><span>                  </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-104"></a><span>
</span><a name="line-105"></a><span>                </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-106"></a><span>                  </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-identifier">sqlTypeFromSql</span><span> </span><a href="#local-6989586621679101109"><span class="hs-identifier hs-var">sqlType</span></a><span> </span><a href="#local-6989586621679101110"><span class="hs-identifier hs-var">sql</span></a><span>
</span><a name="line-107"></a><span>        </span><span class="hs-special">}</span><span>
</span><a name="line-108"></a><span>  </span><span class="hs-keyword">in</span><span>
</span><a name="line-109"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-var">FieldDefinition</span></a><span>
</span><a name="line-110"></a><span>      </span><span class="hs-special">(</span><span class="hs-identifier">fieldName</span><span> </span><a href="#local-6989586621679101107"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">)</span><span>
</span><a name="line-111"></a><span>      </span><span class="hs-special">(</span><a href="#local-6989586621679101108"><span class="hs-identifier hs-var">nullableType</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">fieldType</span><span> </span><a href="#local-6989586621679101107"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">)</span><span>
</span><a name="line-112"></a><span>      </span><span class="hs-special">(</span><span class="hs-identifier">fieldFlags</span><span> </span><a href="#local-6989586621679101107"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">)</span><span>
</span><a name="line-113"></a><span>      </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier hs-var">Nullable</span></a><span>
</span><a name="line-114"></a><span>
</span><a name="line-115"></a><span class="hs-comment">{-|
  Adds a `Maybe` wrapper to a field that is already nullable. (If your field is
  'NotNull', you wanted 'nullableField' instead of this function). Note that
  fields created using this function have asymetric encoding and decoding of
  'NULL' values. Because the provided field is 'Nullable', 'NULL' values decode
  from the database already have a representation in the 'a' type, so 'NULL'
  will be decoded as 'Just &lt;value of type a for NULL&gt;'. This means if you
  insert a 'Nothing' value using the field, it will be read back as 'Just'
  value. This is useful for building high level combinators that might need to
  make fields 'Nullable' but need the value to be decoded in its underlying
  type when reading back (e.g. 'maybeMapper' from 'RelationalMap').
-}</span><span>
</span><a name="line-127"></a><span class="hs-identifier">asymmetricNullableField</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier hs-type">Nullable</span></a><span> </span><a href="#local-6989586621679101101"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier hs-type">Nullable</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679101101"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-128"></a><a name="asymmetricNullableField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#asymmetricNullableField"><span class="hs-identifier">asymmetricNullableField</span></a></a><span> </span><a name="local-6989586621679101111"><a href="#local-6989586621679101111"><span class="hs-identifier">field</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-129"></a><span>  </span><span class="hs-keyword">let</span><span>
</span><a name="line-130"></a><span>    </span><a name="local-6989586621679101112"><a href="#local-6989586621679101112"><span class="hs-identifier">nullableType</span></a></a><span> </span><a name="local-6989586621679101113"><a href="#local-6989586621679101113"><span class="hs-identifier">sqlType</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-131"></a><span>      </span><a href="#local-6989586621679101113"><span class="hs-identifier hs-var">sqlType</span></a><span>
</span><a name="line-132"></a><span>        </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">sqlTypeToSql</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-identifier hs-var">SqlNull</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">sqlTypeToSql</span><span> </span><a href="#local-6989586621679101113"><span class="hs-identifier hs-var">sqlType</span></a><span class="hs-special">)</span><span>
</span><a name="line-133"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">sqlTypeFromSql</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679101114"><a href="#local-6989586621679101114"><span class="hs-identifier">sql</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-identifier">sqlTypeFromSql</span><span> </span><a href="#local-6989586621679101113"><span class="hs-identifier hs-var">sqlType</span></a><span> </span><a href="#local-6989586621679101114"><span class="hs-identifier hs-var">sql</span></a><span>
</span><a name="line-134"></a><span>        </span><span class="hs-special">}</span><span>
</span><a name="line-135"></a><span>  </span><span class="hs-keyword">in</span><span>
</span><a name="line-136"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-var">FieldDefinition</span></a><span>
</span><a name="line-137"></a><span>      </span><span class="hs-special">(</span><span class="hs-identifier">fieldName</span><span> </span><a href="#local-6989586621679101111"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">)</span><span>
</span><a name="line-138"></a><span>      </span><span class="hs-special">(</span><a href="#local-6989586621679101112"><span class="hs-identifier hs-var">nullableType</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">fieldType</span><span> </span><a href="#local-6989586621679101111"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">)</span><span>
</span><a name="line-139"></a><span>      </span><span class="hs-special">(</span><span class="hs-identifier">fieldFlags</span><span> </span><a href="#local-6989586621679101111"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">)</span><span>
</span><a name="line-140"></a><span>      </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier hs-var">Nullable</span></a><span>
</span><a name="line-141"></a><span>
</span><a name="line-142"></a><span class="hs-comment">{- |
  Migration Guide: @isFieldNullable@ has been replaced with
  @fieldIsNotNullable@, which has the same signture but the @Bool@ returned is
  the opposite.
-}</span><span>
</span><a name="line-147"></a><span class="hs-identifier">isFieldNullable</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101099"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101100"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-148"></a><a name="isFieldNullable"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#isFieldNullable"><span class="hs-identifier">isFieldNullable</span></a></a><span> </span><a name="local-6989586621679101115"><a href="#local-6989586621679101115"><span class="hs-identifier">field</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-149"></a><span>  </span><span class="hs-keyword">case</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#checkNullability"><span class="hs-identifier hs-var">checkNullability</span></a><span> </span><a href="#local-6989586621679101115"><span class="hs-identifier hs-var">field</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-150"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NullableField"><span class="hs-identifier hs-var">NullableField</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-151"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNullField"><span class="hs-identifier hs-var">NotNullField</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-152"></a><span>
</span><a name="line-153"></a><span class="hs-comment">{- |
  Migration Guide: @foreignKeyField@ has been removed. It is replaced by
  @addForeignKeyConstraint@ which adds a foreign key constraint to an existing
  @FieldDefinition@.
-}</span><span>
</span><a name="line-158"></a><span class="hs-identifier">foreignKeyField</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-159"></a><span>     </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-160"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition</span></a><span> </span><a href="#local-6989586621679101095"><span class="hs-identifier hs-type">readEntity</span></a><span> </span><a href="#local-6989586621679101096"><span class="hs-identifier hs-type">writeEntity</span></a><span> </span><a href="#local-6989586621679101097"><span class="hs-identifier hs-type">key</span></a><span>
</span><a name="line-161"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101098"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101097"><span class="hs-identifier hs-type">key</span></a><span>
</span><a name="line-162"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101098"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101097"><span class="hs-identifier hs-type">key</span></a><span>
</span><a name="line-163"></a><a name="foreignKeyField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#foreignKeyField"><span class="hs-identifier">foreignKeyField</span></a></a><span> </span><a name="local-6989586621679101116"><a href="#local-6989586621679101116"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-6989586621679101117"><a href="#local-6989586621679101117"><span class="hs-identifier">refTable</span></a></a><span> </span><a name="local-6989586621679101118"><a href="#local-6989586621679101118"><span class="hs-identifier">refField</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-164"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-var">FieldDefinition</span></a><span>
</span><a name="line-165"></a><span>    </span><a href="#local-6989586621679101116"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-166"></a><span>    </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#foreignRefType"><span class="hs-identifier hs-var">foreignRefType</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">fieldType</span><span> </span><a href="#local-6989586621679101118"><span class="hs-identifier hs-var">refField</span></a><span class="hs-special">)</span><span>
</span><a name="line-167"></a><span>    </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#References"><span class="hs-identifier hs-var">References</span></a><span> </span><a href="#local-6989586621679101117"><span class="hs-identifier hs-var">refTable</span></a><span> </span><a href="#local-6989586621679101118"><span class="hs-identifier hs-var">refField</span></a><span class="hs-special">]</span><span>
</span><a name="line-168"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">fieldNullability</span><span> </span><a href="#local-6989586621679101118"><span class="hs-identifier hs-var">refField</span></a><span class="hs-special">)</span><span>
</span><a name="line-169"></a><span>
</span><a name="line-170"></a><span class="hs-comment">{- |
  Migration Guide: @fieldOfType@ is essentially unchanged in the new orville.
-}</span><span>
</span><a name="line-173"></a><span class="hs-identifier">fieldOfType</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#SqlType"><span class="hs-identifier hs-type">SqlType</span></a><span> </span><a href="#local-6989586621679101094"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><a href="#local-6989586621679101094"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-174"></a><a name="fieldOfType"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldOfType"><span class="hs-identifier">fieldOfType</span></a></a><span> </span><a name="local-6989586621679101119"><a href="#local-6989586621679101119"><span class="hs-identifier">sqlType</span></a></a><span> </span><a name="local-6989586621679101120"><a href="#local-6989586621679101120"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-175"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-var">FieldDefinition</span></a><span>
</span><a name="line-176"></a><span>    </span><a href="#local-6989586621679101120"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-177"></a><span>    </span><a href="#local-6989586621679101119"><span class="hs-identifier hs-var">sqlType</span></a><span>
</span><a name="line-178"></a><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-179"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-var">NotNull</span></a><span>
</span><a name="line-180"></a><span>
</span><a name="line-181"></a><span class="hs-identifier">isAssignedByDatabase</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ColumnFlag"><span class="hs-identifier hs-type">ColumnFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-182"></a><a name="isAssignedByDatabase"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#isAssignedByDatabase"><span class="hs-identifier">isAssignedByDatabase</span></a></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#AssignedByDatabase"><span class="hs-identifier hs-var">AssignedByDatabase</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-183"></a><span class="hs-identifier">isAssignedByDatabase</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-184"></a><span>
</span><a name="line-185"></a><span class="hs-identifier">escapedFieldName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101092"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101093"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-186"></a><a name="escapedFieldName"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#escapedFieldName"><span class="hs-identifier">escapedFieldName</span></a></a><span> </span><a name="local-6989586621679101121"><a href="#local-6989586621679101121"><span class="hs-identifier">field</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;\&quot;&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier">fieldName</span><span> </span><a href="#local-6989586621679101121"><span class="hs-identifier hs-var">field</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;\&quot;&quot;</span><span>
</span><a name="line-187"></a><span>
</span><a name="line-188"></a><span class="hs-comment">{- |
  Migration Guide: @withFlag@ has been removed. See the migration guide
  on 'ColumnFlag' regarding the new API.
-}</span><span>
</span><a name="line-192"></a><span class="hs-identifier">withFlag</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101090"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101091"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ColumnFlag"><span class="hs-identifier hs-type">ColumnFlag</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101090"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101091"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-193"></a><a name="withFlag"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#withFlag"><span class="hs-identifier">withFlag</span></a></a><span> </span><a name="local-6989586621679101122"><a href="#local-6989586621679101122"><span class="hs-identifier">field</span></a></a><span> </span><a name="local-6989586621679101123"><a href="#local-6989586621679101123"><span class="hs-identifier">newFlag</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679101122"><span class="hs-identifier hs-var">field</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">fieldFlags</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679101123"><span class="hs-identifier hs-var">newFlag</span></a><span> </span><span class="hs-glyph">:</span><span> </span><span class="hs-identifier">fieldFlags</span><span> </span><a href="#local-6989586621679101122"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">}</span><span>
</span><a name="line-194"></a><span>
</span><a name="line-195"></a><span class="hs-comment">{- |
  Migration Guide: @withName@ has been removed.
-}</span><span>
</span><a name="line-198"></a><span class="hs-identifier">withName</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101088"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101089"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101088"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101089"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-199"></a><a name="withName"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#withName"><span class="hs-identifier">withName</span></a></a><span> </span><a name="local-6989586621679101124"><a href="#local-6989586621679101124"><span class="hs-identifier">field</span></a></a><span> </span><a name="local-6989586621679101125"><a href="#local-6989586621679101125"><span class="hs-identifier">newName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679101124"><span class="hs-identifier hs-var">field</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">fieldName</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679101125"><span class="hs-identifier hs-var">newName</span></a><span class="hs-special">}</span><span>
</span><a name="line-200"></a><span>
</span><a name="line-201"></a><span class="hs-comment">{- |
  Migration Guide: @withConversion@ has been replaced with @convertField@,
  whose arguments are flipped from those of @withConversion@. Note there is
  also now a @coerceField@ function that can be used with @newtype@ wrappers,
  provided the constructor is available where @coerceField@ is used.
-}</span><span>
</span><a name="line-207"></a><span class="hs-identifier">withConversion</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-208"></a><span>     </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101085"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101086"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#SqlType"><span class="hs-identifier hs-type">SqlType</span></a><span> </span><a href="#local-6989586621679101086"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#SqlType"><span class="hs-identifier hs-type">SqlType</span></a><span> </span><a href="#local-6989586621679101087"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101085"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101087"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-209"></a><a name="withConversion"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#withConversion"><span class="hs-identifier">withConversion</span></a></a><span> </span><a name="local-6989586621679101126"><a href="#local-6989586621679101126"><span class="hs-identifier">field</span></a></a><span> </span><a name="local-6989586621679101127"><a href="#local-6989586621679101127"><span class="hs-identifier">mapType</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679101126"><span class="hs-identifier hs-var">field</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">fieldType</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679101127"><span class="hs-identifier hs-var">mapType</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">fieldType</span><span> </span><a href="#local-6989586621679101126"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">}</span><span>
</span><a name="line-210"></a><span>
</span><a name="line-211"></a><span class="hs-identifier">isAssignedByDatabaseField</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101083"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101084"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-212"></a><a name="isAssignedByDatabaseField"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#isAssignedByDatabaseField"><span class="hs-identifier">isAssignedByDatabaseField</span></a></a><span> </span><a name="local-6989586621679101128"><a href="#local-6989586621679101128"><span class="hs-identifier">field</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">any</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#isAssignedByDatabase"><span class="hs-identifier hs-var">isAssignedByDatabase</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">fieldFlags</span><span> </span><a href="#local-6989586621679101128"><span class="hs-identifier hs-var">field</span></a><span>
</span><a name="line-213"></a><span>
</span><a name="line-214"></a><span class="hs-comment">{- |
  Migration Guide: @withPrefix@ has been replaced by @prefixField@ whose
  arguments are flipped relative to @withPrefix@
-}</span><span>
</span><a name="line-218"></a><span class="hs-identifier">withPrefix</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101081"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101082"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101081"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101082"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-219"></a><a name="withPrefix"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#withPrefix"><span class="hs-identifier">withPrefix</span></a></a><span> </span><a name="local-6989586621679101129"><a href="#local-6989586621679101129"><span class="hs-identifier">field</span></a></a><span> </span><a name="local-6989586621679101130"><a href="#local-6989586621679101130"><span class="hs-identifier">prefix</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679101129"><span class="hs-identifier hs-var">field</span></a><span> </span><span class="hs-special">`</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#withName"><span class="hs-identifier hs-var">withName</span></a><span class="hs-special">`</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679101130"><span class="hs-identifier hs-var">prefix</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;_&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier">fieldName</span><span> </span><a href="#local-6989586621679101129"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">)</span><span>
</span><a name="line-220"></a><span>
</span><a name="line-221"></a><span class="hs-identifier">fieldToNameForm</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101079"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101080"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.NameExpr.html#NameForm"><span class="hs-identifier hs-type">NameForm</span></a><span>
</span><a name="line-222"></a><a name="fieldToNameForm"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier">fieldToNameForm</span></a></a><span> </span><a name="local-6989586621679101131"><a href="#local-6989586621679101131"><span class="hs-identifier">field</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.NameExpr.html#NameForm"><span class="hs-identifier hs-var">NameForm</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fieldName</span><span> </span><a href="#local-6989586621679101131"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">)</span><span>
</span><a name="line-223"></a><span>
</span><a name="line-224"></a><span class="hs-comment">{- |
  Migration Guide: @fieldToSqlValue@ has been renamed to @fieldValueToSqlValue@
-}</span><span>
</span><a name="line-227"></a><span class="hs-identifier">fieldToSqlValue</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101077"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101078"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679101078"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SqlValue</span><span>
</span><a name="line-228"></a><a name="fieldToSqlValue"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToSqlValue"><span class="hs-identifier">fieldToSqlValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">sqlTypeToSql</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">fieldType</span><span>
</span><a name="line-229"></a><span>
</span><a name="line-230"></a><span class="hs-comment">{- |
  Migration Guide: @fieldFromSqlValue@ has been renamed to @fieldValueFromSqlValue@
-}</span><span>
</span><a name="line-233"></a><span class="hs-identifier">fieldFromSqlValue</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679101075"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679101076"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SqlValue</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#RowDataErrorReason"><span class="hs-identifier hs-type">RowDataErrorReason</span></a><span> </span><a href="#local-6989586621679101076"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-234"></a><a name="fieldFromSqlValue"><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldFromSqlValue"><span class="hs-identifier">fieldFromSqlValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">sqlTypeFromSql</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">fieldType</span><span>
</span><a name="line-235"></a></pre></body></html>