<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-|
Module    : Database.Orville.PostgreSQL.Internal.Types
Copyright : Flipstone Technology Partners 2016-2018
License   : MIT
-}</span><span>
</span><a name="line-6"></a><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><a name="line-7"></a><span class="hs-pragma">{-# LANGUAGE ExistentialQuantification #-}</span><span>
</span><a name="line-8"></a><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><a name="line-9"></a><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><a name="line-10"></a><span>
</span><a name="line-11"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.Types</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-12"></a><span>
</span><a name="line-13"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Exception</span><span>
</span><a name="line-14"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">join</span><span class="hs-special">)</span><span>
</span><a name="line-15"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Except</span><span>
</span><a name="line-16"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Reader</span><span>
</span><a name="line-17"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.State</span><span>
</span><a name="line-18"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Writer</span><span>
</span><a name="line-19"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Char</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Char</span><span>
</span><a name="line-20"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.List</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">List</span><span>
</span><a name="line-21"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Typeable</span><span>
</span><a name="line-22"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Database.HDBC</span><span>
</span><a name="line-23"></a><span>
</span><a name="line-24"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Time</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Time</span><span>
</span><a name="line-25"></a><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.Expr</span></a><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.QueryKey</span></a><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.SqlType</span></a><span>
</span><a name="line-29"></a><span>
</span><a name="line-30"></a><span class="hs-comment">{- |
  Migration Guide: @Record@ has been removed. It's recommended that you
  create a separate record key type for each of your entities instead.
-}</span><span>
</span><a name="line-34"></a><span class="hs-keyword">type</span><span> </span><a name="Record"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Record"><span class="hs-identifier">Record</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-35"></a><span>
</span><a name="line-36"></a><span class="hs-keyword">type</span><span> </span><a name="CreatedAt"><a href="Database.Orville.PostgreSQL.Internal.Types.html#CreatedAt"><span class="hs-identifier">CreatedAt</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Time.UTCTime</span><span>
</span><a name="line-37"></a><span>
</span><a name="line-38"></a><span class="hs-keyword">type</span><span> </span><a name="UpdatedAt"><a href="Database.Orville.PostgreSQL.Internal.Types.html#UpdatedAt"><span class="hs-identifier">UpdatedAt</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Time.UTCTime</span><span>
</span><a name="line-39"></a><span>
</span><a name="line-40"></a><span class="hs-keyword">type</span><span> </span><a name="OccurredAt"><a href="Database.Orville.PostgreSQL.Internal.Types.html#OccurredAt"><span class="hs-identifier">OccurredAt</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Time.UTCTime</span><span>
</span><a name="line-41"></a><span>
</span><a name="line-42"></a><span class="hs-comment">{- |
  Migration Guide: @ColumnFlag@ has been removed. Depending on flag constructor
  there may or may not be a replacement.

  @ColumnDefault@ - replaced by the @setDefaultValue@ function in new orville
  @Unique@ - replaced by the @addUniqueConstraint@ function in new orville
  @References@ - replaced by the @addForeignKeyConstraint@ function in new orville
  @ColumnDescription@ - removed
  @AssignedByDatabase@ - removed, though many cases are handled by @marshallReadOnlyField@

-}</span><span>
</span><a name="line-53"></a><span class="hs-keyword">data</span><span> </span><a name="ColumnFlag"><a href="Database.Orville.PostgreSQL.Internal.Types.html#ColumnFlag"><span class="hs-identifier">ColumnFlag</span></a></a><span>
</span><a name="line-54"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679094478"><a href="#local-6989586621679094478"><span class="hs-identifier">a</span></a></a><span class="hs-operator">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ColumnDefault"><span class="hs-identifier hs-type">ColumnDefault</span></a><span> </span><a href="#local-6989586621679094478"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a name="Default"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Default"><span class="hs-identifier">Default</span></a></a><span> </span><a href="#local-6989586621679094478"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-55"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Unique"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Unique"><span class="hs-identifier">Unique</span></a></a><span>
</span><a name="line-56"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679094479"><a href="#local-6989586621679094479"><span class="hs-identifier">readEntity</span></a></a><span> </span><a name="local-6989586621679094480"><a href="#local-6989586621679094480"><span class="hs-identifier">writeEntity</span></a></a><span> </span><a name="local-6989586621679094481"><a href="#local-6989586621679094481"><span class="hs-identifier">key</span></a></a><span> </span><a name="local-6989586621679094482"><a href="#local-6989586621679094482"><span class="hs-identifier">nullability</span></a></a><span class="hs-operator">.</span><span> </span><a name="References"><a href="Database.Orville.PostgreSQL.Internal.Types.html#References"><span class="hs-identifier">References</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition</span></a><span> </span><a href="#local-6989586621679094479"><span class="hs-identifier hs-type">readEntity</span></a><span> </span><a href="#local-6989586621679094480"><span class="hs-identifier hs-type">writeEntity</span></a><span> </span><a href="#local-6989586621679094481"><span class="hs-identifier hs-type">key</span></a><span class="hs-special">)</span><span>
</span><a name="line-57"></a><span>                                                              </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679094482"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679094481"><span class="hs-identifier hs-type">key</span></a><span class="hs-special">)</span><span>
</span><a name="line-58"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="ColumnDescription"><a href="Database.Orville.PostgreSQL.Internal.Types.html#ColumnDescription"><span class="hs-identifier">ColumnDescription</span></a></a><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-59"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="AssignedByDatabase"><a href="Database.Orville.PostgreSQL.Internal.Types.html#AssignedByDatabase"><span class="hs-identifier">AssignedByDatabase</span></a></a><span>
</span><a name="line-60"></a><span>
</span><a name="line-61"></a><span class="hs-keyword">class</span><span> </span><a name="ColumnDefault"><a href="Database.Orville.PostgreSQL.Internal.Types.html#ColumnDefault"><span class="hs-identifier">ColumnDefault</span></a></a><span> </span><a name="local-6989586621679094477"><a href="#local-6989586621679094477"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-62"></a><span>  </span><a name="toColumnDefaultSql"><a href="Database.Orville.PostgreSQL.Internal.Types.html#toColumnDefaultSql"><span class="hs-identifier">toColumnDefaultSql</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679094477"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-63"></a><span>
</span><a name="line-64"></a><span class="hs-keyword">data</span><span> </span><a name="Now"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Now"><span class="hs-identifier">Now</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-65"></a><span>  </span><a name="Now"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Now"><span class="hs-identifier">Now</span></a></a><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ColumnDefault"><span class="hs-identifier hs-type">ColumnDefault</span></a><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Char</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-68"></a><span>  </span><a name="local-8214565720323869187"><a href="Database.Orville.PostgreSQL.Internal.Types.html#toColumnDefaultSql"><span class="hs-identifier">toColumnDefaultSql</span></a></a><span> </span><a name="local-6989586621679094506"><a href="#local-6989586621679094506"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;'&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679094506"><span class="hs-identifier hs-var">s</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;'&quot;</span><span>
</span><a name="line-69"></a><span>
</span><a name="line-70"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ColumnDefault"><span class="hs-identifier hs-type">ColumnDefault</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Now"><span class="hs-identifier hs-type">Now</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-71"></a><span>  </span><a name="local-8214565720323869187"><a href="Database.Orville.PostgreSQL.Internal.Types.html#toColumnDefaultSql"><span class="hs-identifier">toColumnDefaultSql</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;(now() at time zone 'utc')&quot;</span><span>
</span><a name="line-72"></a><span>
</span><a name="line-73"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ColumnDefault"><span class="hs-identifier hs-type">ColumnDefault</span></a><span> </span><span class="hs-identifier hs-type">Integer</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-74"></a><span>  </span><a name="local-8214565720323869187"><a href="Database.Orville.PostgreSQL.Internal.Types.html#toColumnDefaultSql"><span class="hs-identifier">toColumnDefaultSql</span></a></a><span> </span><a name="local-6989586621679094505"><a href="#local-6989586621679094505"><span class="hs-identifier">val</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094505"><span class="hs-identifier hs-var">val</span></a><span>
</span><a name="line-75"></a><span>
</span><a name="line-76"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ColumnDefault"><span class="hs-identifier hs-type">ColumnDefault</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-77"></a><span>  </span><a name="local-8214565720323869187"><a href="Database.Orville.PostgreSQL.Internal.Types.html#toColumnDefaultSql"><span class="hs-identifier">toColumnDefaultSql</span></a></a><span> </span><span class="hs-identifier hs-var">True</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;true&quot;</span><span>
</span><a name="line-78"></a><span>  </span><span class="hs-identifier">toColumnDefaultSql</span><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;false&quot;</span><span>
</span><a name="line-79"></a><span>
</span><a name="line-80"></a><span class="hs-comment">-- | 'Nullable' is a values-less type used to track that a 'FieldDefinition'</span><span>
</span><a name="line-81"></a><span class="hs-comment">-- represents a field that is marked nullable in the database schema. See the</span><span>
</span><a name="line-82"></a><span class="hs-comment">-- 'Nullability' type for the value-level representation of field nullability.</span><span>
</span><a name="line-83"></a><span class="hs-keyword">data</span><span> </span><a name="Nullable"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier">Nullable</span></a></a><span>
</span><a name="line-84"></a><span>
</span><a name="line-85"></a><span class="hs-comment">-- | 'NotNull is a values-less type used to track that a 'FieldDefinition'</span><span>
</span><a name="line-86"></a><span class="hs-comment">-- represents a field that is marked not-null in the database schema.  See the</span><span>
</span><a name="line-87"></a><span class="hs-comment">-- 'Nullability' type for the value-level representation of field nullability.</span><span>
</span><a name="line-88"></a><span class="hs-keyword">data</span><span> </span><a name="NotNull"><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier">NotNull</span></a></a><span>
</span><a name="line-89"></a><span>
</span><a name="line-90"></a><span class="hs-comment">-- | 'Nullability' represents whether a field will be marked as 'NULL' or 'NOT</span><span>
</span><a name="line-91"></a><span class="hs-comment">-- NULL' in the database schema. It is a GADT so that the value constructors</span><span>
</span><a name="line-92"></a><span class="hs-comment">-- can be used to record this knowledge in the type system as well. This allows</span><span>
</span><a name="line-93"></a><span class="hs-comment">-- functions that work only on 'Nullable' or 'NotNull' fields to indicate this</span><span>
</span><a name="line-94"></a><span class="hs-comment">-- in their type signatures as appropriate.</span><span>
</span><a name="line-95"></a><span class="hs-keyword">data</span><span> </span><a name="Nullability"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullability"><span class="hs-identifier">Nullability</span></a></a><span> </span><a name="local-6989586621679094476"><a href="#local-6989586621679094476"><span class="hs-identifier">nullability</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-96"></a><span>  </span><a name="Nullable"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier">Nullable</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullability"><span class="hs-identifier hs-type">Nullability</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier hs-type">Nullable</span></a><span>
</span><a name="line-97"></a><span>  </span><a name="NotNull"><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier">NotNull</span></a></a><span>  </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullability"><span class="hs-identifier hs-type">Nullability</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span>
</span><a name="line-98"></a><span>
</span><a name="line-99"></a><span class="hs-comment">-- | A 'NullabilityCheck' is returned by the 'checkNullability' function, which</span><span>
</span><a name="line-100"></a><span class="hs-comment">-- can be used when a function works on both 'Nullable' and 'NotNull' functions</span><span>
</span><a name="line-101"></a><span class="hs-comment">-- but needs to deal with each type of field separately. It adds wrapper</span><span>
</span><a name="line-102"></a><span class="hs-comment">-- constructors around the 'FieldDefinition' that you can pattern match on to</span><span>
</span><a name="line-103"></a><span class="hs-comment">-- then work with a concrete 'Nullable' or 'NotNull' field.</span><span>
</span><a name="line-104"></a><span class="hs-keyword">data</span><span> </span><a name="NullabilityCheck"><a href="Database.Orville.PostgreSQL.Internal.Types.html#NullabilityCheck"><span class="hs-identifier">NullabilityCheck</span></a></a><span> </span><a name="local-6989586621679094475"><a href="#local-6989586621679094475"><span class="hs-identifier">a</span></a></a><span>
</span><a name="line-105"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="NullableField"><a href="Database.Orville.PostgreSQL.Internal.Types.html#NullableField"><span class="hs-identifier">NullableField</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier hs-type">Nullable</span></a><span> </span><a href="#local-6989586621679094475"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-106"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="NotNullField"><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNullField"><span class="hs-identifier">NotNullField</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><a href="#local-6989586621679094475"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-107"></a><span>
</span><a name="line-108"></a><span class="hs-comment">-- | Resolves the 'nullablity' of a field to a concrete type based on its</span><span>
</span><a name="line-109"></a><span class="hs-comment">-- 'fieldNullability'. You can do this directly by pattern matching on the</span><span>
</span><a name="line-110"></a><span class="hs-comment">-- value of 'fieldNullability' if you have the GADTs extension turned on, but</span><span>
</span><a name="line-111"></a><span class="hs-comment">-- this function will do that for you so you don't need to turn GADTs on.</span><span>
</span><a name="line-112"></a><span class="hs-identifier">checkNullability</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679094513"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679094514"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NullabilityCheck"><span class="hs-identifier hs-type">NullabilityCheck</span></a><span> </span><a href="#local-6989586621679094514"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-113"></a><a name="checkNullability"><a href="Database.Orville.PostgreSQL.Internal.Types.html#checkNullability"><span class="hs-identifier">checkNullability</span></a></a><span> </span><a name="local-6989586621679094515"><a href="#local-6989586621679094515"><span class="hs-identifier">field</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-114"></a><span>  </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">fieldNullability</span><span> </span><a href="#local-6989586621679094515"><span class="hs-identifier hs-var">field</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-115"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier hs-var">Nullable</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NullableField"><span class="hs-identifier hs-var">NullableField</span></a><span> </span><a href="#local-6989586621679094515"><span class="hs-identifier hs-var">field</span></a><span>
</span><a name="line-116"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-var">NotNull</span></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNullField"><span class="hs-identifier hs-var">NotNullField</span></a><span> </span><a href="#local-6989586621679094515"><span class="hs-identifier hs-var">field</span></a><span>
</span><a name="line-117"></a><span>
</span><a name="line-118"></a><span class="hs-comment">{- |
  Migration Guide: The signature of the @FieldDefinition@ type has not changed,
  but many of the constructors and accessors have. See the migration guides
  on individual functions for more info.
-}</span><span>
</span><a name="line-123"></a><span class="hs-keyword">data</span><span> </span><a name="FieldDefinition"><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier">FieldDefinition</span></a></a><span> </span><a name="local-6989586621679094473"><a href="#local-6989586621679094473"><span class="hs-identifier">nullability</span></a></a><span> </span><a name="local-6989586621679094474"><a href="#local-6989586621679094474"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-124"></a><span>  </span><a name="FieldDefinition"><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier">FieldDefinition</span></a></a><span>
</span><a name="line-125"></a><span>    </span><span class="hs-special">{</span><span> </span><a name="fieldName"><a href="Database.Orville.PostgreSQL.Internal.Types.html#fieldName"><span class="hs-identifier">fieldName</span></a></a><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-126"></a><span>    </span><span class="hs-special">,</span><span> </span><a name="fieldType"><a href="Database.Orville.PostgreSQL.Internal.Types.html#fieldType"><span class="hs-identifier">fieldType</span></a></a><span>        </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#SqlType"><span class="hs-identifier hs-type">SqlType</span></a><span> </span><a href="#local-6989586621679094474"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-127"></a><span>    </span><span class="hs-special">,</span><span> </span><a name="fieldFlags"><a href="Database.Orville.PostgreSQL.Internal.Types.html#fieldFlags"><span class="hs-identifier">fieldFlags</span></a></a><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ColumnFlag"><span class="hs-identifier hs-type">ColumnFlag</span></a><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ @fieldFlags@ has been removed. See the new @fieldDefaultValue@ and @fieldTableConstraints@ functions</span><span>
</span><a name="line-128"></a><span>    </span><span class="hs-special">,</span><span> </span><a name="fieldNullability"><a href="Database.Orville.PostgreSQL.Internal.Types.html#fieldNullability"><span class="hs-identifier">fieldNullability</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullability"><span class="hs-identifier hs-type">Nullability</span></a><span> </span><a href="#local-6989586621679094473"><span class="hs-identifier hs-type">nullability</span></a><span>
</span><a name="line-129"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-130"></a><span>
</span><a name="line-131"></a><span class="hs-keyword">data</span><span> </span><a name="SomeField"><a href="Database.Orville.PostgreSQL.Internal.Types.html#SomeField"><span class="hs-identifier">SomeField</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-132"></a><span>  </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679094471"><a href="#local-6989586621679094471"><span class="hs-identifier">nullability</span></a></a><span> </span><a name="local-6989586621679094472"><a href="#local-6989586621679094472"><span class="hs-identifier">a</span></a></a><span class="hs-operator">.</span><span>
</span><a name="line-133"></a><span>    </span><a name="SomeField"><a href="Database.Orville.PostgreSQL.Internal.Types.html#SomeField"><span class="hs-identifier">SomeField</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679094471"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679094472"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-134"></a><span>
</span><a name="line-135"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#QueryKeyable"><span class="hs-identifier hs-type">QueryKeyable</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679094502"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679094503"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-136"></a><span>  </span><a name="local-8214565720323859234"><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#queryKey"><span class="hs-identifier">queryKey</span></a></a><span> </span><a name="local-6989586621679094504"><a href="#local-6989586621679094504"><span class="hs-identifier">field</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#QKField"><span class="hs-identifier hs-var">QKField</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">fieldName</span><span> </span><a href="#local-6989586621679094504"><span class="hs-identifier hs-var">field</span></a><span>
</span><a name="line-137"></a><span>
</span><a name="line-138"></a><span class="hs-keyword">data</span><span> </span><a name="FieldUpdate"><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldUpdate"><span class="hs-identifier">FieldUpdate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="FieldUpdate"><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldUpdate"><span class="hs-identifier">FieldUpdate</span></a></a><span>
</span><a name="line-139"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="fieldUpdateField"><a href="Database.Orville.PostgreSQL.Internal.Types.html#fieldUpdateField"><span class="hs-identifier">fieldUpdateField</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#SomeField"><span class="hs-identifier hs-type">SomeField</span></a><span>
</span><a name="line-140"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="fieldUpdateValue"><a href="Database.Orville.PostgreSQL.Internal.Types.html#fieldUpdateValue"><span class="hs-identifier">fieldUpdateValue</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">SqlValue</span><span>
</span><a name="line-141"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-142"></a><span>
</span><a name="line-143"></a><span class="hs-keyword">data</span><span> </span><a name="TableComment"><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComment"><span class="hs-identifier">TableComment</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="TableComment"><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComment"><span class="hs-identifier">TableComment</span></a></a><span>
</span><a name="line-144"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="tcWhat"><a href="Database.Orville.PostgreSQL.Internal.Types.html#tcWhat"><span class="hs-identifier">tcWhat</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-145"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tcWhen"><a href="Database.Orville.PostgreSQL.Internal.Types.html#tcWhen"><span class="hs-identifier">tcWhen</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Int</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Int</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Int</span><span class="hs-special">)</span><span>
</span><a name="line-146"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tcWho"><a href="Database.Orville.PostgreSQL.Internal.Types.html#tcWho"><span class="hs-identifier">tcWho</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-147"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-148"></a><span>
</span><a name="line-149"></a><span class="hs-keyword">newtype</span><span> </span><a name="TableComments"><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComments"><span class="hs-identifier">TableComments</span></a></a><span> </span><a name="local-6989586621679094470"><a href="#local-6989586621679094470"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-150"></a><span>  </span><a name="TableComments"><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComments"><span class="hs-identifier">TableComments</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Writer</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComment"><span class="hs-identifier hs-type">TableComment</span></a><span class="hs-special">]</span><span> </span><a href="#local-6989586621679094470"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-151"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Functor</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monad</span><span class="hs-special">)</span><span>
</span><a name="line-152"></a><span>
</span><a name="line-153"></a><span class="hs-identifier">runComments</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComments"><span class="hs-identifier hs-type">TableComments</span></a><span> </span><a href="#local-6989586621679094512"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComment"><span class="hs-identifier hs-type">TableComment</span></a><span class="hs-special">]</span><span>
</span><a name="line-154"></a><a name="runComments"><a href="Database.Orville.PostgreSQL.Internal.Types.html#runComments"><span class="hs-identifier">runComments</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComments"><span class="hs-identifier hs-var">TableComments</span></a><span> </span><a name="local-6989586621679094516"><a href="#local-6989586621679094516"><span class="hs-identifier">commenter</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">snd</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">runWriter</span><span> </span><a href="#local-6989586621679094516"><span class="hs-identifier hs-var">commenter</span></a><span class="hs-special">)</span><span>
</span><a name="line-155"></a><span>
</span><a name="line-156"></a><span class="hs-identifier">noComments</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComments"><span class="hs-identifier hs-type">TableComments</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-157"></a><a name="noComments"><a href="Database.Orville.PostgreSQL.Internal.Types.html#noComments"><span class="hs-identifier">noComments</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-158"></a><span>
</span><a name="line-159"></a><span class="hs-identifier">say</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Int</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Int</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Int</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComments"><span class="hs-identifier hs-type">TableComments</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-160"></a><a name="say"><a href="Database.Orville.PostgreSQL.Internal.Types.html#say"><span class="hs-identifier">say</span></a></a><span> </span><a name="local-6989586621679094532"><a href="#local-6989586621679094532"><span class="hs-identifier">msg</span></a></a><span> </span><a name="local-6989586621679094533"><a href="#local-6989586621679094533"><span class="hs-identifier">msgDate</span></a></a><span> </span><a name="local-6989586621679094534"><a href="#local-6989586621679094534"><span class="hs-identifier">commenter</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-161"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComments"><span class="hs-identifier hs-var">TableComments</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">writer</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComment"><span class="hs-identifier hs-var">TableComment</span></a><span> </span><a href="#local-6989586621679094532"><span class="hs-identifier hs-var">msg</span></a><span> </span><a href="#local-6989586621679094533"><span class="hs-identifier hs-var">msgDate</span></a><span> </span><a href="#local-6989586621679094534"><span class="hs-identifier hs-var">commenter</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-162"></a><span>
</span><a name="line-163"></a><span class="hs-keyword">data</span><span> </span><a name="FromSqlError"><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSqlError"><span class="hs-identifier">FromSqlError</span></a></a><span>
</span><a name="line-164"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="RowDataError"><a href="Database.Orville.PostgreSQL.Internal.Types.html#RowDataError"><span class="hs-identifier">RowDataError</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#RowDataErrorDetails"><span class="hs-identifier hs-type">RowDataErrorDetails</span></a><span>
</span><a name="line-165"></a><span>    </span><span class="hs-comment">-- ^ Captures a failure in the translation of a SQL value from a particular</span><span>
</span><a name="line-166"></a><span>    </span><span class="hs-comment">-- field to it's corresponding Haskell values.</span><span>
</span><a name="line-167"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="MissingColumn"><a href="Database.Orville.PostgreSQL.Internal.Types.html#MissingColumn"><span class="hs-identifier">MissingColumn</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#MissingColumnDetails"><span class="hs-identifier hs-type">MissingColumnDetails</span></a><span>
</span><a name="line-168"></a><span>    </span><span class="hs-comment">-- ^ An expected column was not returned by the database</span><span>
</span><a name="line-169"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="ConversionError"><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConversionError"><span class="hs-identifier">ConversionError</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConversionErrorDetails"><span class="hs-identifier hs-type">ConversionErrorDetails</span></a><span>
</span><a name="line-170"></a><span>    </span><span class="hs-comment">-- ^ A conversion between haskell representations failed at a point where</span><span>
</span><a name="line-171"></a><span>    </span><span class="hs-comment">-- we don't know what column the value came from. This is the case when</span><span>
</span><a name="line-172"></a><span>    </span><span class="hs-comment">-- using the 'partialMap' combinator.</span><span>
</span><a name="line-173"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span>
</span><a name="line-174"></a><span>
</span><a name="line-175"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSqlError"><span class="hs-identifier hs-type">FromSqlError</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-176"></a><span>  </span><a name="local-8214565720323790323"><span class="hs-identifier">show</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#showFromSqlErrorMinimal"><span class="hs-identifier hs-var">showFromSqlErrorMinimal</span></a><span>
</span><a name="line-177"></a><span>
</span><a name="line-178"></a><span class="hs-keyword">data</span><span> </span><a name="RowDataErrorDetails"><a href="Database.Orville.PostgreSQL.Internal.Types.html#RowDataErrorDetails"><span class="hs-identifier">RowDataErrorDetails</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-179"></a><span>  </span><a name="RowDataErrorDetails"><a href="Database.Orville.PostgreSQL.Internal.Types.html#RowDataErrorDetails"><span class="hs-identifier">RowDataErrorDetails</span></a></a><span>
</span><a name="line-180"></a><span>    </span><span class="hs-special">{</span><span> </span><a name="rowErrorReason"><a href="Database.Orville.PostgreSQL.Internal.Types.html#rowErrorReason"><span class="hs-identifier">rowErrorReason</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#RowDataErrorReason"><span class="hs-identifier hs-type">RowDataErrorReason</span></a><span>
</span><a name="line-181"></a><span>    </span><span class="hs-special">,</span><span> </span><a name="rowErrorColumnName"><a href="Database.Orville.PostgreSQL.Internal.Types.html#rowErrorColumnName"><span class="hs-identifier">rowErrorColumnName</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-182"></a><span>    </span><span class="hs-comment">-- ^ Column name for the erroneous value</span><span>
</span><a name="line-183"></a><span>    </span><span class="hs-special">,</span><span> </span><a name="rowErrorPrimaryKeys"><a href="Database.Orville.PostgreSQL.Internal.Types.html#rowErrorPrimaryKeys"><span class="hs-identifier">rowErrorPrimaryKeys</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">SqlValue</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-184"></a><span>    </span><span class="hs-comment">-- ^ Primary keys. Empty if not known</span><span>
</span><a name="line-185"></a><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span>
</span><a name="line-186"></a><span>
</span><a name="line-187"></a><span class="hs-keyword">data</span><span> </span><a name="MissingColumnDetails"><a href="Database.Orville.PostgreSQL.Internal.Types.html#MissingColumnDetails"><span class="hs-identifier">MissingColumnDetails</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-188"></a><span>  </span><a name="MissingColumnDetails"><a href="Database.Orville.PostgreSQL.Internal.Types.html#MissingColumnDetails"><span class="hs-identifier">MissingColumnDetails</span></a></a><span>
</span><a name="line-189"></a><span>    </span><span class="hs-special">{</span><span> </span><a name="missingColumn"><a href="Database.Orville.PostgreSQL.Internal.Types.html#missingColumn"><span class="hs-identifier">missingColumn</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-190"></a><span>    </span><span class="hs-special">,</span><span> </span><a name="actualColumns"><a href="Database.Orville.PostgreSQL.Internal.Types.html#actualColumns"><span class="hs-identifier">actualColumns</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span>
</span><a name="line-191"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-192"></a><span>
</span><a name="line-193"></a><span class="hs-keyword">data</span><span> </span><a name="ConversionErrorDetails"><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConversionErrorDetails"><span class="hs-identifier">ConversionErrorDetails</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-194"></a><span>  </span><a name="ConversionErrorDetails"><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConversionErrorDetails"><span class="hs-identifier">ConversionErrorDetails</span></a></a><span>
</span><a name="line-195"></a><span>    </span><span class="hs-special">{</span><span> </span><a name="convErrorReason"><a href="Database.Orville.PostgreSQL.Internal.Types.html#convErrorReason"><span class="hs-identifier">convErrorReason</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-196"></a><span>    </span><span class="hs-special">,</span><span> </span><a name="convErrorPrimaryKeys"><a href="Database.Orville.PostgreSQL.Internal.Types.html#convErrorPrimaryKeys"><span class="hs-identifier">convErrorPrimaryKeys</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">SqlValue</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-197"></a><span>    </span><span class="hs-comment">-- ^ Primary key value(s). Empty if not known</span><span>
</span><a name="line-198"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-199"></a><span>
</span><a name="line-200"></a><span class="hs-identifier">simpleConversionError</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSqlError"><span class="hs-identifier hs-type">FromSqlError</span></a><span>
</span><a name="line-201"></a><a name="simpleConversionError"><a href="Database.Orville.PostgreSQL.Internal.Types.html#simpleConversionError"><span class="hs-identifier">simpleConversionError</span></a></a><span> </span><a name="local-6989586621679094688"><a href="#local-6989586621679094688"><span class="hs-identifier">err</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-202"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConversionError"><span class="hs-identifier hs-var">ConversionError</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConversionErrorDetails"><span class="hs-identifier hs-var">ConversionErrorDetails</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">convErrorReason</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679094688"><span class="hs-identifier hs-var">err</span></a><span>
</span><a name="line-203"></a><span>                                         </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">convErrorPrimaryKeys</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-204"></a><span>                                         </span><span class="hs-special">}</span><span>
</span><a name="line-205"></a><span>
</span><a name="line-206"></a><span class="hs-comment">-- | Shows the error in a way that should not contain any potentially sensitive</span><span>
</span><a name="line-207"></a><span class="hs-comment">-- data. This is used for the 'Show' instance.</span><span>
</span><a name="line-208"></a><span class="hs-identifier">showFromSqlErrorMinimal</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSqlError"><span class="hs-identifier hs-type">FromSqlError</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-209"></a><a name="showFromSqlErrorMinimal"><a href="Database.Orville.PostgreSQL.Internal.Types.html#showFromSqlErrorMinimal"><span class="hs-identifier">showFromSqlErrorMinimal</span></a></a><span> </span><a name="local-6989586621679094689"><a href="#local-6989586621679094689"><span class="hs-identifier">err</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-210"></a><span>  </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679094689"><span class="hs-identifier hs-var">err</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-211"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#RowDataError"><span class="hs-identifier hs-var">RowDataError</span></a><span> </span><a name="local-6989586621679094690"><a href="#local-6989586621679094690"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-212"></a><span>      </span><span class="hs-string">&quot;Error decoding data from column '&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier">rowErrorColumnName</span><span> </span><a href="#local-6989586621679094690"><span class="hs-identifier hs-var">details</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;'&quot;</span><span>
</span><a name="line-213"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#MissingColumn"><span class="hs-identifier hs-var">MissingColumn</span></a><span> </span><a name="local-6989586621679094691"><a href="#local-6989586621679094691"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#showMissingColumnDetails"><span class="hs-identifier hs-var">showMissingColumnDetails</span></a><span> </span><a href="#local-6989586621679094691"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-214"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConversionError"><span class="hs-identifier hs-var">ConversionError</span></a><span> </span><a name="local-6989586621679094692"><a href="#local-6989586621679094692"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">convErrorReason</span><span> </span><a href="#local-6989586621679094692"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-215"></a><span>
</span><a name="line-216"></a><span class="hs-comment">-- | Shows the error in a way appropriate for logging within an application.</span><span>
</span><a name="line-217"></a><span class="hs-comment">-- The resulting string contains information that is useful for debugging but</span><span>
</span><a name="line-218"></a><span class="hs-comment">-- is potentially undesirable to expose outside of the application (such as</span><span>
</span><a name="line-219"></a><span class="hs-comment">-- primary key values).</span><span>
</span><a name="line-220"></a><span class="hs-identifier">showFromSqlErrorForLogging</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSqlError"><span class="hs-identifier hs-type">FromSqlError</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-221"></a><a name="showFromSqlErrorForLogging"><a href="Database.Orville.PostgreSQL.Internal.Types.html#showFromSqlErrorForLogging"><span class="hs-identifier">showFromSqlErrorForLogging</span></a></a><span> </span><a name="local-6989586621679094693"><a href="#local-6989586621679094693"><span class="hs-identifier">err</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-222"></a><span>  </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679094693"><span class="hs-identifier hs-var">err</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-223"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#RowDataError"><span class="hs-identifier hs-var">RowDataError</span></a><span> </span><a name="local-6989586621679095017"><a href="#local-6989586621679095017"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-224"></a><span>      </span><span class="hs-identifier hs-var">concat</span><span>
</span><a name="line-225"></a><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-string">&quot;Error decoding data from column &quot;</span><span>
</span><a name="line-226"></a><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;'&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier">rowErrorColumnName</span><span> </span><a href="#local-6989586621679095017"><span class="hs-identifier hs-var">details</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;': &quot;</span><span>
</span><a name="line-227"></a><span>        </span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679094694"><span class="hs-identifier hs-var">showReason</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">rowErrorReason</span><span> </span><a href="#local-6989586621679095017"><span class="hs-identifier hs-var">details</span></a><span class="hs-special">)</span><span>
</span><a name="line-228"></a><span>        </span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679094695"><span class="hs-identifier hs-var">showPrimaryKey</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">rowErrorPrimaryKeys</span><span> </span><a href="#local-6989586621679095017"><span class="hs-identifier hs-var">details</span></a><span class="hs-special">)</span><span>
</span><a name="line-229"></a><span>        </span><span class="hs-special">]</span><span>
</span><a name="line-230"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#MissingColumn"><span class="hs-identifier hs-var">MissingColumn</span></a><span> </span><a name="local-6989586621679095018"><a href="#local-6989586621679095018"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#showMissingColumnDetails"><span class="hs-identifier hs-var">showMissingColumnDetails</span></a><span> </span><a href="#local-6989586621679095018"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-231"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConversionError"><span class="hs-identifier hs-var">ConversionError</span></a><span> </span><a name="local-6989586621679095019"><a href="#local-6989586621679095019"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-232"></a><span>      </span><span class="hs-identifier">convErrorReason</span><span> </span><a href="#local-6989586621679095019"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-233"></a><span>        </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679094695"><span class="hs-identifier hs-var">showPrimaryKey</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">convErrorPrimaryKeys</span><span> </span><a href="#local-6989586621679095019"><span class="hs-identifier hs-var">details</span></a><span class="hs-special">)</span><span>
</span><a name="line-234"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-235"></a><span>    </span><a name="local-6989586621679094694"><a href="#local-6989586621679094694"><span class="hs-identifier">showReason</span></a></a><span> </span><a name="local-6989586621679094696"><a href="#local-6989586621679094696"><span class="hs-identifier">reason</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-236"></a><span>      </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679094696"><span class="hs-identifier hs-var">reason</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-237"></a><span>        </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#TypeMismatch"><span class="hs-identifier hs-var">TypeMismatch</span></a><span> </span><a name="local-6989586621679094697"><a href="#local-6989586621679094697"><span class="hs-identifier">expected</span></a></a><span> </span><a name="local-6989586621679094698"><a href="#local-6989586621679094698"><span class="hs-identifier">actual</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-238"></a><span>          </span><span class="hs-string">&quot;expected &quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679094697"><span class="hs-identifier hs-var">expected</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot; but got &quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679094698"><span class="hs-identifier hs-var">actual</span></a><span>
</span><a name="line-239"></a><span>        </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#IntegralOutOfBounds"><span class="hs-identifier hs-var">IntegralOutOfBounds</span></a><span> </span><a name="local-6989586621679094699"><a href="#local-6989586621679094699"><span class="hs-identifier">lower</span></a></a><span> </span><a name="local-6989586621679094700"><a href="#local-6989586621679094700"><span class="hs-identifier">upper</span></a></a><span> </span><a name="local-6989586621679094701"><a href="#local-6989586621679094701"><span class="hs-identifier">actual</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-240"></a><span>          </span><span class="hs-string">&quot;expected an integral between &quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094699"><span class="hs-identifier hs-var">lower</span></a><span>
</span><a name="line-241"></a><span>          </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot; and &quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094700"><span class="hs-identifier hs-var">upper</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot; but got &quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094701"><span class="hs-identifier hs-var">actual</span></a><span>
</span><a name="line-242"></a><span>        </span><a href="Database.Orville.PostgreSQL.Internal.SqlType.html#DecodingFailure"><span class="hs-identifier hs-var">DecodingFailure</span></a><span> </span><a name="local-6989586621679094702"><a href="#local-6989586621679094702"><span class="hs-identifier">failure</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679094702"><span class="hs-identifier hs-var">failure</span></a><span>
</span><a name="line-243"></a><span>
</span><a name="line-244"></a><span>    </span><a name="local-6989586621679094695"><a href="#local-6989586621679094695"><span class="hs-identifier">showPrimaryKey</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;&quot;</span><span>
</span><a name="line-245"></a><span>    </span><span class="hs-identifier">showPrimaryKey</span><span> </span><a name="local-6989586621679094703"><a href="#local-6989586621679094703"><span class="hs-identifier">keyValues</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot; (&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679094704"><span class="hs-identifier hs-var">keysStr</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;)&quot;</span><span>
</span><a name="line-246"></a><span>      </span><span class="hs-keyword">where</span><span>
</span><a name="line-247"></a><span>        </span><a name="local-6989586621679094704"><a href="#local-6989586621679094704"><span class="hs-identifier">keysStr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">List.intercalate</span><span> </span><span class="hs-string">&quot;, &quot;</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><a href="#local-6989586621679094705"><span class="hs-identifier hs-var">showKeyValue</span></a><span> </span><a href="#local-6989586621679094703"><span class="hs-identifier hs-var">keyValues</span></a><span>
</span><a name="line-248"></a><span>        </span><a name="local-6989586621679094705"><a href="#local-6989586621679094705"><span class="hs-identifier">showKeyValue</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679094707"><a href="#local-6989586621679094707"><span class="hs-identifier">key</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679094708"><a href="#local-6989586621679094708"><span class="hs-identifier">sqlValue</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679094707"><span class="hs-identifier hs-var">key</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;: &quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679094706"><span class="hs-identifier hs-var">showSqlValue</span></a><span> </span><a href="#local-6989586621679094708"><span class="hs-identifier hs-var">sqlValue</span></a><span>
</span><a name="line-249"></a><span>        </span><span class="hs-comment">-- removes the data constructor prefix</span><span>
</span><a name="line-250"></a><span>        </span><a name="local-6989586621679094706"><a href="#local-6989586621679094706"><span class="hs-identifier">showSqlValue</span></a></a><span> </span><a name="local-6989586621679094709"><a href="#local-6989586621679094709"><span class="hs-identifier">sqlValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">drop</span><span> </span><span class="hs-number">1</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">dropWhile</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">Char.isSpace</span><span class="hs-special">)</span><span>
</span><a name="line-251"></a><span>                              </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094709"><span class="hs-identifier hs-var">sqlValue</span></a><span>
</span><a name="line-252"></a><span>
</span><a name="line-253"></a><span class="hs-identifier">showMissingColumnDetails</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#MissingColumnDetails"><span class="hs-identifier hs-type">MissingColumnDetails</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-254"></a><a name="showMissingColumnDetails"><a href="Database.Orville.PostgreSQL.Internal.Types.html#showMissingColumnDetails"><span class="hs-identifier">showMissingColumnDetails</span></a></a><span> </span><a name="local-6989586621679095020"><a href="#local-6989586621679095020"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-255"></a><span>  </span><span class="hs-identifier hs-var">concat</span><span>
</span><a name="line-256"></a><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-string">&quot;Column &quot;</span><span>
</span><a name="line-257"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;'&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier">missingColumn</span><span> </span><a href="#local-6989586621679095020"><span class="hs-identifier hs-var">details</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;' &quot;</span><span>
</span><a name="line-258"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;not found in result set. Actual Columns: &quot;</span><span>
</span><a name="line-259"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;'&quot;</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-identifier hs-var">List.intercalate</span><span> </span><span class="hs-string">&quot;', '&quot;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">actualColumns</span><span> </span><a href="#local-6989586621679095020"><span class="hs-identifier hs-var">details</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><span class="hs-string">&quot;'&quot;</span><span>
</span><a name="line-260"></a><span>    </span><span class="hs-special">]</span><span>
</span><a name="line-261"></a><span>
</span><a name="line-262"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Exception</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSqlError"><span class="hs-identifier hs-type">FromSqlError</span></a><span>
</span><a name="line-263"></a><span>
</span><a name="line-264"></a><span class="hs-keyword">data</span><span> </span><a name="FromSql"><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier">FromSql</span></a></a><span> </span><a name="local-6989586621679094469"><a href="#local-6989586621679094469"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="FromSql"><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier">FromSql</span></a></a><span>
</span><a name="line-265"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="fromSqlSelects"><a href="Database.Orville.PostgreSQL.Internal.Types.html#fromSqlSelects"><span class="hs-identifier">fromSqlSelects</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Expr.SelectExpr.html#SelectForm"><span class="hs-identifier hs-type">SelectForm</span></a><span class="hs-special">]</span><span>
</span><a name="line-266"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="runFromSql"><a href="Database.Orville.PostgreSQL.Internal.Types.html#runFromSql"><span class="hs-identifier">runFromSql</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">SqlValue</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSqlError"><span class="hs-identifier hs-type">FromSqlError</span></a><span> </span><a href="#local-6989586621679094469"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-267"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-268"></a><span>
</span><a name="line-269"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier hs-type">FromSql</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-270"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679094499"><a href="#local-6989586621679094499"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679094500"><a href="#local-6989586621679094500"><span class="hs-identifier">fA</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679094500"><span class="hs-identifier hs-var">fA</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">runFromSql</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679094501"><a href="#local-6989586621679094501"><span class="hs-identifier">values</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679094499"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-identifier">runFromSql</span><span> </span><a href="#local-6989586621679094500"><span class="hs-identifier hs-var">fA</span></a><span> </span><a href="#local-6989586621679094501"><span class="hs-identifier hs-var">values</span></a><span class="hs-special">}</span><span>
</span><a name="line-271"></a><span>
</span><a name="line-272"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier hs-type">FromSql</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-273"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><a name="local-6989586621679094495"><a href="#local-6989586621679094495"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier hs-var">FromSql</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679094495"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-274"></a><span>  </span><a name="local-6989586621679094496"><a href="#local-6989586621679094496"><span class="hs-identifier">fF</span></a></a><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><a name="local-6989586621679094497"><a href="#local-6989586621679094497"><span class="hs-identifier">fA</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-275"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier hs-var">FromSql</span></a><span>
</span><a name="line-276"></a><span>      </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">fromSqlSelects</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">fromSqlSelects</span><span> </span><a href="#local-6989586621679094496"><span class="hs-identifier hs-var">fF</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier">fromSqlSelects</span><span> </span><a href="#local-6989586621679094497"><span class="hs-identifier hs-var">fA</span></a><span>
</span><a name="line-277"></a><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">runFromSql</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679094498"><a href="#local-6989586621679094498"><span class="hs-identifier">values</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">runFromSql</span><span> </span><a href="#local-6989586621679094496"><span class="hs-identifier hs-var">fF</span></a><span> </span><a href="#local-6989586621679094498"><span class="hs-identifier hs-var">values</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><span class="hs-identifier">runFromSql</span><span> </span><a href="#local-6989586621679094497"><span class="hs-identifier hs-var">fA</span></a><span> </span><a href="#local-6989586621679094498"><span class="hs-identifier hs-var">values</span></a><span>
</span><a name="line-278"></a><span>      </span><span class="hs-special">}</span><span>
</span><a name="line-279"></a><span>
</span><a name="line-280"></a><span class="hs-identifier">getColumn</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.SelectExpr.html#SelectForm"><span class="hs-identifier hs-type">SelectForm</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier hs-type">FromSql</span></a><span> </span><span class="hs-identifier hs-type">SqlValue</span><span>
</span><a name="line-281"></a><a name="getColumn"><a href="Database.Orville.PostgreSQL.Internal.Types.html#getColumn"><span class="hs-identifier">getColumn</span></a></a><span> </span><a name="local-6989586621679095021"><a href="#local-6989586621679095021"><span class="hs-identifier">selectForm</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-282"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier hs-var">FromSql</span></a><span>
</span><a name="line-283"></a><span>    </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">fromSqlSelects</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679095021"><span class="hs-identifier hs-var">selectForm</span></a><span class="hs-special">]</span><span>
</span><a name="line-284"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">runFromSql</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-285"></a><span>        </span><span class="hs-glyph">\</span><a name="local-6989586621679095022"><a href="#local-6989586621679095022"><span class="hs-identifier">values</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-286"></a><span>          </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679095023"><a href="#local-6989586621679095023"><span class="hs-identifier">colName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.NameExpr.html#unescapedName"><span class="hs-identifier hs-var">unescapedName</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.SelectExpr.html#selectFormOutput"><span class="hs-identifier hs-var">selectFormOutput</span></a><span> </span><a href="#local-6989586621679095021"><span class="hs-identifier hs-var">selectForm</span></a><span>
</span><a name="line-287"></a><span>          </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier hs-var">lookup</span><span> </span><a href="#local-6989586621679095023"><span class="hs-identifier hs-var">colName</span></a><span> </span><a href="#local-6989586621679095022"><span class="hs-identifier hs-var">values</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-288"></a><span>            </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679095024"><a href="#local-6989586621679095024"><span class="hs-identifier">sqlValue</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679095024"><span class="hs-identifier hs-var">sqlValue</span></a><span>
</span><a name="line-289"></a><span>            </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-290"></a><span>              </span><span class="hs-identifier hs-var">throwError</span><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-291"></a><span>              </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#MissingColumn"><span class="hs-identifier hs-var">MissingColumn</span></a><span>
</span><a name="line-292"></a><span>                </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#MissingColumnDetails"><span class="hs-identifier hs-var">MissingColumnDetails</span></a><span>
</span><a name="line-293"></a><span>                  </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">missingColumn</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679095023"><span class="hs-identifier hs-var">colName</span></a><span>
</span><a name="line-294"></a><span>                  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">actualColumns</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">fst</span><span> </span><a href="#local-6989586621679095022"><span class="hs-identifier hs-var">values</span></a><span>
</span><a name="line-295"></a><span>                  </span><span class="hs-special">}</span><span>
</span><a name="line-296"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-297"></a><span>
</span><a name="line-298"></a><span class="hs-identifier">joinFromSqlError</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier hs-type">FromSql</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSqlError"><span class="hs-identifier hs-type">FromSqlError</span></a><span> </span><a href="#local-6989586621679094511"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier hs-type">FromSql</span></a><span> </span><a href="#local-6989586621679094511"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-299"></a><a name="joinFromSqlError"><a href="Database.Orville.PostgreSQL.Internal.Types.html#joinFromSqlError"><span class="hs-identifier">joinFromSqlError</span></a></a><span> </span><a name="local-6989586621679095025"><a href="#local-6989586621679095025"><span class="hs-identifier">fE</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-300"></a><span>  </span><a href="#local-6989586621679095025"><span class="hs-identifier hs-var">fE</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">runFromSql</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679095026"><a href="#local-6989586621679095026"><span class="hs-identifier">columns</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">join</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">runFromSql</span><span> </span><a href="#local-6989586621679095025"><span class="hs-identifier hs-var">fE</span></a><span> </span><a href="#local-6989586621679095026"><span class="hs-identifier hs-var">columns</span></a><span class="hs-special">}</span><span>
</span><a name="line-301"></a><span>
</span><a name="line-302"></a><span class="hs-keyword">newtype</span><span> </span><a name="ToSql"><a href="Database.Orville.PostgreSQL.Internal.Types.html#ToSql"><span class="hs-identifier">ToSql</span></a></a><span> </span><a name="local-6989586621679094308"><a href="#local-6989586621679094308"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679094309"><a href="#local-6989586621679094309"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="ToSql"><a href="Database.Orville.PostgreSQL.Internal.Types.html#ToSql"><span class="hs-identifier">ToSql</span></a></a><span>
</span><a name="line-303"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="unToSql"><a href="Database.Orville.PostgreSQL.Internal.Types.html#unToSql"><span class="hs-identifier">unToSql</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">ReaderT</span><span> </span><a href="#local-6989586621679094308"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">State</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">SqlValue</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679094309"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-304"></a><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-type">Functor</span><span>
</span><a name="line-305"></a><span>             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span>
</span><a name="line-306"></a><span>             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Monad</span><span>
</span><a name="line-307"></a><span>             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">MonadState</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">SqlValue</span><span class="hs-special">]</span><span>
</span><a name="line-308"></a><span>             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">MonadReader</span><span> </span><a href="#local-6989586621679094308"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-309"></a><span>             </span><span class="hs-special">)</span><span>
</span><a name="line-310"></a><span>
</span><a name="line-311"></a><span class="hs-identifier">runToSql</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ToSql"><span class="hs-identifier hs-type">ToSql</span></a><span> </span><a href="#local-6989586621679094509"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679094510"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679094509"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">SqlValue</span><span class="hs-special">]</span><span>
</span><a name="line-312"></a><a name="runToSql"><a href="Database.Orville.PostgreSQL.Internal.Types.html#runToSql"><span class="hs-identifier">runToSql</span></a></a><span> </span><a name="local-6989586621679095027"><a href="#local-6989586621679095027"><span class="hs-identifier">tosql</span></a></a><span> </span><a name="local-6989586621679095028"><a href="#local-6989586621679095028"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">reverse</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">execState</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">runReaderT</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">unToSql</span><span> </span><a href="#local-6989586621679095027"><span class="hs-identifier hs-var">tosql</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679095028"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-313"></a><span>
</span><a name="line-314"></a><span class="hs-identifier">getComponent</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679094507"><span class="hs-identifier hs-type">entity</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679094508"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ToSql"><span class="hs-identifier hs-type">ToSql</span></a><span> </span><a href="#local-6989586621679094508"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ToSql"><span class="hs-identifier hs-type">ToSql</span></a><span> </span><a href="#local-6989586621679094507"><span class="hs-identifier hs-type">entity</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-315"></a><a name="getComponent"><a href="Database.Orville.PostgreSQL.Internal.Types.html#getComponent"><span class="hs-identifier">getComponent</span></a></a><span> </span><a name="local-6989586621679095029"><a href="#local-6989586621679095029"><span class="hs-identifier">getComp</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ToSql"><span class="hs-identifier hs-var">ToSql</span></a><span> </span><a name="local-6989586621679095030"><a href="#local-6989586621679095030"><span class="hs-identifier">serializer</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-316"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ToSql"><span class="hs-identifier hs-var">ToSql</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">withReaderT</span><span> </span><a href="#local-6989586621679095029"><span class="hs-identifier hs-var">getComp</span></a><span> </span><a href="#local-6989586621679095030"><span class="hs-identifier hs-var">serializer</span></a><span class="hs-special">)</span><span>
</span><a name="line-317"></a><span>
</span><a name="line-318"></a><span class="hs-comment">{-|
 Migration Guide: 'TableDefinition' can now be imported from
 'Orville.PostgreSQL'. The order of the type parameters has changed from
 @TableDefinition readEnity writeEntity key@ to @TableDefinition key
 writeEntity readEntity@. In the new Orville tables without primary keys are
 supported, so the @key@ parameter must now be instantiated as either @HasKey
 keyType@ or @NoKey@.

 A 'TableDefinition' is the center of the Orville universe. A 'TableDefinition'
 defines the structure of a table in the database and associates it with a Haskell
 datatype, usually a Haskell record type. The 'TableDefinition' must specify how
 the Haskell type is converted to and from the database schema, as as well as
 provide same basic utility functions required by Orville for interacting with
 the Haskell datatype.

  Usually you will use 'TableParams' to construct a 'TableDefinition' in a more
  concise way. This type is provided as an escape hatch for any situations where
  'TableParams' is too restrictive for the sql mapping required by a type.
 -}</span><span>
</span><a name="line-337"></a><span class="hs-keyword">data</span><span> </span><a name="TableDefinition"><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableDefinition"><span class="hs-identifier">TableDefinition</span></a></a><span> </span><a name="local-6989586621679094305"><a href="#local-6989586621679094305"><span class="hs-identifier">readEntity</span></a></a><span> </span><a name="local-6989586621679094306"><a href="#local-6989586621679094306"><span class="hs-identifier">writeEntity</span></a></a><span> </span><a name="local-6989586621679094307"><a href="#local-6989586621679094307"><span class="hs-identifier">key</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="TableDefinition"><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableDefinition"><span class="hs-identifier">TableDefinition</span></a></a><span>
</span><a name="line-338"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="tableName"><a href="Database.Orville.PostgreSQL.Internal.Types.html#tableName"><span class="hs-identifier">tableName</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-339"></a><span>      </span><span class="hs-comment">-- ^ The name of the table in the database.</span><span>
</span><a name="line-340"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tableFields"><a href="Database.Orville.PostgreSQL.Internal.Types.html#tableFields"><span class="hs-identifier">tableFields</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#SomeField"><span class="hs-identifier hs-type">SomeField</span></a><span class="hs-special">]</span><span>
</span><a name="line-341"></a><span>      </span><span class="hs-comment">-- ^ A list of field definitions defining the table structure</span><span>
</span><a name="line-342"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tableSafeToDelete"><a href="Database.Orville.PostgreSQL.Internal.Types.html#tableSafeToDelete"><span class="hs-identifier">tableSafeToDelete</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span>
</span><a name="line-343"></a><span>      </span><span class="hs-comment">-- ^ A list of any columns that may be deleted from the table by Orville.</span><span>
</span><a name="line-344"></a><span>      </span><span class="hs-comment">-- (Orville will never delete a column without being told it is safe)</span><span>
</span><a name="line-345"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tablePrimaryKey"><a href="Database.Orville.PostgreSQL.Internal.Types.html#tablePrimaryKey"><span class="hs-identifier">tablePrimaryKey</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#PrimaryKey"><span class="hs-identifier hs-type">PrimaryKey</span></a><span> </span><a href="#local-6989586621679094307"><span class="hs-identifier hs-type">key</span></a><span>
</span><a name="line-346"></a><span>      </span><span class="hs-comment">-- ^ The statically typed field definition that is the primary key. Currently</span><span>
</span><a name="line-347"></a><span>      </span><span class="hs-comment">-- this field must still by listed in `tableFields`</span><span>
</span><a name="line-348"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tableFromSql"><a href="Database.Orville.PostgreSQL.Internal.Types.html#tableFromSql"><span class="hs-identifier">tableFromSql</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier hs-type">FromSql</span></a><span> </span><a href="#local-6989586621679094305"><span class="hs-identifier hs-type">readEntity</span></a><span>
</span><a name="line-349"></a><span>      </span><span class="hs-comment">-- ^ A definition of how to convert the haskell type from a sql row</span><span>
</span><a name="line-350"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tableToSql"><a href="Database.Orville.PostgreSQL.Internal.Types.html#tableToSql"><span class="hs-identifier">tableToSql</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ToSql"><span class="hs-identifier hs-type">ToSql</span></a><span> </span><a href="#local-6989586621679094306"><span class="hs-identifier hs-type">writeEntity</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-351"></a><span>      </span><span class="hs-comment">-- ^ A function to set the key on the entity</span><span>
</span><a name="line-352"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tableGetKey"><a href="Database.Orville.PostgreSQL.Internal.Types.html#tableGetKey"><span class="hs-identifier">tableGetKey</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679094305"><span class="hs-identifier hs-type">readEntity</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679094307"><span class="hs-identifier hs-type">key</span></a><span>
</span><a name="line-353"></a><span>      </span><span class="hs-comment">-- ^ A function to get the key on the entity</span><span>
</span><a name="line-354"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tableComments"><a href="Database.Orville.PostgreSQL.Internal.Types.html#tableComments"><span class="hs-identifier">tableComments</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComments"><span class="hs-identifier hs-type">TableComments</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-355"></a><span>      </span><span class="hs-comment">-- ^ Any comments that might be interesting for developers to see. These</span><span>
</span><a name="line-356"></a><span>      </span><span class="hs-comment">-- comments will get printed in the log if there is an erro while attempting</span><span>
</span><a name="line-357"></a><span>      </span><span class="hs-comment">-- to migrate the table.</span><span>
</span><a name="line-358"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-359"></a><span>
</span><a name="line-360"></a><span class="hs-keyword">data</span><span> </span><a name="PrimaryKey"><a href="Database.Orville.PostgreSQL.Internal.Types.html#PrimaryKey"><span class="hs-identifier">PrimaryKey</span></a></a><span> </span><a name="local-6989586621679094304"><a href="#local-6989586621679094304"><span class="hs-identifier">key</span></a></a><span>
</span><a name="line-361"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="PrimaryKey"><a href="Database.Orville.PostgreSQL.Internal.Types.html#PrimaryKey"><span class="hs-identifier">PrimaryKey</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#PrimaryKeyPart"><span class="hs-identifier hs-type">PrimaryKeyPart</span></a><span> </span><a href="#local-6989586621679094304"><span class="hs-identifier hs-type">key</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#PrimaryKeyPart"><span class="hs-identifier hs-type">PrimaryKeyPart</span></a><span> </span><a href="#local-6989586621679094304"><span class="hs-identifier hs-type">key</span></a><span class="hs-special">]</span><span>
</span><a name="line-362"></a><span>
</span><a name="line-363"></a><span class="hs-keyword">data</span><span> </span><a name="PrimaryKeyPart"><a href="Database.Orville.PostgreSQL.Internal.Types.html#PrimaryKeyPart"><span class="hs-identifier">PrimaryKeyPart</span></a></a><span> </span><a name="local-6989586621679094302"><a href="#local-6989586621679094302"><span class="hs-identifier">key</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-364"></a><span>  </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679094303"><a href="#local-6989586621679094303"><span class="hs-identifier">part</span></a></a><span class="hs-operator">.</span><span> </span><a name="PrimaryKeyPart"><a href="Database.Orville.PostgreSQL.Internal.Types.html#PrimaryKeyPart"><span class="hs-identifier">PrimaryKeyPart</span></a></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679094302"><span class="hs-identifier hs-type">key</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679094303"><span class="hs-identifier hs-type">part</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNull"><span class="hs-identifier hs-type">NotNull</span></a><span> </span><a href="#local-6989586621679094303"><span class="hs-identifier hs-type">part</span></a><span class="hs-special">)</span><span>
</span><a name="line-365"></a><span>
</span><a name="line-366"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#QueryKeyable"><span class="hs-identifier hs-type">QueryKeyable</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition</span></a><span> </span><a href="#local-6989586621679094492"><span class="hs-identifier hs-type">readEntity</span></a><span> </span><a href="#local-6989586621679094493"><span class="hs-identifier hs-type">writeEntity</span></a><span> </span><a href="#local-6989586621679094494"><span class="hs-identifier hs-type">key</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-367"></a><span>  </span><a name="local-8214565720323859234"><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#queryKey"><span class="hs-identifier">queryKey</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#QKTable"><span class="hs-identifier hs-var">QKTable</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">tableName</span><span>
</span><a name="line-368"></a><span>
</span><a name="line-369"></a><span class="hs-comment">{- |
  Migration Guide: @SchemaItem@ retains the same name. The @Index@,
  @DropIndex@, @Constraint@ and @DropConstraint@ constructors have been
  removed. These items are now added to the @TableDefinition@ via
  @addTableConstraints@ and @addTableIndexes@. The remaining constructors have
  been prefixed with the word @Schema@ (e.g. @Table@ has been renamed to
  @SchemaTable@). There is no explicit replacement for @DropIndex@ and
  @DropConstraint@. Orville will automatically drop indexes and constraints
  that are no longer mentioned on the @TableDefinition@ for any tables that it
  migrates.
-}</span><span>
</span><a name="line-380"></a><span class="hs-keyword">data</span><span> </span><a name="SchemaItem"><a href="Database.Orville.PostgreSQL.Internal.Types.html#SchemaItem"><span class="hs-identifier">SchemaItem</span></a></a><span>
</span><a name="line-381"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679094299"><a href="#local-6989586621679094299"><span class="hs-identifier">readEntity</span></a></a><span> </span><a name="local-6989586621679094300"><a href="#local-6989586621679094300"><span class="hs-identifier">writeEntity</span></a></a><span> </span><a name="local-6989586621679094301"><a href="#local-6989586621679094301"><span class="hs-identifier">key</span></a></a><span class="hs-operator">.</span><span> </span><a name="Table"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Table"><span class="hs-identifier">Table</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition</span></a><span> </span><a href="#local-6989586621679094299"><span class="hs-identifier hs-type">readEntity</span></a><span> </span><a href="#local-6989586621679094300"><span class="hs-identifier hs-type">writeEntity</span></a><span> </span><a href="#local-6989586621679094301"><span class="hs-identifier hs-type">key</span></a><span class="hs-special">)</span><span>
</span><a name="line-382"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="DropTable"><a href="Database.Orville.PostgreSQL.Internal.Types.html#DropTable"><span class="hs-identifier">DropTable</span></a></a><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-383"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Index"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Index"><span class="hs-identifier">Index</span></a></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#IndexDefinition"><span class="hs-identifier hs-type">IndexDefinition</span></a><span>
</span><a name="line-384"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="DropIndex"><a href="Database.Orville.PostgreSQL.Internal.Types.html#DropIndex"><span class="hs-identifier">DropIndex</span></a></a><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-385"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Constraint"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Constraint"><span class="hs-identifier">Constraint</span></a></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConstraintDefinition"><span class="hs-identifier hs-type">ConstraintDefinition</span></a><span>
</span><a name="line-386"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="DropConstraint"><a href="Database.Orville.PostgreSQL.Internal.Types.html#DropConstraint"><span class="hs-identifier">DropConstraint</span></a></a><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-387"></a><span>                   </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-388"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Sequence"><a href="Database.Orville.PostgreSQL.Internal.Types.html#Sequence"><span class="hs-identifier">Sequence</span></a></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#SequenceDefinition"><span class="hs-identifier hs-type">SequenceDefinition</span></a><span>
</span><a name="line-389"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="DropSequence"><a href="Database.Orville.PostgreSQL.Internal.Types.html#DropSequence"><span class="hs-identifier">DropSequence</span></a></a><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-390"></a><span>
</span><a name="line-391"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#SchemaItem"><span class="hs-identifier hs-type">SchemaItem</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-392"></a><span>  </span><a name="local-8214565720323790323"><span class="hs-identifier">show</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Table"><span class="hs-identifier hs-var">Table</span></a><span> </span><a name="local-6989586621679094483"><a href="#local-6989586621679094483"><span class="hs-identifier">tableDef</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;Table &lt;&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier">tableName</span><span> </span><a href="#local-6989586621679094483"><span class="hs-identifier hs-var">tableDef</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot; definition&gt;&quot;</span><span>
</span><a name="line-393"></a><span>  </span><span class="hs-identifier">show</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#DropTable"><span class="hs-identifier hs-var">DropTable</span></a><span> </span><a name="local-6989586621679094484"><a href="#local-6989586621679094484"><span class="hs-identifier">name</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;DropTable &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094484"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-394"></a><span>  </span><span class="hs-identifier">show</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Index"><span class="hs-identifier hs-var">Index</span></a><span> </span><a name="local-6989586621679094485"><a href="#local-6989586621679094485"><span class="hs-identifier">indexDef</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;Index (&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094485"><span class="hs-identifier hs-var">indexDef</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;)&quot;</span><span>
</span><a name="line-395"></a><span>  </span><span class="hs-identifier">show</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#DropIndex"><span class="hs-identifier hs-var">DropIndex</span></a><span> </span><a name="local-6989586621679094486"><a href="#local-6989586621679094486"><span class="hs-identifier">name</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;DropIndex &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094486"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-396"></a><span>  </span><span class="hs-identifier">show</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Constraint"><span class="hs-identifier hs-var">Constraint</span></a><span> </span><a name="local-6989586621679094487"><a href="#local-6989586621679094487"><span class="hs-identifier">cons</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;Constraint (&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094487"><span class="hs-identifier hs-var">cons</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;)&quot;</span><span>
</span><a name="line-397"></a><span>  </span><span class="hs-identifier">show</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#DropConstraint"><span class="hs-identifier hs-var">DropConstraint</span></a><span> </span><a name="local-6989586621679094488"><a href="#local-6989586621679094488"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-6989586621679094489"><a href="#local-6989586621679094489"><span class="hs-identifier">table</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-398"></a><span>    </span><span class="hs-string">&quot;DropConstraint &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094488"><span class="hs-identifier hs-var">name</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094489"><span class="hs-identifier hs-var">table</span></a><span>
</span><a name="line-399"></a><span>  </span><span class="hs-identifier">show</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Sequence"><span class="hs-identifier hs-var">Sequence</span></a><span> </span><a name="local-6989586621679094490"><a href="#local-6989586621679094490"><span class="hs-identifier">name</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;Sequence &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094490"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-400"></a><span>  </span><span class="hs-identifier">show</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#DropSequence"><span class="hs-identifier hs-var">DropSequence</span></a><span> </span><a name="local-6989586621679094491"><a href="#local-6989586621679094491"><span class="hs-identifier">name</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;DropSequence &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679094491"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-401"></a><span>
</span><a name="line-402"></a><span class="hs-comment">{- |
  Migration Guide: @SchemaDefinition@ has been removed. Use @[SchemaItem]@
  instead.
-}</span><span>
</span><a name="line-406"></a><span class="hs-keyword">type</span><span> </span><a name="SchemaDefinition"><a href="Database.Orville.PostgreSQL.Internal.Types.html#SchemaDefinition"><span class="hs-identifier">SchemaDefinition</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#SchemaItem"><span class="hs-identifier hs-type">SchemaItem</span></a><span class="hs-special">]</span><span>
</span><a name="line-407"></a><span>
</span><a name="line-408"></a><span class="hs-keyword">data</span><span> </span><a name="IndexDefinition"><a href="Database.Orville.PostgreSQL.Internal.Types.html#IndexDefinition"><span class="hs-identifier">IndexDefinition</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="IndexDefinition"><a href="Database.Orville.PostgreSQL.Internal.Types.html#IndexDefinition"><span class="hs-identifier">IndexDefinition</span></a></a><span>
</span><a name="line-409"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="indexName"><a href="Database.Orville.PostgreSQL.Internal.Types.html#indexName"><span class="hs-identifier">indexName</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-410"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="indexUnique"><a href="Database.Orville.PostgreSQL.Internal.Types.html#indexUnique"><span class="hs-identifier">indexUnique</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-411"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="indexTable"><a href="Database.Orville.PostgreSQL.Internal.Types.html#indexTable"><span class="hs-identifier">indexTable</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-412"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="indexBody"><a href="Database.Orville.PostgreSQL.Internal.Types.html#indexBody"><span class="hs-identifier">indexBody</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-413"></a><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-414"></a><span>
</span><a name="line-415"></a><span class="hs-keyword">data</span><span> </span><a name="ConstraintDefinition"><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConstraintDefinition"><span class="hs-identifier">ConstraintDefinition</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="ConstraintDefinition"><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConstraintDefinition"><span class="hs-identifier">ConstraintDefinition</span></a></a><span>
</span><a name="line-416"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="constraintName"><a href="Database.Orville.PostgreSQL.Internal.Types.html#constraintName"><span class="hs-identifier">constraintName</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-417"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="constraintTable"><a href="Database.Orville.PostgreSQL.Internal.Types.html#constraintTable"><span class="hs-identifier">constraintTable</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-418"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="constraintBody"><a href="Database.Orville.PostgreSQL.Internal.Types.html#constraintBody"><span class="hs-identifier">constraintBody</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-419"></a><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-420"></a><span>
</span><a name="line-421"></a><span class="hs-keyword">data</span><span> </span><a name="SequenceDefinition"><a href="Database.Orville.PostgreSQL.Internal.Types.html#SequenceDefinition"><span class="hs-identifier">SequenceDefinition</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="SequenceDefinition"><a href="Database.Orville.PostgreSQL.Internal.Types.html#SequenceDefinition"><span class="hs-identifier">SequenceDefinition</span></a></a><span>
</span><a name="line-422"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="sequenceName"><a href="Database.Orville.PostgreSQL.Internal.Types.html#sequenceName"><span class="hs-identifier">sequenceName</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-423"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="sequenceIncrement"><a href="Database.Orville.PostgreSQL.Internal.Types.html#sequenceIncrement"><span class="hs-identifier">sequenceIncrement</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-424"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="sequenceMinValue"><a href="Database.Orville.PostgreSQL.Internal.Types.html#sequenceMinValue"><span class="hs-identifier">sequenceMinValue</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-425"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="sequenceMaxValue"><a href="Database.Orville.PostgreSQL.Internal.Types.html#sequenceMaxValue"><span class="hs-identifier">sequenceMaxValue</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-426"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="sequenceStart"><a href="Database.Orville.PostgreSQL.Internal.Types.html#sequenceStart"><span class="hs-identifier">sequenceStart</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-427"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="sequenceCache"><a href="Database.Orville.PostgreSQL.Internal.Types.html#sequenceCache"><span class="hs-identifier">sequenceCache</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-428"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="sequenceCycle"><a href="Database.Orville.PostgreSQL.Internal.Types.html#sequenceCycle"><span class="hs-identifier">sequenceCycle</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-429"></a><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-430"></a></pre></body></html>