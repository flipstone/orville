<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-|
Module    : Database.Orville.PostgreSQL.Internal.Where
Copyright : Flipstone Technology Partners 2016-2018
License   : MIT
-}</span><span>
</span><a name="line-6"></a><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><a name="line-7"></a><span class="hs-pragma">{-# LANGUAGE ExistentialQuantification #-}</span><span>
</span><a name="line-8"></a><span>
</span><a name="line-9"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.Where</span><span>
</span><a name="line-10"></a><span>  </span><span class="hs-special">(</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-11"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3D%3D"><span class="hs-operator hs-var">.==</span></a><span class="hs-special">)</span><span>
</span><a name="line-12"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3C%3E"><span class="hs-operator hs-var">.&lt;&gt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-13"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3E"><span class="hs-operator hs-var">.&gt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-14"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3E%3D"><span class="hs-operator hs-var">.&gt;=</span></a><span class="hs-special">)</span><span>
</span><a name="line-15"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3C"><span class="hs-operator hs-var">.&lt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-16"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3C%3D"><span class="hs-operator hs-var">.&lt;=</span></a><span class="hs-special">)</span><span>
</span><a name="line-17"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3C-"><span class="hs-operator hs-var">.&lt;-</span></a><span class="hs-special">)</span><span>
</span><a name="line-18"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#%25%3D%3D"><span class="hs-operator hs-var">%==</span></a><span class="hs-special">)</span><span>
</span><a name="line-19"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereConditionValues"><span class="hs-identifier hs-var">whereConditionValues</span></a><span>
</span><a name="line-20"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereAnd"><span class="hs-identifier hs-var">whereAnd</span></a><span>
</span><a name="line-21"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereOr"><span class="hs-identifier hs-var">whereOr</span></a><span>
</span><a name="line-22"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereIn"><span class="hs-identifier hs-var">whereIn</span></a><span>
</span><a name="line-23"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereLike"><span class="hs-identifier hs-var">whereLike</span></a><span>
</span><a name="line-24"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereLikeInsensitive"><span class="hs-identifier hs-var">whereLikeInsensitive</span></a><span>
</span><a name="line-25"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereNotIn"><span class="hs-identifier hs-var">whereNotIn</span></a><span>
</span><a name="line-26"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereQualified"><span class="hs-identifier hs-var">whereQualified</span></a><span>
</span><a name="line-27"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereRaw"><span class="hs-identifier hs-var">whereRaw</span></a><span>
</span><a name="line-28"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#isNull"><span class="hs-identifier hs-var">isNull</span></a><span>
</span><a name="line-29"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#isNotNull"><span class="hs-identifier hs-var">isNotNull</span></a><span>
</span><a name="line-30"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereClause"><span class="hs-identifier hs-var">whereClause</span></a><span>
</span><a name="line-31"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereValues"><span class="hs-identifier hs-var">whereValues</span></a><span>
</span><a name="line-32"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereToSql"><span class="hs-identifier hs-var">whereToSql</span></a><span>
</span><a name="line-33"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-34"></a><span>
</span><a name="line-35"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.List</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">List</span><span>
</span><a name="line-36"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Database.HDBC</span><span>
</span><a name="line-37"></a><span>
</span><a name="line-38"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.Expr</span></a><span>
</span><a name="line-39"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.Expr.WhereExpr</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">E</span><span>
</span><a name="line-40"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.FieldDefinition</span></a><span>
</span><a name="line-41"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.QueryKey</span></a><span>
</span><a name="line-42"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.Types</span></a><span>
</span><a name="line-43"></a><span>
</span><a name="line-44"></a><span class="hs-comment">{-
  Migration Guide: @WhereCondition@ has been replaced with @BooleanExpr@

  It would be nice to match the SqlValues in these with the types from the
  corresponding FieldDefinitions. However, this would require adding an
  Eq constraint for List.nub on the .&lt;- operation, which I'm not willing
  to do at this moment.

  Alternately, we could eliminate storing the entire FieldDefinition here,
  thereby removing the need for ExistentialQuantification. Currently the
  field definition is being used in the QueryKeyable instances for WhereCondition
  for calls to qkOp an friends. Replacing FieldDefinition with just the field
  name here would be nice. We would probably want a fully-fledged FieldName
  type whech could provide the appropriate QueryKeyable instance. That then
  raises questions about the ergonomics users creating FieldDefinition values
  without requiring OverloadedStrings to be turned on.
-}</span><span>
</span><a name="line-61"></a><span class="hs-keyword">data</span><span> </span><a name="WhereCondition"><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier">WhereCondition</span></a></a><span>
</span><a name="line-62"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="WhereConditionExpr"><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier">WhereConditionExpr</span></a></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#WhereExpr"><span class="hs-identifier hs-type">E.WhereExpr</span></a><span>
</span><a name="line-63"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Or"><a href="Database.Orville.PostgreSQL.Internal.Where.html#Or"><span class="hs-identifier">Or</span></a></a><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span class="hs-special">]</span><span>
</span><a name="line-64"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="And"><a href="Database.Orville.PostgreSQL.Internal.Where.html#And"><span class="hs-identifier">And</span></a></a><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span class="hs-special">]</span><span>
</span><a name="line-65"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679108501"><a href="#local-6989586621679108501"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679108502"><a href="#local-6989586621679108502"><span class="hs-identifier">b</span></a></a><span> </span><a name="local-6989586621679108503"><a href="#local-6989586621679108503"><span class="hs-identifier">c</span></a></a><span class="hs-operator">.</span><span> </span><a name="Qualified"><a href="Database.Orville.PostgreSQL.Internal.Where.html#Qualified"><span class="hs-identifier">Qualified</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition</span></a><span> </span><a href="#local-6989586621679108501"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679108502"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679108503"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span>
</span><a name="line-66"></a><span>                            </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-67"></a><span>
</span><a name="line-68"></a><span class="hs-keyword">instance</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#QueryKeyable"><span class="hs-identifier hs-type">QueryKeyable</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-69"></a><span>  </span><a name="local-8214565720323859234"><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#queryKey"><span class="hs-identifier">queryKey</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#Expr"><span class="hs-identifier hs-var">Expr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Right</span><span> </span><a name="local-6989586621679108504"><a href="#local-6989586621679108504"><span class="hs-identifier">form</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#queryKey"><span class="hs-identifier hs-var">queryKey</span></a><span> </span><a href="#local-6989586621679108504"><span class="hs-identifier hs-var">form</span></a><span>
</span><a name="line-70"></a><span>  </span><span class="hs-identifier">queryKey</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#Expr"><span class="hs-identifier hs-var">Expr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Left</span><span> </span><a name="local-6989586621679108505"><a href="#local-6989586621679108505"><span class="hs-identifier">raw</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#QKField"><span class="hs-identifier hs-var">QKField</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#rawExprToSql"><span class="hs-identifier hs-var">rawExprToSql</span></a><span> </span><a href="#local-6989586621679108505"><span class="hs-identifier hs-var">raw</span></a><span>
</span><a name="line-71"></a><span>  </span><span class="hs-identifier">queryKey</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#Or"><span class="hs-identifier hs-var">Or</span></a><span> </span><a name="local-6989586621679108506"><a href="#local-6989586621679108506"><span class="hs-identifier">conds</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#qkOp"><span class="hs-identifier hs-var">qkOp</span></a><span> </span><span class="hs-string">&quot;OR&quot;</span><span> </span><a href="#local-6989586621679108506"><span class="hs-identifier hs-var">conds</span></a><span>
</span><a name="line-72"></a><span>  </span><span class="hs-identifier">queryKey</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#And"><span class="hs-identifier hs-var">And</span></a><span> </span><a name="local-6989586621679108507"><a href="#local-6989586621679108507"><span class="hs-identifier">conds</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#qkOp"><span class="hs-identifier hs-var">qkOp</span></a><span> </span><span class="hs-string">&quot;And&quot;</span><span> </span><a href="#local-6989586621679108507"><span class="hs-identifier hs-var">conds</span></a><span>
</span><a name="line-73"></a><span>  </span><span class="hs-identifier">queryKey</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#Qualified"><span class="hs-identifier hs-var">Qualified</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679108508"><a href="#local-6989586621679108508"><span class="hs-identifier">cond</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.QueryKey.html#queryKey"><span class="hs-identifier hs-var">queryKey</span></a><span> </span><a href="#local-6989586621679108508"><span class="hs-identifier hs-var">cond</span></a><span>
</span><a name="line-74"></a><span>
</span><a name="line-75"></a><span class="hs-special">(</span><span class="hs-operator">.==</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108539"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108540"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679108540"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-76"></a><a name="local-6989586621679108541"><a href="#local-6989586621679108541"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name=".%3D%3D"><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3D%3D"><span class="hs-operator">.==</span></a></a><span> </span><a name="local-6989586621679108542"><a href="#local-6989586621679108542"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679108543"><span class="hs-identifier hs-var">nameForm</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#.%3D%3D"><span class="hs-operator hs-var">E..==</span></a><span> </span><a href="#local-6989586621679108544"><span class="hs-identifier hs-var">sqlValue</span></a><span>
</span><a name="line-77"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-78"></a><span>    </span><a name="local-6989586621679108543"><a href="#local-6989586621679108543"><span class="hs-identifier">nameForm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span> </span><a href="#local-6989586621679108541"><span class="hs-identifier hs-var">fieldDef</span></a><span>
</span><a name="line-79"></a><span>    </span><a name="local-6989586621679108544"><a href="#local-6989586621679108544"><span class="hs-identifier">sqlValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToSqlValue"><span class="hs-identifier hs-var">fieldToSqlValue</span></a><span> </span><a href="#local-6989586621679108541"><span class="hs-identifier hs-var">fieldDef</span></a><span> </span><a href="#local-6989586621679108542"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-80"></a><span>
</span><a name="line-81"></a><span class="hs-special">(</span><span class="hs-operator">.&lt;&gt;</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108537"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108538"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679108538"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-82"></a><a name="local-6989586621679108545"><a href="#local-6989586621679108545"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name=".%3C%3E"><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3C%3E"><span class="hs-operator">.&lt;&gt;</span></a></a><span> </span><a name="local-6989586621679108546"><a href="#local-6989586621679108546"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679108547"><span class="hs-identifier hs-var">nameForm</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#.%3C%3E"><span class="hs-operator hs-var">E..&lt;&gt;</span></a><span> </span><a href="#local-6989586621679108548"><span class="hs-identifier hs-var">sqlValue</span></a><span>
</span><a name="line-83"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-84"></a><span>    </span><a name="local-6989586621679108547"><a href="#local-6989586621679108547"><span class="hs-identifier">nameForm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span> </span><a href="#local-6989586621679108545"><span class="hs-identifier hs-var">fieldDef</span></a><span>
</span><a name="line-85"></a><span>    </span><a name="local-6989586621679108548"><a href="#local-6989586621679108548"><span class="hs-identifier">sqlValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToSqlValue"><span class="hs-identifier hs-var">fieldToSqlValue</span></a><span> </span><a href="#local-6989586621679108545"><span class="hs-identifier hs-var">fieldDef</span></a><span> </span><a href="#local-6989586621679108546"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-86"></a><span>
</span><a name="line-87"></a><span class="hs-special">(</span><span class="hs-operator">.&gt;</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108535"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108536"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679108536"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-88"></a><a name="local-6989586621679108549"><a href="#local-6989586621679108549"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name=".%3E"><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3E"><span class="hs-operator">.&gt;</span></a></a><span> </span><a name="local-6989586621679108550"><a href="#local-6989586621679108550"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679108551"><span class="hs-identifier hs-var">nameForm</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#.%3E"><span class="hs-operator hs-var">E..&gt;</span></a><span> </span><a href="#local-6989586621679108552"><span class="hs-identifier hs-var">sqlValue</span></a><span>
</span><a name="line-89"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-90"></a><span>    </span><a name="local-6989586621679108551"><a href="#local-6989586621679108551"><span class="hs-identifier">nameForm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span> </span><a href="#local-6989586621679108549"><span class="hs-identifier hs-var">fieldDef</span></a><span>
</span><a name="line-91"></a><span>    </span><a name="local-6989586621679108552"><a href="#local-6989586621679108552"><span class="hs-identifier">sqlValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToSqlValue"><span class="hs-identifier hs-var">fieldToSqlValue</span></a><span> </span><a href="#local-6989586621679108549"><span class="hs-identifier hs-var">fieldDef</span></a><span> </span><a href="#local-6989586621679108550"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-92"></a><span>
</span><a name="line-93"></a><span class="hs-special">(</span><span class="hs-operator">.&gt;=</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108533"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108534"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679108534"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-94"></a><a name="local-6989586621679108553"><a href="#local-6989586621679108553"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name=".%3E%3D"><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3E%3D"><span class="hs-operator">.&gt;=</span></a></a><span> </span><a name="local-6989586621679108554"><a href="#local-6989586621679108554"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679108555"><span class="hs-identifier hs-var">nameForm</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#.%3E%3D"><span class="hs-operator hs-var">E..&gt;=</span></a><span> </span><a href="#local-6989586621679108556"><span class="hs-identifier hs-var">sqlValue</span></a><span>
</span><a name="line-95"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-96"></a><span>    </span><a name="local-6989586621679108555"><a href="#local-6989586621679108555"><span class="hs-identifier">nameForm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span> </span><a href="#local-6989586621679108553"><span class="hs-identifier hs-var">fieldDef</span></a><span>
</span><a name="line-97"></a><span>    </span><a name="local-6989586621679108556"><a href="#local-6989586621679108556"><span class="hs-identifier">sqlValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToSqlValue"><span class="hs-identifier hs-var">fieldToSqlValue</span></a><span> </span><a href="#local-6989586621679108553"><span class="hs-identifier hs-var">fieldDef</span></a><span> </span><a href="#local-6989586621679108554"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-98"></a><span>
</span><a name="line-99"></a><span class="hs-special">(</span><span class="hs-operator">.&lt;</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108531"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108532"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679108532"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-100"></a><a name="local-6989586621679108557"><a href="#local-6989586621679108557"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name=".%3C"><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3C"><span class="hs-operator">.&lt;</span></a></a><span> </span><a name="local-6989586621679108558"><a href="#local-6989586621679108558"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679108559"><span class="hs-identifier hs-var">nameForm</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#.%3C"><span class="hs-operator hs-var">E..&lt;</span></a><span> </span><a href="#local-6989586621679108560"><span class="hs-identifier hs-var">sqlValue</span></a><span>
</span><a name="line-101"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-102"></a><span>    </span><a name="local-6989586621679108559"><a href="#local-6989586621679108559"><span class="hs-identifier">nameForm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span> </span><a href="#local-6989586621679108557"><span class="hs-identifier hs-var">fieldDef</span></a><span>
</span><a name="line-103"></a><span>    </span><a name="local-6989586621679108560"><a href="#local-6989586621679108560"><span class="hs-identifier">sqlValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToSqlValue"><span class="hs-identifier hs-var">fieldToSqlValue</span></a><span> </span><a href="#local-6989586621679108557"><span class="hs-identifier hs-var">fieldDef</span></a><span> </span><a href="#local-6989586621679108558"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-104"></a><span>
</span><a name="line-105"></a><span class="hs-special">(</span><span class="hs-operator">.&lt;=</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108529"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108530"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679108530"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-106"></a><a name="local-6989586621679108561"><a href="#local-6989586621679108561"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name=".%3C%3D"><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3C%3D"><span class="hs-operator">.&lt;=</span></a></a><span> </span><a name="local-6989586621679108562"><a href="#local-6989586621679108562"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679108563"><span class="hs-identifier hs-var">nameForm</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#.%3C%3D"><span class="hs-operator hs-var">E..&lt;=</span></a><span> </span><a href="#local-6989586621679108564"><span class="hs-identifier hs-var">sqlValue</span></a><span>
</span><a name="line-107"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-108"></a><span>    </span><a name="local-6989586621679108563"><a href="#local-6989586621679108563"><span class="hs-identifier">nameForm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span> </span><a href="#local-6989586621679108561"><span class="hs-identifier hs-var">fieldDef</span></a><span>
</span><a name="line-109"></a><span>    </span><a name="local-6989586621679108564"><a href="#local-6989586621679108564"><span class="hs-identifier">sqlValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToSqlValue"><span class="hs-identifier hs-var">fieldToSqlValue</span></a><span> </span><a href="#local-6989586621679108561"><span class="hs-identifier hs-var">fieldDef</span></a><span> </span><a href="#local-6989586621679108562"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-110"></a><span>
</span><a name="line-111"></a><span class="hs-special">(</span><span class="hs-operator">.&lt;-</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108527"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108528"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679108528"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-112"></a><a name="local-6989586621679108565"><a href="#local-6989586621679108565"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name=".%3C-"><a href="Database.Orville.PostgreSQL.Internal.Where.html#.%3C-"><span class="hs-operator">.&lt;-</span></a></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereIn"><span class="hs-identifier hs-var">whereIn</span></a><span> </span><a href="#local-6989586621679108565"><span class="hs-identifier hs-var">fieldDef</span></a><span> </span><span class="hs-keyword">as</span><span>
</span><a name="line-113"></a><span>
</span><a name="line-114"></a><span class="hs-special">(</span><span class="hs-operator">%==</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108525"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108526"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679108526"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-115"></a><a name="local-6989586621679108567"><a href="#local-6989586621679108567"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name="%25%3D%3D"><a href="Database.Orville.PostgreSQL.Internal.Where.html#%25%3D%3D"><span class="hs-operator">%==</span></a></a><span> </span><a name="local-6989586621679108568"><a href="#local-6989586621679108568"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679108569"><span class="hs-identifier hs-var">nameForm</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#%25%3D%3D"><span class="hs-operator hs-var">E.%==</span></a><span> </span><a href="#local-6989586621679108570"><span class="hs-identifier hs-var">sqlValue</span></a><span>
</span><a name="line-116"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-117"></a><span>    </span><a name="local-6989586621679108569"><a href="#local-6989586621679108569"><span class="hs-identifier">nameForm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span> </span><a href="#local-6989586621679108567"><span class="hs-identifier hs-var">fieldDef</span></a><span>
</span><a name="line-118"></a><span>    </span><a name="local-6989586621679108570"><a href="#local-6989586621679108570"><span class="hs-identifier">sqlValue</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToSqlValue"><span class="hs-identifier hs-var">fieldToSqlValue</span></a><span> </span><a href="#local-6989586621679108567"><span class="hs-identifier hs-var">fieldDef</span></a><span> </span><a href="#local-6989586621679108568"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-119"></a><span>
</span><a name="line-120"></a><span class="hs-identifier">whereConditionSql</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-121"></a><a name="whereConditionSql"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereConditionSql"><span class="hs-identifier">whereConditionSql</span></a></a><span> </span><a name="local-6989586621679108571"><a href="#local-6989586621679108571"><span class="hs-identifier">cond</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#internalWhereConditionSql"><span class="hs-identifier hs-var">internalWhereConditionSql</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><a href="#local-6989586621679108571"><span class="hs-identifier hs-var">cond</span></a><span>
</span><a name="line-122"></a><span>
</span><a name="line-123"></a><span class="hs-identifier">internalWhereConditionSql</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-124"></a><span>     </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition</span></a><span> </span><a href="#local-6989586621679108522"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679108523"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679108524"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-125"></a><a name="internalWhereConditionSql"><a href="Database.Orville.PostgreSQL.Internal.Where.html#internalWhereConditionSql"><span class="hs-identifier">internalWhereConditionSql</span></a></a><span> </span><a name="local-6989586621679108572"><a href="#local-6989586621679108572"><span class="hs-identifier">mbTableDef</span></a></a><span> </span><a name="local-6989586621679108573"><a href="#local-6989586621679108573"><span class="hs-identifier">whereCondition</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-126"></a><span>  </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679108573"><span class="hs-identifier hs-var">whereCondition</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-127"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#Or"><span class="hs-identifier hs-var">Or</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-string">&quot;FALSE&quot;</span><span>
</span><a name="line-128"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#Or"><span class="hs-identifier hs-var">Or</span></a><span> </span><a name="local-6989586621679108577"><a href="#local-6989586621679108577"><span class="hs-identifier">conds</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-129"></a><span>      </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679108578"><a href="#local-6989586621679108578"><span class="hs-identifier">condsSql</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><a href="#local-6989586621679108574"><span class="hs-identifier hs-var">innerCondSql</span></a><span> </span><a href="#local-6989586621679108577"><span class="hs-identifier hs-var">conds</span></a><span>
</span><a name="line-130"></a><span>       </span><span class="hs-keyword">in</span><span> </span><span class="hs-identifier hs-var">List.intercalate</span><span> </span><span class="hs-string">&quot; OR &quot;</span><span> </span><a href="#local-6989586621679108578"><span class="hs-identifier hs-var">condsSql</span></a><span>
</span><a name="line-131"></a><span>
</span><a name="line-132"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#And"><span class="hs-identifier hs-var">And</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-string">&quot;TRUE&quot;</span><span>
</span><a name="line-133"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#And"><span class="hs-identifier hs-var">And</span></a><span> </span><a name="local-6989586621679108579"><a href="#local-6989586621679108579"><span class="hs-identifier">conds</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-134"></a><span>      </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679108580"><a href="#local-6989586621679108580"><span class="hs-identifier">condsSql</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><a href="#local-6989586621679108574"><span class="hs-identifier hs-var">innerCondSql</span></a><span> </span><a href="#local-6989586621679108579"><span class="hs-identifier hs-var">conds</span></a><span>
</span><a name="line-135"></a><span>       </span><span class="hs-keyword">in</span><span> </span><span class="hs-identifier hs-var">List.intercalate</span><span> </span><span class="hs-string">&quot; AND &quot;</span><span> </span><a href="#local-6989586621679108580"><span class="hs-identifier hs-var">condsSql</span></a><span>
</span><a name="line-136"></a><span>
</span><a name="line-137"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><a name="local-6989586621679108581"><a href="#local-6989586621679108581"><span class="hs-identifier">expression</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-138"></a><span>      </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679108572"><span class="hs-identifier hs-var">mbTableDef</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-139"></a><span>        </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679108582"><a href="#local-6989586621679108582"><span class="hs-identifier">tableDef</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-140"></a><span>          </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#rawExprToSql"><span class="hs-identifier hs-var">rawExprToSql</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#generateSql"><span class="hs-identifier hs-var">generateSql</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679108581"><span class="hs-identifier hs-var">expression</span></a><span> </span><span class="hs-special">`</span><span class="hs-keyword">qualified</span><span class="hs-special">`</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">tableName</span><span> </span><a href="#local-6989586621679108582"><span class="hs-identifier hs-var">tableDef</span></a><span class="hs-special">)</span><span>
</span><a name="line-141"></a><span>        </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-142"></a><span>          </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#rawExprToSql"><span class="hs-identifier hs-var">rawExprToSql</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#generateSql"><span class="hs-identifier hs-var">generateSql</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679108581"><span class="hs-identifier hs-var">expression</span></a><span>
</span><a name="line-143"></a><span>
</span><a name="line-144"></a><span>    </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#Qualified"><span class="hs-identifier hs-var">Qualified</span></a><span> </span><a name="local-6989586621679108583"><a href="#local-6989586621679108583"><span class="hs-identifier">tableDef</span></a></a><span> </span><a name="local-6989586621679108584"><a href="#local-6989586621679108584"><span class="hs-identifier">cond</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-145"></a><span>      </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#internalWhereConditionSql"><span class="hs-identifier hs-var">internalWhereConditionSql</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679108583"><span class="hs-identifier hs-var">tableDef</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679108584"><span class="hs-identifier hs-var">cond</span></a><span>
</span><a name="line-146"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-147"></a><span>    </span><a name="local-6989586621679108574"><a href="#local-6989586621679108574"><span class="hs-identifier">innerCondSql</span></a></a><span> </span><a name="local-6989586621679108575"><a href="#local-6989586621679108575"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-148"></a><span>      </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679108576"><a href="#local-6989586621679108576"><span class="hs-identifier">sql</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#internalWhereConditionSql"><span class="hs-identifier hs-var">internalWhereConditionSql</span></a><span> </span><a href="#local-6989586621679108572"><span class="hs-identifier hs-var">mbTableDef</span></a><span> </span><a href="#local-6989586621679108575"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-149"></a><span>       </span><span class="hs-keyword">in</span><span> </span><span class="hs-string">&quot;(&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679108576"><span class="hs-identifier hs-var">sql</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;)&quot;</span><span>
</span><a name="line-150"></a><span>
</span><a name="line-151"></a><span class="hs-identifier">whereConditionValues</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">SqlValue</span><span class="hs-special">]</span><span>
</span><a name="line-152"></a><a name="whereConditionValues"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereConditionValues"><span class="hs-identifier">whereConditionValues</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#Expr"><span class="hs-identifier hs-var">Expr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Right</span><span> </span><a name="local-6989586621679108585"><a href="#local-6989586621679108585"><span class="hs-identifier">form</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-153"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#whereValues"><span class="hs-identifier hs-var">E.whereValues</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679108585"><span class="hs-identifier hs-var">form</span></a><span class="hs-special">]</span><span>
</span><a name="line-154"></a><span class="hs-identifier">whereConditionValues</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#Expr"><span class="hs-identifier hs-var">Expr</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-155"></a><span class="hs-identifier">whereConditionValues</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#Or"><span class="hs-identifier hs-var">Or</span></a><span> </span><a name="local-6989586621679108586"><a href="#local-6989586621679108586"><span class="hs-identifier">conds</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">concatMap</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereConditionValues"><span class="hs-identifier hs-var">whereConditionValues</span></a><span> </span><a href="#local-6989586621679108586"><span class="hs-identifier hs-var">conds</span></a><span>
</span><a name="line-156"></a><span class="hs-identifier">whereConditionValues</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#And"><span class="hs-identifier hs-var">And</span></a><span> </span><a name="local-6989586621679108587"><a href="#local-6989586621679108587"><span class="hs-identifier">conds</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">concatMap</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereConditionValues"><span class="hs-identifier hs-var">whereConditionValues</span></a><span> </span><a href="#local-6989586621679108587"><span class="hs-identifier hs-var">conds</span></a><span>
</span><a name="line-157"></a><span class="hs-identifier">whereConditionValues</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#Qualified"><span class="hs-identifier hs-var">Qualified</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679108588"><a href="#local-6989586621679108588"><span class="hs-identifier">cond</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereConditionValues"><span class="hs-identifier hs-var">whereConditionValues</span></a><span> </span><a href="#local-6989586621679108588"><span class="hs-identifier hs-var">cond</span></a><span>
</span><a name="line-158"></a><span>
</span><a name="line-159"></a><span class="hs-comment">{- |
  Migration Guide: @whereAnd@ has been removed. Use the binary function
  @andExpr@ to combine @BooleanExpr@ expressions instead. @andExpr@ is also
  available as the operator @(.&amp;&amp;)@
-}</span><span>
</span><a name="line-164"></a><span class="hs-identifier">whereAnd</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-165"></a><a name="whereAnd"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereAnd"><span class="hs-identifier">whereAnd</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#And"><span class="hs-identifier hs-var">And</span></a><span>
</span><a name="line-166"></a><span>
</span><a name="line-167"></a><span class="hs-comment">{- |
  Migration Guide: @whereOr@ has been removed. Use the binary function
  @orExpr@ to combine @BooleanExpr@ expressions instead. @orExpr@ is also
  available as the operator @(.||)@
-}</span><span>
</span><a name="line-172"></a><span class="hs-identifier">whereOr</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-173"></a><a name="whereOr"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereOr"><span class="hs-identifier">whereOr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#Or"><span class="hs-identifier hs-var">Or</span></a><span>
</span><a name="line-174"></a><span>
</span><a name="line-175"></a><span class="hs-comment">{- |
  Migration Guide: @whereIn@ has been renamed to @fieldIn@. It now takes a
  @NonEmpty@ list of values to reflect this is a requirement in SQL.
-}</span><span>
</span><a name="line-179"></a><span class="hs-identifier">whereIn</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108520"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108521"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679108521"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-180"></a><a name="whereIn"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereIn"><span class="hs-identifier">whereIn</span></a></a><span> </span><a name="local-6989586621679108589"><a href="#local-6989586621679108589"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name="local-6989586621679108590"><a href="#local-6989586621679108590"><span class="hs-identifier">values</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-181"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-182"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#whereIn"><span class="hs-identifier hs-var">E.whereIn</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span> </span><a href="#local-6989586621679108589"><span class="hs-identifier hs-var">fieldDef</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToSqlValue"><span class="hs-identifier hs-var">fieldToSqlValue</span></a><span> </span><a href="#local-6989586621679108589"><span class="hs-identifier hs-var">fieldDef</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679108590"><span class="hs-identifier hs-var">values</span></a><span class="hs-special">)</span><span>
</span><a name="line-183"></a><span>
</span><a name="line-184"></a><span class="hs-comment">{- |
  Migration Guide: @whereLike@ has been renamed to @fieldLike@. It now takes a
  @T.Text@ value rather than a @String@.
-}</span><span>
</span><a name="line-188"></a><span class="hs-identifier">whereLike</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108518"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108519"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-189"></a><a name="whereLike"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereLike"><span class="hs-identifier">whereLike</span></a></a><span> </span><a name="local-6989586621679108591"><a href="#local-6989586621679108591"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name="local-6989586621679108592"><a href="#local-6989586621679108592"><span class="hs-identifier">raw</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-190"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-191"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#whereLike"><span class="hs-identifier hs-var">E.whereLike</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span> </span><a href="#local-6989586621679108591"><span class="hs-identifier hs-var">fieldDef</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">toSql</span><span> </span><a href="#local-6989586621679108592"><span class="hs-identifier hs-var">raw</span></a><span class="hs-special">)</span><span>
</span><a name="line-192"></a><span>
</span><a name="line-193"></a><span class="hs-comment">{- |
  Migration Guide: @whereLikeInsensitive@ has been renamed to
  @fieldLikeInsensitive@. It now takes a @T.Text@ value rather than a @String@.
-}</span><span>
</span><a name="line-197"></a><span class="hs-identifier">whereLikeInsensitive</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108516"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108517"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-198"></a><a name="whereLikeInsensitive"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereLikeInsensitive"><span class="hs-identifier">whereLikeInsensitive</span></a></a><span> </span><a name="local-6989586621679108593"><a href="#local-6989586621679108593"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name="local-6989586621679108594"><a href="#local-6989586621679108594"><span class="hs-identifier">raw</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-199"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-200"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#whereLikeInsensitive"><span class="hs-identifier hs-var">E.whereLikeInsensitive</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span> </span><a href="#local-6989586621679108593"><span class="hs-identifier hs-var">fieldDef</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">toSql</span><span> </span><a href="#local-6989586621679108594"><span class="hs-identifier hs-var">raw</span></a><span class="hs-special">)</span><span>
</span><a name="line-201"></a><span>
</span><a name="line-202"></a><span class="hs-comment">{- |
  Migration Guide: @whereNotIn@ has been renamed to @fieldNotIn@. It now takes a
  @NonEmpty@ list of values to reflect this is a requirement in SQL.
-}</span><span>
</span><a name="line-206"></a><span class="hs-identifier">whereNotIn</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679108514"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679108515"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679108515"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-207"></a><a name="whereNotIn"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereNotIn"><span class="hs-identifier">whereNotIn</span></a></a><span> </span><a name="local-6989586621679108595"><a href="#local-6989586621679108595"><span class="hs-identifier">fieldDef</span></a></a><span> </span><a name="local-6989586621679108596"><a href="#local-6989586621679108596"><span class="hs-identifier">values</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-208"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-209"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#whereNotIn"><span class="hs-identifier hs-var">E.whereNotIn</span></a><span>
</span><a name="line-210"></a><span>    </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span> </span><a href="#local-6989586621679108595"><span class="hs-identifier hs-var">fieldDef</span></a><span class="hs-special">)</span><span>
</span><a name="line-211"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToSqlValue"><span class="hs-identifier hs-var">fieldToSqlValue</span></a><span> </span><a href="#local-6989586621679108595"><span class="hs-identifier hs-var">fieldDef</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679108596"><span class="hs-identifier hs-var">values</span></a><span class="hs-special">)</span><span>
</span><a name="line-212"></a><span>
</span><a name="line-213"></a><span class="hs-comment">{- |
  Migration Guide: @whereQualified@ has been removed. If you need qualified
  column references you can use the SQL building functions found in
  @Orville.PostgreSQL.Expr@ to build them. The @qualifyColumn@ function can be
  used to qualify column references in that context. @BooleanExpr@ values built
  directly this way can be easily used in conjuction with other helpers such as
  @fieldEquals@ which also build @BooleanExpr@ values themselves.
-}</span><span>
</span><a name="line-221"></a><span class="hs-identifier">whereQualified</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition</span></a><span> </span><a href="#local-6989586621679108511"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679108512"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679108513"><span class="hs-identifier hs-type">c</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-222"></a><a name="whereQualified"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereQualified"><span class="hs-identifier">whereQualified</span></a></a><span> </span><a name="local-6989586621679108597"><a href="#local-6989586621679108597"><span class="hs-identifier">tableDef</span></a></a><span> </span><a name="local-6989586621679108598"><a href="#local-6989586621679108598"><span class="hs-identifier">cond</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#Qualified"><span class="hs-identifier hs-var">Qualified</span></a><span> </span><a href="#local-6989586621679108597"><span class="hs-identifier hs-var">tableDef</span></a><span> </span><a href="#local-6989586621679108598"><span class="hs-identifier hs-var">cond</span></a><span>
</span><a name="line-223"></a><span>
</span><a name="line-224"></a><span class="hs-comment">{- |
  Migration Guide: @whereRaw@ has been removed. In its place you should use the
  more general functions such as @unsafeSqlExpression@ or @unsafeRawSql@ in the
  @Orville.PostgreSQL.Raw.RawSql@ module to build a @BooleanExpr@.
-}</span><span>
</span><a name="line-229"></a><span class="hs-identifier">whereRaw</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">SqlValue</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-230"></a><a name="whereRaw"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereRaw"><span class="hs-identifier">whereRaw</span></a></a><span> </span><a name="local-6989586621679108599"><a href="#local-6989586621679108599"><span class="hs-identifier">str</span></a></a><span> </span><a name="local-6989586621679108600"><a href="#local-6989586621679108600"><span class="hs-identifier">values</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#whereRaw"><span class="hs-identifier hs-var">E.whereRaw</span></a><span> </span><a href="#local-6989586621679108599"><span class="hs-identifier hs-var">str</span></a><span> </span><a href="#local-6989586621679108600"><span class="hs-identifier hs-var">values</span></a><span>
</span><a name="line-231"></a><span>
</span><a name="line-232"></a><span class="hs-comment">{- |
  Migration Guide: @isNull@ has been renamed to @fieldIsNull@
-}</span><span>
</span><a name="line-235"></a><span class="hs-identifier">isNull</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier hs-type">Nullable</span></a><span> </span><a href="#local-6989586621679108510"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-236"></a><a name="isNull"><a href="Database.Orville.PostgreSQL.Internal.Where.html#isNull"><span class="hs-identifier">isNull</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#whereNull"><span class="hs-identifier hs-var">E.whereNull</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span>
</span><a name="line-237"></a><span>
</span><a name="line-238"></a><span class="hs-comment">{- |
  Migration Guide: @isNotNull@ has been renamed to @fieldIsNotNull@
-}</span><span>
</span><a name="line-241"></a><span class="hs-identifier">isNotNull</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#Nullable"><span class="hs-identifier hs-type">Nullable</span></a><span> </span><a href="#local-6989586621679108509"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span>
</span><a name="line-242"></a><a name="isNotNull"><a href="Database.Orville.PostgreSQL.Internal.Where.html#isNotNull"><span class="hs-identifier">isNotNull</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereConditionExpr"><span class="hs-identifier hs-var">WhereConditionExpr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.Expr.html#expr"><span class="hs-identifier hs-var">expr</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Expr.WhereExpr.html#whereNotNull"><span class="hs-identifier hs-var">E.whereNotNull</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToNameForm"><span class="hs-identifier hs-var">fieldToNameForm</span></a><span>
</span><a name="line-243"></a><span>
</span><a name="line-244"></a><span class="hs-identifier">whereClause</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-245"></a><a name="whereClause"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereClause"><span class="hs-identifier">whereClause</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;&quot;</span><span>
</span><a name="line-246"></a><span class="hs-identifier">whereClause</span><span> </span><a name="local-6989586621679108601"><a href="#local-6989586621679108601"><span class="hs-identifier">conds</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;WHERE &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereConditionSql"><span class="hs-identifier hs-var">whereConditionSql</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereAnd"><span class="hs-identifier hs-var">whereAnd</span></a><span> </span><a href="#local-6989586621679108601"><span class="hs-identifier hs-var">conds</span></a><span class="hs-special">)</span><span>
</span><a name="line-247"></a><span>
</span><a name="line-248"></a><span class="hs-identifier">whereValues</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">SqlValue</span><span class="hs-special">]</span><span>
</span><a name="line-249"></a><a name="whereValues"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereValues"><span class="hs-identifier">whereValues</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">List.concatMap</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereConditionValues"><span class="hs-identifier hs-var">whereConditionValues</span></a><span>
</span><a name="line-250"></a><span>
</span><a name="line-251"></a><span class="hs-comment">{- |
  Migration Guide: @whereToSql@ has been removed. It is replaced by the more
  general @toBytesAndParams@ function in @Orville.PostgreSQL.Raw.RawSql@.
-}</span><span>
</span><a name="line-255"></a><span class="hs-identifier">whereToSql</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#WhereCondition"><span class="hs-identifier hs-type">WhereCondition</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">SqlValue</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-256"></a><a name="whereToSql"><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereToSql"><span class="hs-identifier">whereToSql</span></a></a><span> </span><a name="local-6989586621679108602"><a href="#local-6989586621679108602"><span class="hs-identifier">conds</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereClause"><span class="hs-identifier hs-var">whereClause</span></a><span> </span><a href="#local-6989586621679108602"><span class="hs-identifier hs-var">conds</span></a><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Where.html#whereValues"><span class="hs-identifier hs-var">whereValues</span></a><span> </span><a href="#local-6989586621679108602"><span class="hs-identifier hs-var">conds</span></a><span class="hs-special">)</span><span>
</span><a name="line-257"></a></pre></body></html>