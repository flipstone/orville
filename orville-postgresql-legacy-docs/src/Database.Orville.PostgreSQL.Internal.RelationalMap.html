<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-|
Module    : Database.Orville.PostgreSQL.Internal.RelationalMap
Copyright : Flipstone Technology Partners 2016-2018
License   : MIT
-}</span><span>
</span><a name="line-6"></a><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><a name="line-7"></a><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><a name="line-8"></a><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><a name="line-9"></a><span>
</span><a name="line-10"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.RelationalMap</span><span>
</span><a name="line-11"></a><span>  </span><span class="hs-special">(</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mkTableDefinition"><span class="hs-identifier hs-var">mkTableDefinition</span></a><span>
</span><a name="line-12"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#TableParams"><span class="hs-identifier hs-type">TableParams</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-13"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span>
</span><a name="line-14"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#fields"><span class="hs-identifier hs-var">fields</span></a><span>
</span><a name="line-15"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mapAttr"><span class="hs-identifier hs-var">mapAttr</span></a><span>
</span><a name="line-16"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mapField"><span class="hs-identifier hs-var">mapField</span></a><span>
</span><a name="line-17"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#attrField"><span class="hs-identifier hs-var">attrField</span></a><span>
</span><a name="line-18"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#maybeMapper"><span class="hs-identifier hs-var">maybeMapper</span></a><span>
</span><a name="line-19"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#prefixMap"><span class="hs-identifier hs-var">prefixMap</span></a><span>
</span><a name="line-20"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#partialMap"><span class="hs-identifier hs-var">partialMap</span></a><span>
</span><a name="line-21"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#readOnlyMap"><span class="hs-identifier hs-var">readOnlyMap</span></a><span>
</span><a name="line-22"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#readOnlyField"><span class="hs-identifier hs-var">readOnlyField</span></a><span>
</span><a name="line-23"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-24"></a><span>
</span><a name="line-25"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">join</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">when</span><span class="hs-special">)</span><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Reader</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ask</span><span class="hs-special">)</span><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.State</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">modify</span><span class="hs-special">)</span><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Profunctor</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Profunctor</span><span class="hs-special">(</span><span class="hs-identifier hs-var">lmap</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">rmap</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-29"></a><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.FieldDefinition</span></a><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FromSql.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.FromSql</span></a><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html"><span class="hs-identifier">Database.Orville.PostgreSQL.Internal.Types</span></a><span>
</span><a name="line-33"></a><span>
</span><a name="line-34"></a><span class="hs-comment">{-|
 MigrationGuide: @TableParams@ no longer exists. See the migration guide
 for 'mkTableDefinition'

 'TableParams' is the simplest way to make a 'TableDefinition'. You
 can use 'mkTableDefinition' to make a definition from the simplified
 params. Where 'TableDefinition' requires the 'tableFields', 'tableFromSql',
 and 'tableToSql' to all be defined separately and kept in sync, 'TableParams'
 provides a single 'tblMapper' field that specifies all three simultaneously
 and ensures they are consistent with one another.
 -}</span><span>
</span><a name="line-45"></a><span class="hs-keyword">data</span><span> </span><a name="TableParams"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#TableParams"><span class="hs-identifier">TableParams</span></a></a><span> </span><a name="local-6989586621679106709"><a href="#local-6989586621679106709"><span class="hs-identifier">readEntity</span></a></a><span> </span><a name="local-6989586621679106710"><a href="#local-6989586621679106710"><span class="hs-identifier">writeEntity</span></a></a><span> </span><a name="local-6989586621679106711"><a href="#local-6989586621679106711"><span class="hs-identifier">key</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="TableParams"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#TableParams"><span class="hs-identifier">TableParams</span></a></a><span>
</span><a name="line-46"></a><span>  </span><span class="hs-special">{</span><span> </span><a name="tblName"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#tblName"><span class="hs-identifier">tblName</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-47"></a><span>      </span><span class="hs-comment">-- ^ The name of the table in the database</span><span>
</span><a name="line-48"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tblMapper"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#tblMapper"><span class="hs-identifier">tblMapper</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106710"><span class="hs-identifier hs-type">writeEntity</span></a><span> </span><a href="#local-6989586621679106709"><span class="hs-identifier hs-type">readEntity</span></a><span>
</span><a name="line-49"></a><span>      </span><span class="hs-comment">-- ^ The relational mapping that defines how the Haskell entity type</span><span>
</span><a name="line-50"></a><span>      </span><span class="hs-comment">-- is converted both to and from sql. The fields utilized in the mapping</span><span>
</span><a name="line-51"></a><span>      </span><span class="hs-comment">-- are used to automatically build the list of 'FieldDefinitions' that</span><span>
</span><a name="line-52"></a><span>      </span><span class="hs-comment">-- define the structure of the table in the database.</span><span>
</span><a name="line-53"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tblSafeToDelete"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#tblSafeToDelete"><span class="hs-identifier">tblSafeToDelete</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span>
</span><a name="line-54"></a><span>      </span><span class="hs-comment">-- ^ A list of any columns that may be deleted from the table by Orville.</span><span>
</span><a name="line-55"></a><span>      </span><span class="hs-comment">-- (Orville will never delete a column without being told it is safe)</span><span>
</span><a name="line-56"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tblPrimaryKey"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#tblPrimaryKey"><span class="hs-identifier">tblPrimaryKey</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#PrimaryKey"><span class="hs-identifier hs-type">PrimaryKey</span></a><span> </span><a href="#local-6989586621679106711"><span class="hs-identifier hs-type">key</span></a><span>
</span><a name="line-57"></a><span>      </span><span class="hs-comment">-- ^ A function to set the key on the entity</span><span>
</span><a name="line-58"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tblGetKey"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#tblGetKey"><span class="hs-identifier">tblGetKey</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679106709"><span class="hs-identifier hs-type">readEntity</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679106711"><span class="hs-identifier hs-type">key</span></a><span>
</span><a name="line-59"></a><span>      </span><span class="hs-comment">-- ^ A function to get the key on the entity</span><span>
</span><a name="line-60"></a><span>  </span><span class="hs-special">,</span><span> </span><a name="tblComments"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#tblComments"><span class="hs-identifier">tblComments</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableComments"><span class="hs-identifier hs-type">TableComments</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-61"></a><span>      </span><span class="hs-comment">-- ^ Any comments that might be interesting for developers to see. These</span><span>
</span><a name="line-62"></a><span>      </span><span class="hs-comment">-- comments will get printed in the log if there is an erro while attempting</span><span>
</span><a name="line-63"></a><span>      </span><span class="hs-comment">-- to migrate the table.</span><span>
</span><a name="line-64"></a><span>  </span><span class="hs-special">}</span><span>
</span><a name="line-65"></a><span>
</span><a name="line-66"></a><span class="hs-comment">{-|
  Migration Guide: This function has in the new orville to take the table name,
  primary key definition and a @SqlMarshaller@ (formerly @RelationalMap@).
  Other options such as constraints, indexes, and columns to drop can be added
  to the @TableDefinition@ after the initial instantiation. The @TableParams@
  type has been dropped for the new orville.


 'mkTableDefinition' converts a 'TableParams' to 'TableDefinition'. Usually
 this is used directly on a record literal of the 'TableParams'. For
 example:

 @
  data Foo key = Foo key { fooId :: Record }
  myTable :: TableDefinition Foo
  myTable = mkTableDefinition $
    TableParams
      { tblName = &quot;foo&quot;
      , tblMapper = User &lt;$&gt; attrField fooId idField
      , tableSafeToDelete = []
      , tblSetKey = \key foo -&gt; foo { fooId = key }
      , tblGetKey = fooId
      , tblComments = []
      }

 @
 -}</span><span>
</span><a name="line-93"></a><span class="hs-identifier">mkTableDefinition</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-94"></a><span>     </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#TableParams"><span class="hs-identifier hs-type">TableParams</span></a><span> </span><a href="#local-6989586621679106742"><span class="hs-identifier hs-type">readEntity</span></a><span> </span><a href="#local-6989586621679106743"><span class="hs-identifier hs-type">writeEntity</span></a><span> </span><a href="#local-6989586621679106744"><span class="hs-identifier hs-type">key</span></a><span>
</span><a name="line-95"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableDefinition"><span class="hs-identifier hs-type">TableDefinition</span></a><span> </span><a href="#local-6989586621679106742"><span class="hs-identifier hs-type">readEntity</span></a><span> </span><a href="#local-6989586621679106743"><span class="hs-identifier hs-type">writeEntity</span></a><span> </span><a href="#local-6989586621679106744"><span class="hs-identifier hs-type">key</span></a><span>
</span><a name="line-96"></a><a name="mkTableDefinition"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mkTableDefinition"><span class="hs-identifier">mkTableDefinition</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#TableParams"><span class="hs-identifier hs-var">TableParams</span></a><span> </span><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-97"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#TableDefinition"><span class="hs-identifier hs-var">TableDefinition</span></a><span>
</span><a name="line-98"></a><span>    </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">tableFields</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#fields"><span class="hs-identifier hs-var">fields</span></a><span> </span><a href="#local-6989586621679106746"><span class="hs-identifier hs-var">tblMapper</span></a><span>
</span><a name="line-99"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">tableFromSql</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mkFromSql"><span class="hs-identifier hs-var">mkFromSql</span></a><span> </span><a href="#local-6989586621679106748"><span class="hs-identifier hs-var">tblPrimaryKey</span></a><span> </span><a href="#local-6989586621679106746"><span class="hs-identifier hs-var">tblMapper</span></a><span>
</span><a name="line-100"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">tableToSql</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mkToSql"><span class="hs-identifier hs-var">mkToSql</span></a><span> </span><a href="#local-6989586621679106746"><span class="hs-identifier hs-var">tblMapper</span></a><span>
</span><a name="line-101"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">tablePrimaryKey</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106748"><span class="hs-identifier hs-var">tblPrimaryKey</span></a><span>
</span><a name="line-102"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">tableName</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106745"><span class="hs-identifier hs-var">tblName</span></a><span>
</span><a name="line-103"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">tableSafeToDelete</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106747"><span class="hs-identifier hs-var">tblSafeToDelete</span></a><span>
</span><a name="line-104"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">tableGetKey</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106749"><span class="hs-identifier hs-var">tblGetKey</span></a><span>
</span><a name="line-105"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">tableComments</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106750"><span class="hs-identifier hs-var">tblComments</span></a><span>
</span><a name="line-106"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-107"></a><span>
</span><a name="line-108"></a><span class="hs-comment">{- |
  Migration guide: This type has been replaced with the @SqlMarshaller@ type in
  the new orville. The interface is similar, though the names of the functions
  have been updated in many cases. See the migration guides for those functions
  to find their new names.
-}</span><span>
</span><a name="line-114"></a><span class="hs-keyword">data</span><span> </span><a name="RelationalMap"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier">RelationalMap</span></a></a><span> </span><a name="local-6989586621679106691"><a href="#local-6989586621679106691"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679106692"><a href="#local-6989586621679106692"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-115"></a><span>  </span><a name="RM_Field"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Field"><span class="hs-identifier">RM_Field</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679106693"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679106694"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106694"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106694"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-116"></a><span>  </span><a name="RM_Nest"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Nest"><span class="hs-identifier">RM_Nest</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106695"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679106696"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106696"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679106697"><span class="hs-identifier hs-type">c</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106695"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106697"><span class="hs-identifier hs-type">c</span></a><span>
</span><a name="line-117"></a><span>  </span><a name="RM_Pure"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Pure"><span class="hs-identifier">RM_Pure</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679106698"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106699"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106698"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-118"></a><span>  </span><a name="RM_Apply"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Apply"><span class="hs-identifier">RM_Apply</span></a></a><span>
</span><a name="line-119"></a><span>    </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106700"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106701"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679106702"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106700"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106701"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106700"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106702"><span class="hs-identifier hs-type">c</span></a><span>
</span><a name="line-120"></a><span>  </span><a name="RM_Partial"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Partial"><span class="hs-identifier">RM_Partial</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106703"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679106703"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106703"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106703"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-121"></a><span>  </span><a name="RM_ReadOnly"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_ReadOnly"><span class="hs-identifier">RM_ReadOnly</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106704"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106705"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106706"><span class="hs-identifier hs-type">c</span></a><span> </span><a href="#local-6989586621679106705"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-122"></a><span>  </span><a name="RM_MaybeTag"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_MaybeTag"><span class="hs-identifier">RM_MaybeTag</span></a></a><span>
</span><a name="line-123"></a><span>    </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679106707"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679106708"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679106707"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679106708"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-124"></a><span>
</span><a name="line-125"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106713"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-126"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679106714"><a href="#local-6989586621679106714"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679106715"><a href="#local-6989586621679106715"><span class="hs-identifier">rm</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679106714"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="#local-6989586621679106715"><span class="hs-identifier hs-var">rm</span></a><span>
</span><a name="line-127"></a><span>
</span><a name="line-128"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106712"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-129"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Pure"><span class="hs-identifier hs-var">RM_Pure</span></a><span>
</span><a name="line-130"></a><span>  </span><span class="hs-special">(</span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Apply"><span class="hs-identifier hs-var">RM_Apply</span></a><span>
</span><a name="line-131"></a><span>
</span><a name="line-132"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Profunctor</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-133"></a><span>  </span><a name="local-8214565720323879430"><span class="hs-identifier">rmap</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fmap</span><span>
</span><a name="line-134"></a><span>  </span><a name="local-8214565720323879429"><span class="hs-identifier">lmap</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mapAttr"><span class="hs-identifier hs-var">mapAttr</span></a><span>
</span><a name="line-135"></a><span>
</span><a name="line-136"></a><span class="hs-comment">{- |
  Migration Guide: @mapAttr@ has been renamed to @marshallNested@
-}</span><span>
</span><a name="line-139"></a><span class="hs-identifier">mapAttr</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106739"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679106740"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106740"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679106741"><span class="hs-identifier hs-type">c</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106739"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106741"><span class="hs-identifier hs-type">c</span></a><span>
</span><a name="line-140"></a><a name="mapAttr"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mapAttr"><span class="hs-identifier">mapAttr</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Nest"><span class="hs-identifier hs-var">RM_Nest</span></a><span>
</span><a name="line-141"></a><span>
</span><a name="line-142"></a><span class="hs-comment">{- |
  Migration Guide: @mapField@ has been removed, though its functional
  equivalent is @marshallReadOnlyField@
-}</span><span>
</span><a name="line-146"></a><span class="hs-identifier">mapField</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679106737"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679106738"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106738"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106738"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-147"></a><a name="mapField"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mapField"><span class="hs-identifier">mapField</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Field"><span class="hs-identifier hs-var">RM_Field</span></a><span>
</span><a name="line-148"></a><span>
</span><a name="line-149"></a><span class="hs-comment">{- |
  Migration Guide: @partialMap@ has been renamed to @marshallPartial@
-}</span><span>
</span><a name="line-152"></a><span class="hs-identifier">partialMap</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106736"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679106736"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106736"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106736"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-153"></a><a name="partialMap"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#partialMap"><span class="hs-identifier">partialMap</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Partial"><span class="hs-identifier hs-var">RM_Partial</span></a><span>
</span><a name="line-154"></a><span>
</span><a name="line-155"></a><span class="hs-comment">{- |
  Migration Guide: @readOnlyMap@ has been renamed to @marshallReadOnly@
-}</span><span>
</span><a name="line-158"></a><span class="hs-identifier">readOnlyMap</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106733"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106734"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106735"><span class="hs-identifier hs-type">c</span></a><span> </span><a href="#local-6989586621679106734"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-159"></a><a name="readOnlyMap"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#readOnlyMap"><span class="hs-identifier">readOnlyMap</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_ReadOnly"><span class="hs-identifier hs-var">RM_ReadOnly</span></a><span>
</span><a name="line-160"></a><span>
</span><a name="line-161"></a><span class="hs-comment">{- |
  Migration Guide: @attrField@ has been renamed to @marshallField@
-}</span><span>
</span><a name="line-164"></a><span class="hs-identifier">attrField</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106730"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679106731"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679106732"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679106731"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106730"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106731"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-165"></a><a name="attrField"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#attrField"><span class="hs-identifier">attrField</span></a></a><span> </span><a name="local-6989586621679106751"><a href="#local-6989586621679106751"><span class="hs-identifier">get</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mapAttr"><span class="hs-identifier hs-var">mapAttr</span></a><span> </span><a href="#local-6989586621679106751"><span class="hs-identifier hs-var">get</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mapField"><span class="hs-identifier hs-var">mapField</span></a><span>
</span><a name="line-166"></a><span>
</span><a name="line-167"></a><span class="hs-comment">{- |
  Migration Guide: @readOnlyField@ has been renamed to @marshallReadOnlyField@
-}</span><span>
</span><a name="line-170"></a><span class="hs-identifier">readOnlyField</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FieldDefinition"><span class="hs-identifier hs-type">FieldDefinition</span></a><span> </span><a href="#local-6989586621679106727"><span class="hs-identifier hs-type">nullability</span></a><span> </span><a href="#local-6989586621679106728"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106729"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679106728"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-171"></a><a name="readOnlyField"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#readOnlyField"><span class="hs-identifier">readOnlyField</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#readOnlyMap"><span class="hs-identifier hs-var">readOnlyMap</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mapField"><span class="hs-identifier hs-var">mapField</span></a><span>
</span><a name="line-172"></a><span>
</span><a name="line-173"></a><span class="hs-comment">{- |
  Migration Guide: @prefixMap@ has been renamed to @prefixMarshaller@
-}</span><span>
</span><a name="line-176"></a><span class="hs-identifier">prefixMap</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106725"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106726"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106725"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106726"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-177"></a><a name="prefixMap"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#prefixMap"><span class="hs-identifier">prefixMap</span></a></a><span> </span><a name="local-6989586621679106752"><a href="#local-6989586621679106752"><span class="hs-identifier">prefix</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Nest"><span class="hs-identifier hs-var">RM_Nest</span></a><span> </span><a name="local-6989586621679106753"><a href="#local-6989586621679106753"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679106754"><a href="#local-6989586621679106754"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Nest"><span class="hs-identifier hs-var">RM_Nest</span></a><span> </span><a href="#local-6989586621679106753"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#prefixMap"><span class="hs-identifier hs-var">prefixMap</span></a><span> </span><a href="#local-6989586621679106752"><span class="hs-identifier hs-var">prefix</span></a><span> </span><a href="#local-6989586621679106754"><span class="hs-identifier hs-var">rm</span></a><span class="hs-special">)</span><span>
</span><a name="line-178"></a><span class="hs-identifier">prefixMap</span><span> </span><a name="local-6989586621679106755"><a href="#local-6989586621679106755"><span class="hs-identifier">prefix</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Field"><span class="hs-identifier hs-var">RM_Field</span></a><span> </span><a name="local-6989586621679106756"><a href="#local-6989586621679106756"><span class="hs-identifier">f</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Field"><span class="hs-identifier hs-var">RM_Field</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106756"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">`</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#withPrefix"><span class="hs-identifier hs-var">withPrefix</span></a><span class="hs-special">`</span><span> </span><a href="#local-6989586621679106755"><span class="hs-identifier hs-var">prefix</span></a><span class="hs-special">)</span><span>
</span><a name="line-179"></a><span class="hs-identifier">prefixMap</span><span> </span><a name="local-6989586621679106757"><a href="#local-6989586621679106757"><span class="hs-identifier">prefix</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Apply"><span class="hs-identifier hs-var">RM_Apply</span></a><span> </span><a name="local-6989586621679106758"><a href="#local-6989586621679106758"><span class="hs-identifier">rmF</span></a></a><span> </span><a name="local-6989586621679106759"><a href="#local-6989586621679106759"><span class="hs-identifier">rmA</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-180"></a><span>  </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Apply"><span class="hs-identifier hs-var">RM_Apply</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#prefixMap"><span class="hs-identifier hs-var">prefixMap</span></a><span> </span><a href="#local-6989586621679106757"><span class="hs-identifier hs-var">prefix</span></a><span> </span><a href="#local-6989586621679106758"><span class="hs-identifier hs-var">rmF</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#prefixMap"><span class="hs-identifier hs-var">prefixMap</span></a><span> </span><a href="#local-6989586621679106757"><span class="hs-identifier hs-var">prefix</span></a><span> </span><a href="#local-6989586621679106759"><span class="hs-identifier hs-var">rmA</span></a><span class="hs-special">)</span><span>
</span><a name="line-181"></a><span class="hs-identifier">prefixMap</span><span> </span><a name="local-6989586621679106760"><a href="#local-6989586621679106760"><span class="hs-identifier">prefix</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Partial"><span class="hs-identifier hs-var">RM_Partial</span></a><span> </span><a name="local-6989586621679106761"><a href="#local-6989586621679106761"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Partial"><span class="hs-identifier hs-var">RM_Partial</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#prefixMap"><span class="hs-identifier hs-var">prefixMap</span></a><span> </span><a href="#local-6989586621679106760"><span class="hs-identifier hs-var">prefix</span></a><span> </span><a href="#local-6989586621679106761"><span class="hs-identifier hs-var">rm</span></a><span class="hs-special">)</span><span>
</span><a name="line-182"></a><span class="hs-identifier">prefixMap</span><span> </span><a name="local-6989586621679106762"><a href="#local-6989586621679106762"><span class="hs-identifier">prefix</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_ReadOnly"><span class="hs-identifier hs-var">RM_ReadOnly</span></a><span> </span><a name="local-6989586621679106763"><a href="#local-6989586621679106763"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_ReadOnly"><span class="hs-identifier hs-var">RM_ReadOnly</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#prefixMap"><span class="hs-identifier hs-var">prefixMap</span></a><span> </span><a href="#local-6989586621679106762"><span class="hs-identifier hs-var">prefix</span></a><span> </span><a href="#local-6989586621679106763"><span class="hs-identifier hs-var">rm</span></a><span class="hs-special">)</span><span>
</span><a name="line-183"></a><span class="hs-identifier">prefixMap</span><span> </span><a name="local-6989586621679106764"><a href="#local-6989586621679106764"><span class="hs-identifier">prefix</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_MaybeTag"><span class="hs-identifier hs-var">RM_MaybeTag</span></a><span> </span><a name="local-6989586621679106765"><a href="#local-6989586621679106765"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_MaybeTag"><span class="hs-identifier hs-var">RM_MaybeTag</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#prefixMap"><span class="hs-identifier hs-var">prefixMap</span></a><span> </span><a href="#local-6989586621679106764"><span class="hs-identifier hs-var">prefix</span></a><span> </span><a href="#local-6989586621679106765"><span class="hs-identifier hs-var">rm</span></a><span class="hs-special">)</span><span>
</span><a name="line-184"></a><span class="hs-identifier">prefixMap</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679106766"><a href="#local-6989586621679106766"><span class="hs-identifier">rm</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Pure"><span class="hs-identifier hs-var">RM_Pure</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106766"><span class="hs-identifier hs-var">rm</span></a><span>
</span><a name="line-185"></a><span>
</span><a name="line-186"></a><span class="hs-comment">{- |
  Migration Guide: @maybeMapper@ has been renamed to @marshallMaybe@
-}</span><span>
</span><a name="line-189"></a><span class="hs-identifier">maybeMapper</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106723"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106724"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679106723"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679106724"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-190"></a><a name="maybeMapper"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#maybeMapper"><span class="hs-identifier">maybeMapper</span></a></a><span>
</span><a name="line-191"></a><span>    </span><span class="hs-comment">-- rewrite the mapper to handle null fields, then tag</span><span>
</span><a name="line-192"></a><span>    </span><span class="hs-comment">-- it as having been done so we don't double-map it</span><span>
</span><a name="line-193"></a><span>    </span><span class="hs-comment">-- in a future `maybeMapper` call.</span><span>
</span><a name="line-194"></a><span>    </span><span class="hs-comment">--</span><span>
</span><a name="line-195"></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_MaybeTag"><span class="hs-identifier hs-var">RM_MaybeTag</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="#local-6989586621679106767"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-196"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-197"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106768"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106769"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679106768"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679106769"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-198"></a><span>    </span><a name="local-6989586621679106767"><a href="#local-6989586621679106767"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Nest"><span class="hs-identifier hs-var">RM_Nest</span></a><span> </span><a name="local-6989586621679106770"><a href="#local-6989586621679106770"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679106771"><a href="#local-6989586621679106771"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Nest"><span class="hs-identifier hs-var">RM_Nest</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><a href="#local-6989586621679106770"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106767"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679106771"><span class="hs-identifier hs-var">rm</span></a><span class="hs-special">)</span><span>
</span><a name="line-199"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Field"><span class="hs-identifier hs-var">RM_Field</span></a><span> </span><a name="local-6989586621679106772"><a href="#local-6989586621679106772"><span class="hs-identifier">f</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-200"></a><span>      </span><span class="hs-keyword">case</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#checkNullability"><span class="hs-identifier hs-var">checkNullability</span></a><span> </span><a href="#local-6989586621679106772"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-201"></a><span>        </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NotNullField"><span class="hs-identifier hs-var">NotNullField</span></a><span> </span><a name="local-6989586621679106773"><a href="#local-6989586621679106773"><span class="hs-identifier">notNullField</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-202"></a><span>          </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Field"><span class="hs-identifier hs-var">RM_Field</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#nullableField"><span class="hs-identifier hs-var">nullableField</span></a><span> </span><a href="#local-6989586621679106773"><span class="hs-identifier hs-var">notNullField</span></a><span class="hs-special">)</span><span>
</span><a name="line-203"></a><span>
</span><a name="line-204"></a><span>        </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#NullableField"><span class="hs-identifier hs-var">NullableField</span></a><span> </span><a name="local-6989586621679106774"><a href="#local-6989586621679106774"><span class="hs-identifier">nullField</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-205"></a><span>          </span><span class="hs-comment">-- When the underlying field is already nullable we need to make sure</span><span>
</span><a name="line-206"></a><span>          </span><span class="hs-comment">-- that 'NULL' is decoded to a 'Just'. Otherwise when the field is</span><span>
</span><a name="line-207"></a><span>          </span><span class="hs-comment">-- 'NULL' it causes the entire 'RelationalMap' to resolve to a</span><span>
</span><a name="line-208"></a><span>          </span><span class="hs-comment">-- 'Nothing' as if _all_ fields were 'NULL', even if they were not.</span><span>
</span><a name="line-209"></a><span>          </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Field"><span class="hs-identifier hs-var">RM_Field</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#asymmetricNullableField"><span class="hs-identifier hs-var">asymmetricNullableField</span></a><span> </span><a href="#local-6989586621679106774"><span class="hs-identifier hs-var">nullField</span></a><span class="hs-special">)</span><span>
</span><a name="line-210"></a><span>
</span><a name="line-211"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Pure"><span class="hs-identifier hs-var">RM_Pure</span></a><span> </span><a name="local-6989586621679106775"><a href="#local-6989586621679106775"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Pure"><span class="hs-identifier hs-var">RM_Pure</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679106775"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-212"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Apply"><span class="hs-identifier hs-var">RM_Apply</span></a><span> </span><a name="local-6989586621679106776"><a href="#local-6989586621679106776"><span class="hs-identifier">rmF</span></a></a><span> </span><a name="local-6989586621679106777"><a href="#local-6989586621679106777"><span class="hs-identifier">rmA</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Apply"><span class="hs-identifier hs-var">RM_Apply</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;*&gt;</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679106767"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679106776"><span class="hs-identifier hs-var">rmF</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106767"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679106777"><span class="hs-identifier hs-var">rmA</span></a><span class="hs-special">)</span><span>
</span><a name="line-213"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Partial"><span class="hs-identifier hs-var">RM_Partial</span></a><span> </span><a name="local-6989586621679106778"><a href="#local-6989586621679106778"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Partial"><span class="hs-identifier hs-var">RM_Partial</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106779"><span class="hs-identifier hs-var">flipError</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679106767"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679106778"><span class="hs-identifier hs-var">rm</span></a><span class="hs-special">)</span><span>
</span><a name="line-214"></a><span>      </span><span class="hs-keyword">where</span><span>
</span><a name="line-215"></a><span>        </span><span class="hs-identifier">flipError</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679106780"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679106780"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-216"></a><span>        </span><a name="local-6989586621679106779"><a href="#local-6989586621679106779"><span class="hs-identifier">flipError</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Right</span><span> </span><a name="local-6989586621679106781"><a href="#local-6989586621679106781"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679106781"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-217"></a><span>        </span><span class="hs-identifier">flipError</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Left</span><span> </span><a name="local-6989586621679106782"><a href="#local-6989586621679106782"><span class="hs-identifier">err</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Left</span><span> </span><a href="#local-6989586621679106782"><span class="hs-identifier hs-var">err</span></a><span>
</span><a name="line-218"></a><span>        </span><span class="hs-identifier">flipError</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-219"></a><span>    </span><span class="hs-identifier">go</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_ReadOnly"><span class="hs-identifier hs-var">RM_ReadOnly</span></a><span> </span><a name="local-6989586621679106783"><a href="#local-6989586621679106783"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_ReadOnly"><span class="hs-identifier hs-var">RM_ReadOnly</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106767"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679106783"><span class="hs-identifier hs-var">rm</span></a><span class="hs-special">)</span><span>
</span><a name="line-220"></a><span>    </span><span class="hs-identifier">go</span><span> </span><a name="local-6989586621679106784"><a href="#local-6989586621679106784"><span class="hs-identifier">rm</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_MaybeTag"><span class="hs-identifier hs-var">RM_MaybeTag</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mapAttr"><span class="hs-identifier hs-var">mapAttr</span></a><span> </span><span class="hs-identifier hs-var">join</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679106784"><span class="hs-identifier hs-var">rm</span></a><span>
</span><a name="line-221"></a><span>
</span><a name="line-222"></a><span class="hs-comment">{- |
  Migration Guide: The fields in new orville's @SqlMarshaller@ are somewhat
  more sophisticated than those of a @RelationalMap@. The 'fields' function is
  no longer offered with this simple interface as a result, but the
  @foldMarshallerFields@ function can be used in combination with the
  @collectFromField@ helper to collect the desired information from each field.
-}</span><span>
</span><a name="line-229"></a><span class="hs-identifier">fields</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106721"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106722"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#SomeField"><span class="hs-identifier hs-type">SomeField</span></a><span class="hs-special">]</span><span>
</span><a name="line-230"></a><a name="fields"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#fields"><span class="hs-identifier">fields</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Field"><span class="hs-identifier hs-var">RM_Field</span></a><span> </span><a name="local-6989586621679106785"><a href="#local-6989586621679106785"><span class="hs-identifier">field</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#SomeField"><span class="hs-identifier hs-var">SomeField</span></a><span> </span><a href="#local-6989586621679106785"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">]</span><span>
</span><a name="line-231"></a><span class="hs-identifier">fields</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Apply"><span class="hs-identifier hs-var">RM_Apply</span></a><span> </span><a name="local-6989586621679106786"><a href="#local-6989586621679106786"><span class="hs-identifier">rm1</span></a></a><span> </span><a name="local-6989586621679106787"><a href="#local-6989586621679106787"><span class="hs-identifier">rm2</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#fields"><span class="hs-identifier hs-var">fields</span></a><span> </span><a href="#local-6989586621679106786"><span class="hs-identifier hs-var">rm1</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#fields"><span class="hs-identifier hs-var">fields</span></a><span> </span><a href="#local-6989586621679106787"><span class="hs-identifier hs-var">rm2</span></a><span>
</span><a name="line-232"></a><span class="hs-identifier">fields</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Nest"><span class="hs-identifier hs-var">RM_Nest</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679106788"><a href="#local-6989586621679106788"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#fields"><span class="hs-identifier hs-var">fields</span></a><span> </span><a href="#local-6989586621679106788"><span class="hs-identifier hs-var">rm</span></a><span>
</span><a name="line-233"></a><span class="hs-identifier">fields</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Partial"><span class="hs-identifier hs-var">RM_Partial</span></a><span> </span><a name="local-6989586621679106789"><a href="#local-6989586621679106789"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#fields"><span class="hs-identifier hs-var">fields</span></a><span> </span><a href="#local-6989586621679106789"><span class="hs-identifier hs-var">rm</span></a><span>
</span><a name="line-234"></a><span class="hs-identifier">fields</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_MaybeTag"><span class="hs-identifier hs-var">RM_MaybeTag</span></a><span> </span><a name="local-6989586621679106790"><a href="#local-6989586621679106790"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#fields"><span class="hs-identifier hs-var">fields</span></a><span> </span><a href="#local-6989586621679106790"><span class="hs-identifier hs-var">rm</span></a><span>
</span><a name="line-235"></a><span class="hs-identifier">fields</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Pure"><span class="hs-identifier hs-var">RM_Pure</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-236"></a><span class="hs-identifier">fields</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_ReadOnly"><span class="hs-identifier hs-var">RM_ReadOnly</span></a><span> </span><a name="local-6989586621679106791"><a href="#local-6989586621679106791"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-237"></a><span>  </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106792"><span class="hs-identifier hs-var">someFieldWithFlag</span></a><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#AssignedByDatabase"><span class="hs-identifier hs-var">AssignedByDatabase</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#fields"><span class="hs-identifier hs-var">fields</span></a><span> </span><a href="#local-6989586621679106791"><span class="hs-identifier hs-var">rm</span></a><span class="hs-special">)</span><span>
</span><a name="line-238"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-239"></a><span>    </span><a name="local-6989586621679106792"><a href="#local-6989586621679106792"><span class="hs-identifier">someFieldWithFlag</span></a></a><span> </span><a name="local-6989586621679106793"><a href="#local-6989586621679106793"><span class="hs-identifier">flag</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#SomeField"><span class="hs-identifier hs-var">SomeField</span></a><span> </span><a name="local-6989586621679106794"><a href="#local-6989586621679106794"><span class="hs-identifier">f</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#SomeField"><span class="hs-identifier hs-var">SomeField</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106794"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">`</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#withFlag"><span class="hs-identifier hs-var">withFlag</span></a><span class="hs-special">`</span><span> </span><a href="#local-6989586621679106793"><span class="hs-identifier hs-var">flag</span></a><span class="hs-special">)</span><span>
</span><a name="line-240"></a><span>
</span><a name="line-241"></a><span class="hs-identifier">mkFromSql</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#PrimaryKey"><span class="hs-identifier hs-type">PrimaryKey</span></a><span> </span><a href="#local-6989586621679106718"><span class="hs-identifier hs-type">key</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106719"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106720"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier hs-type">FromSql</span></a><span> </span><a href="#local-6989586621679106720"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-242"></a><a name="mkFromSql"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mkFromSql"><span class="hs-identifier">mkFromSql</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#PrimaryKey"><span class="hs-identifier hs-var">PrimaryKey</span></a><span> </span><a name="local-6989586621679106795"><a href="#local-6989586621679106795"><span class="hs-identifier">pKeyPart</span></a></a><span> </span><a name="local-6989586621679106796"><a href="#local-6989586621679106796"><span class="hs-identifier">pKeyParts</span></a></a><span class="hs-special">)</span><span> </span><a name="local-6989586621679106797"><a href="#local-6989586621679106797"><span class="hs-identifier">relMap</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-243"></a><span>  </span><a href="#local-6989586621679106798"><span class="hs-identifier hs-var">fromSql</span></a><span>
</span><a name="line-244"></a><span>    </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">runFromSql</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679106813"><a href="#local-6989586621679106813"><span class="hs-identifier">columns</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-245"></a><span>        </span><span class="hs-comment">-- lookup the primary key columns</span><span>
</span><a name="line-246"></a><span>        </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679106814"><a href="#local-6989586621679106814"><span class="hs-identifier">keyNames</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><a href="#local-6989586621679106799"><span class="hs-identifier hs-var">getColName</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106795"><span class="hs-identifier hs-var">pKeyPart</span></a><span> </span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679106796"><span class="hs-identifier hs-var">pKeyParts</span></a><span class="hs-special">)</span><span>
</span><a name="line-247"></a><span>            </span><a name="local-6989586621679106815"><a href="#local-6989586621679106815"><span class="hs-identifier">primKeys</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">filter</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">`</span><span class="hs-identifier hs-var">elem</span><span class="hs-special">`</span><span> </span><a href="#local-6989586621679106814"><span class="hs-identifier hs-var">keyNames</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">fst</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679106813"><span class="hs-identifier hs-var">columns</span></a><span>
</span><a name="line-248"></a><span>
</span><a name="line-249"></a><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-identifier">runFromSql</span><span> </span><a href="#local-6989586621679106798"><span class="hs-identifier hs-var">fromSql</span></a><span> </span><a href="#local-6989586621679106813"><span class="hs-identifier hs-var">columns</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-250"></a><span>              </span><span class="hs-comment">-- Add the primary key(s) to relevant error messages</span><span>
</span><a name="line-251"></a><span>              </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#RowDataError"><span class="hs-identifier hs-var">RowDataError</span></a><span> </span><a name="local-6989586621679106816"><a href="#local-6989586621679106816"><span class="hs-identifier">details</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-252"></a><span>                </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#RowDataError"><span class="hs-identifier hs-var">RowDataError</span></a><span> </span><a href="#local-6989586621679106816"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-253"></a><span>                         </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">rowErrorPrimaryKeys</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106815"><span class="hs-identifier hs-var">primKeys</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-254"></a><span>
</span><a name="line-255"></a><span>              </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConversionError"><span class="hs-identifier hs-var">ConversionError</span></a><span> </span><a name="local-6989586621679106817"><a href="#local-6989586621679106817"><span class="hs-identifier">details</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-256"></a><span>                </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ConversionError"><span class="hs-identifier hs-var">ConversionError</span></a><span> </span><a href="#local-6989586621679106817"><span class="hs-identifier hs-var">details</span></a><span>
</span><a name="line-257"></a><span>                         </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">convErrorPrimaryKeys</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106815"><span class="hs-identifier hs-var">primKeys</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-258"></a><span>
</span><a name="line-259"></a><span>              </span><a name="local-6989586621679106818"><a href="#local-6989586621679106818"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679106818"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-260"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-261"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-262"></a><span>    </span><a name="local-6989586621679106798"><a href="#local-6989586621679106798"><span class="hs-identifier">fromSql</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106800"><span class="hs-identifier hs-var">fromRelMap</span></a><span> </span><a href="#local-6989586621679106797"><span class="hs-identifier hs-var">relMap</span></a><span>
</span><a name="line-263"></a><span>
</span><a name="line-264"></a><span>    </span><a name="local-6989586621679106799"><a href="#local-6989586621679106799"><span class="hs-identifier">getColName</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.Types.html#PrimaryKeyPart"><span class="hs-identifier hs-var">PrimaryKeyPart</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679106804"><a href="#local-6989586621679106804"><span class="hs-identifier">fieldDef</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">fieldName</span><span> </span><a href="#local-6989586621679106804"><span class="hs-identifier hs-var">fieldDef</span></a><span>
</span><a name="line-265"></a><span>
</span><a name="line-266"></a><span>    </span><span class="hs-identifier">fromRelMap</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106802"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106803"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#FromSql"><span class="hs-identifier hs-type">FromSql</span></a><span> </span><a href="#local-6989586621679106803"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-267"></a><span>    </span><a name="local-6989586621679106800"><a href="#local-6989586621679106800"><span class="hs-identifier">fromRelMap</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Field"><span class="hs-identifier hs-var">RM_Field</span></a><span> </span><a name="local-6989586621679106805"><a href="#local-6989586621679106805"><span class="hs-identifier">field</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FromSql.html#fieldFromSql"><span class="hs-identifier hs-var">fieldFromSql</span></a><span> </span><a href="#local-6989586621679106805"><span class="hs-identifier hs-var">field</span></a><span>
</span><a name="line-268"></a><span>    </span><span class="hs-identifier">fromRelMap</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Nest"><span class="hs-identifier hs-var">RM_Nest</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679106806"><a href="#local-6989586621679106806"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106800"><span class="hs-identifier hs-var">fromRelMap</span></a><span> </span><a href="#local-6989586621679106806"><span class="hs-identifier hs-var">rm</span></a><span>
</span><a name="line-269"></a><span>    </span><span class="hs-identifier">fromRelMap</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_ReadOnly"><span class="hs-identifier hs-var">RM_ReadOnly</span></a><span> </span><a name="local-6989586621679106807"><a href="#local-6989586621679106807"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106800"><span class="hs-identifier hs-var">fromRelMap</span></a><span> </span><a href="#local-6989586621679106807"><span class="hs-identifier hs-var">rm</span></a><span>
</span><a name="line-270"></a><span>    </span><span class="hs-identifier">fromRelMap</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_MaybeTag"><span class="hs-identifier hs-var">RM_MaybeTag</span></a><span> </span><a name="local-6989586621679106808"><a href="#local-6989586621679106808"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106800"><span class="hs-identifier hs-var">fromRelMap</span></a><span> </span><a href="#local-6989586621679106808"><span class="hs-identifier hs-var">rm</span></a><span>
</span><a name="line-271"></a><span>    </span><span class="hs-identifier">fromRelMap</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Pure"><span class="hs-identifier hs-var">RM_Pure</span></a><span> </span><a name="local-6989586621679106809"><a href="#local-6989586621679106809"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679106809"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-272"></a><span>    </span><span class="hs-identifier">fromRelMap</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Apply"><span class="hs-identifier hs-var">RM_Apply</span></a><span> </span><a name="local-6989586621679106810"><a href="#local-6989586621679106810"><span class="hs-identifier">rmF</span></a></a><span> </span><a name="local-6989586621679106811"><a href="#local-6989586621679106811"><span class="hs-identifier">rmC</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679106800"><span class="hs-identifier hs-var">fromRelMap</span></a><span> </span><a href="#local-6989586621679106810"><span class="hs-identifier hs-var">rmF</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="#local-6989586621679106800"><span class="hs-identifier hs-var">fromRelMap</span></a><span> </span><a href="#local-6989586621679106811"><span class="hs-identifier hs-var">rmC</span></a><span>
</span><a name="line-273"></a><span>    </span><span class="hs-identifier">fromRelMap</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Partial"><span class="hs-identifier hs-var">RM_Partial</span></a><span> </span><a name="local-6989586621679106812"><a href="#local-6989586621679106812"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-274"></a><span>      </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#joinFromSqlError"><span class="hs-identifier hs-var">joinFromSqlError</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679106801"><span class="hs-identifier hs-var">wrapError</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679106800"><span class="hs-identifier hs-var">fromRelMap</span></a><span> </span><a href="#local-6989586621679106812"><span class="hs-identifier hs-var">rm</span></a><span class="hs-special">)</span><span>
</span><a name="line-275"></a><span>    </span><a name="local-6989586621679106801"><a href="#local-6989586621679106801"><span class="hs-identifier">wrapError</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">either</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#simpleConversionError"><span class="hs-identifier hs-var">simpleConversionError</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">Right</span><span>
</span><a name="line-276"></a><span>
</span><a name="line-277"></a><span class="hs-identifier">mkToSql</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RelationalMap"><span class="hs-identifier hs-type">RelationalMap</span></a><span> </span><a href="#local-6989586621679106716"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679106717"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#ToSql"><span class="hs-identifier hs-type">ToSql</span></a><span> </span><a href="#local-6989586621679106716"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-278"></a><a name="mkToSql"><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mkToSql"><span class="hs-identifier">mkToSql</span></a></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Field"><span class="hs-identifier hs-var">RM_Field</span></a><span> </span><a name="local-6989586621679106819"><a href="#local-6989586621679106819"><span class="hs-identifier">field</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-279"></a><span>  </span><span class="hs-identifier hs-var">when</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#isAssignedByDatabaseField"><span class="hs-identifier hs-var">isAssignedByDatabaseField</span></a><span> </span><a href="#local-6989586621679106819"><span class="hs-identifier hs-var">field</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-280"></a><span>    </span><a name="local-6989586621679106820"><a href="#local-6989586621679106820"><span class="hs-identifier">value</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">ask</span><span>
</span><a name="line-281"></a><span>    </span><span class="hs-identifier hs-var">modify</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.FieldDefinition.html#fieldToSqlValue"><span class="hs-identifier hs-var">fieldToSqlValue</span></a><span> </span><a href="#local-6989586621679106819"><span class="hs-identifier hs-var">field</span></a><span> </span><a href="#local-6989586621679106820"><span class="hs-identifier hs-var">value</span></a><span> </span><span class="hs-glyph">:</span><span class="hs-special">)</span><span>
</span><a name="line-282"></a><span class="hs-identifier">mkToSql</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Nest"><span class="hs-identifier hs-var">RM_Nest</span></a><span> </span><a name="local-6989586621679106821"><a href="#local-6989586621679106821"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679106822"><a href="#local-6989586621679106822"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.Types.html#getComponent"><span class="hs-identifier hs-var">getComponent</span></a><span> </span><a href="#local-6989586621679106821"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mkToSql"><span class="hs-identifier hs-var">mkToSql</span></a><span> </span><a href="#local-6989586621679106822"><span class="hs-identifier hs-var">rm</span></a><span class="hs-special">)</span><span>
</span><a name="line-283"></a><span class="hs-identifier">mkToSql</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Apply"><span class="hs-identifier hs-var">RM_Apply</span></a><span> </span><a name="local-6989586621679106823"><a href="#local-6989586621679106823"><span class="hs-identifier">rmF</span></a></a><span> </span><a name="local-6989586621679106824"><a href="#local-6989586621679106824"><span class="hs-identifier">rmC</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mkToSql"><span class="hs-identifier hs-var">mkToSql</span></a><span> </span><a href="#local-6989586621679106823"><span class="hs-identifier hs-var">rmF</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mkToSql"><span class="hs-identifier hs-var">mkToSql</span></a><span> </span><a href="#local-6989586621679106824"><span class="hs-identifier hs-var">rmC</span></a><span>
</span><a name="line-284"></a><span class="hs-identifier">mkToSql</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Partial"><span class="hs-identifier hs-var">RM_Partial</span></a><span> </span><a name="local-6989586621679106825"><a href="#local-6989586621679106825"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mkToSql"><span class="hs-identifier hs-var">mkToSql</span></a><span> </span><a href="#local-6989586621679106825"><span class="hs-identifier hs-var">rm</span></a><span>
</span><a name="line-285"></a><span class="hs-identifier">mkToSql</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_MaybeTag"><span class="hs-identifier hs-var">RM_MaybeTag</span></a><span> </span><a name="local-6989586621679106826"><a href="#local-6989586621679106826"><span class="hs-identifier">rm</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#mkToSql"><span class="hs-identifier hs-var">mkToSql</span></a><span> </span><a href="#local-6989586621679106826"><span class="hs-identifier hs-var">rm</span></a><span>
</span><a name="line-286"></a><span class="hs-identifier">mkToSql</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_ReadOnly"><span class="hs-identifier hs-var">RM_ReadOnly</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-287"></a><span class="hs-identifier">mkToSql</span><span> </span><span class="hs-special">(</span><a href="Database.Orville.PostgreSQL.Internal.RelationalMap.html#RM_Pure"><span class="hs-identifier hs-var">RM_Pure</span></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-288"></a></pre></body></html>