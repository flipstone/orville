<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Orville.PostgreSQL.Execution.Insert</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">orville-postgresql-1.0.0.0: ORM</span><ul class="links" id="page-menu"><li><a href="src/Orville.PostgreSQL.Execution.Insert.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Flipstone Technology Partners 2023</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Stability</th><td>Stable</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Orville.PostgreSQL.Execution.Insert</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Functions for working with executable <code>INSERT</code> statements. The <code><a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a></code> type is
a value that can be passed around and executed later. The <code><a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a></code> is directly
associated with the presence of a returning clause and how to decode any rows
returned by that clause. This means it can be safely executed via
<code><a href="Orville-PostgreSQL-Execution-Insert.html#v:executeInsert" title="Orville.PostgreSQL.Execution.Insert">executeInsert</a></code> or <code><a href="Orville-PostgreSQL-Execution-Insert.html#v:executeInsertReturnEntities" title="Orville.PostgreSQL.Execution.Insert">executeInsertReturnEntities</a></code> as appropriate. It is a
lower-level API than the entity insert functions in
<a href="Orville-PostgreSQL-Execution-EntityOperations.html">Orville.PostgreSQL.Execution.EntityOperations</a>, but not as primitive as
<a href="Orville-PostgreSQL-Expr-Insert.html">Orville.PostgreSQL.Expr.Insert</a>.</p><p><em>Since: 1.0.0.0</em></p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Insert">Insert</a> readEntity returningClause</li><li class="src short"><a href="#v:insertToInsertExpr">insertToInsertExpr</a> :: <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity returningClause -&gt; <a href="Orville-PostgreSQL-Expr-Insert.html#t:InsertExpr" title="Orville.PostgreSQL.Expr.Insert">InsertExpr</a></li><li class="src short"><a href="#v:executeInsert">executeInsert</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity <a href="Orville-PostgreSQL-Execution-ReturningOption.html#t:NoReturningClause" title="Orville.PostgreSQL.Execution.ReturningOption">NoReturningClause</a> -&gt; m <a href="../base-4.17.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:executeInsertReturnEntities">executeInsertReturnEntities</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity <a href="Orville-PostgreSQL-Execution-ReturningOption.html#t:ReturningClause" title="Orville.PostgreSQL.Execution.ReturningOption">ReturningClause</a> -&gt; m [readEntity]</li><li class="src short"><a href="#v:insertToTableReturning">insertToTableReturning</a> :: <a href="Orville-PostgreSQL-Schema-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Schema.TableDefinition">TableDefinition</a> key writeEntity readEntity -&gt; <a href="../base-4.17.2.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> writeEntity -&gt; <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity <a href="Orville-PostgreSQL-Execution-ReturningOption.html#t:ReturningClause" title="Orville.PostgreSQL.Execution.ReturningOption">ReturningClause</a></li><li class="src short"><a href="#v:insertToTable">insertToTable</a> :: <a href="Orville-PostgreSQL-Schema-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Schema.TableDefinition">TableDefinition</a> key writeEntity readEntity -&gt; <a href="../base-4.17.2.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> writeEntity -&gt; <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity <a href="Orville-PostgreSQL-Execution-ReturningOption.html#t:NoReturningClause" title="Orville.PostgreSQL.Execution.ReturningOption">NoReturningClause</a></li><li class="src short"><a href="#v:rawInsertExpr">rawInsertExpr</a> :: <a href="Orville-PostgreSQL-Execution-ReturningOption.html#t:ReturningOption" title="Orville.PostgreSQL.Execution.ReturningOption">ReturningOption</a> returningClause -&gt; <a href="Orville-PostgreSQL-Marshall-SqlMarshaller.html#t:AnnotatedSqlMarshaller" title="Orville.PostgreSQL.Marshall.SqlMarshaller">AnnotatedSqlMarshaller</a> writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-Expr-Insert.html#t:InsertExpr" title="Orville.PostgreSQL.Expr.Insert">InsertExpr</a> -&gt; <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity returningClause</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Insert" class="def">Insert</a> readEntity returningClause <a href="src/Orville.PostgreSQL.Execution.Insert.html#Insert" class="link">Source</a> <a href="#t:Insert" class="selflink">#</a></p><div class="doc"><p>Represents an <code>INSERT</code> statement that can be executed against a database. An <code><a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a></code> has a
  <code>SqlMarshaller</code> bound to it that, when the insert returns data from the database, will be used to
  decode the database result set when it is executed.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:insertToInsertExpr" class="def">insertToInsertExpr</a> :: <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity returningClause -&gt; <a href="Orville-PostgreSQL-Expr-Insert.html#t:InsertExpr" title="Orville.PostgreSQL.Expr.Insert">InsertExpr</a> <a href="src/Orville.PostgreSQL.Execution.Insert.html#insertToInsertExpr" class="link">Source</a> <a href="#v:insertToInsertExpr" class="selflink">#</a></p><div class="doc"><p>Extracts the query that will be run when the insert is executed. Normally you
  don't want to extract the query and run it yourself, but this function is
  useful to view the query for debugging or query explanation.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:executeInsert" class="def">executeInsert</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity <a href="Orville-PostgreSQL-Execution-ReturningOption.html#t:NoReturningClause" title="Orville.PostgreSQL.Execution.ReturningOption">NoReturningClause</a> -&gt; m <a href="../base-4.17.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Orville.PostgreSQL.Execution.Insert.html#executeInsert" class="link">Source</a> <a href="#v:executeInsert" class="selflink">#</a></p><div class="doc"><p>Excutes the database query for the <code><a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a></code> and returns the number of rows
  affected by the query.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:executeInsertReturnEntities" class="def">executeInsertReturnEntities</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity <a href="Orville-PostgreSQL-Execution-ReturningOption.html#t:ReturningClause" title="Orville.PostgreSQL.Execution.ReturningOption">ReturningClause</a> -&gt; m [readEntity] <a href="src/Orville.PostgreSQL.Execution.Insert.html#executeInsertReturnEntities" class="link">Source</a> <a href="#v:executeInsertReturnEntities" class="selflink">#</a></p><div class="doc"><p>Excutes the database query for the <code><a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a></code> and uses its <code>SqlMarshaller</code> to decode the rows (that
  were just inserted) as returned via a RETURNING clause.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:insertToTableReturning" class="def">insertToTableReturning</a> :: <a href="Orville-PostgreSQL-Schema-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Schema.TableDefinition">TableDefinition</a> key writeEntity readEntity -&gt; <a href="../base-4.17.2.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> writeEntity -&gt; <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity <a href="Orville-PostgreSQL-Execution-ReturningOption.html#t:ReturningClause" title="Orville.PostgreSQL.Execution.ReturningOption">ReturningClause</a> <a href="src/Orville.PostgreSQL.Execution.Insert.html#insertToTableReturning" class="link">Source</a> <a href="#v:insertToTableReturning" class="selflink">#</a></p><div class="doc"><p>Builds an <code><a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a></code> that will insert all of the writeable columns described in the
  <code><a href="Orville-PostgreSQL-Schema-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Schema.TableDefinition">TableDefinition</a></code> and returning the data as seen by the database. This is useful for getting
  database managed columns such as auto-incrementing identifiers and sequences.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:insertToTable" class="def">insertToTable</a> :: <a href="Orville-PostgreSQL-Schema-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Schema.TableDefinition">TableDefinition</a> key writeEntity readEntity -&gt; <a href="../base-4.17.2.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> writeEntity -&gt; <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity <a href="Orville-PostgreSQL-Execution-ReturningOption.html#t:NoReturningClause" title="Orville.PostgreSQL.Execution.ReturningOption">NoReturningClause</a> <a href="src/Orville.PostgreSQL.Execution.Insert.html#insertToTable" class="link">Source</a> <a href="#v:insertToTable" class="selflink">#</a></p><div class="doc"><p>Builds an <code><a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a></code> that will insert all of the writeable columns described in the
  <code><a href="Orville-PostgreSQL-Schema-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Schema.TableDefinition">TableDefinition</a></code> without returning the data as seen by the database.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:rawInsertExpr" class="def">rawInsertExpr</a> :: <a href="Orville-PostgreSQL-Execution-ReturningOption.html#t:ReturningOption" title="Orville.PostgreSQL.Execution.ReturningOption">ReturningOption</a> returningClause -&gt; <a href="Orville-PostgreSQL-Marshall-SqlMarshaller.html#t:AnnotatedSqlMarshaller" title="Orville.PostgreSQL.Marshall.SqlMarshaller">AnnotatedSqlMarshaller</a> writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-Expr-Insert.html#t:InsertExpr" title="Orville.PostgreSQL.Expr.Insert">InsertExpr</a> -&gt; <a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a> readEntity returningClause <a href="src/Orville.PostgreSQL.Execution.Insert.html#rawInsertExpr" class="link">Source</a> <a href="#v:rawInsertExpr" class="selflink">#</a></p><div class="doc"><p>Builds an <code><a href="Orville-PostgreSQL-Execution-Insert.html#t:Insert" title="Orville.PostgreSQL.Execution.Insert">Insert</a></code> that will execute the specified query and use the given <code>SqlMarshaller</code> to
  decode it. It is up to the caller to ensure that the given <code><a href="Orville-PostgreSQL-Expr-Insert.html#t:InsertExpr" title="Orville.PostgreSQL.Expr.Insert">InsertExpr</a></code> makes sense and
  produces a value that can be stored, as well as returning a result that the <code>SqlMarshaller</code> can
  decode.</p><p>This is the lowest level of escape hatch available for <code>Update</code>. The caller can build any query
  that Orville supports using the expression building functions, or use <code>RawSql.fromRawSql</code> to build
  a raw <code><a href="Orville-PostgreSQL-Expr-Insert.html#t:InsertExpr" title="Orville.PostgreSQL.Expr.Insert">InsertExpr</a></code>. It is expected that the <code><a href="Orville-PostgreSQL-Execution-ReturningOption.html#t:ReturningOption" title="Orville.PostgreSQL.Execution.ReturningOption">ReturningOption</a></code> given matches the
  <code><a href="Orville-PostgreSQL-Expr-Insert.html#t:InsertExpr" title="Orville.PostgreSQL.Expr.Insert">InsertExpr</a></code>. This level of interface does not provide an automatic enforcement of the
  expectation, however failure is likely if that is not met.</p><p><em>Since: 1.0.0.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.27.0</p></div></body></html>