<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Orville.PostgreSQL.AutoMigration</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">orville-postgresql-1.0.0.0: ORM</span><ul class="links" id="page-menu"><li><a href="src/Orville.PostgreSQL.AutoMigration.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>Flipstone Technology Partners 2023</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Stability</th><td>Stable</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Orville.PostgreSQL.AutoMigration</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Facilities for performing some database migrations automatically.
See <code><a href="Orville-PostgreSQL-AutoMigration.html#v:autoMigrateSchema" title="Orville.PostgreSQL.AutoMigration">autoMigrateSchema</a></code> as a primary, high level entry point.</p><p><em>Since: 1.0.0.0</em></p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:autoMigrateSchema">autoMigrateSchema</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; [<a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a>] -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:SchemaItem">SchemaItem</a> <span class="keyword">where</span><ul class="subs"><li><a href="#v:SchemaTable">SchemaTable</a> :: <a href="Orville-PostgreSQL-Schema-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Schema.TableDefinition">TableDefinition</a> key writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></li><li><a href="#v:SchemaDropTable">SchemaDropTable</a> :: <a href="Orville-PostgreSQL-Schema-TableIdentifier.html#t:TableIdentifier" title="Orville.PostgreSQL.Schema.TableIdentifier">TableIdentifier</a> -&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></li><li><a href="#v:SchemaSequence">SchemaSequence</a> :: <a href="Orville-PostgreSQL-Schema-SequenceDefinition.html#t:SequenceDefinition" title="Orville.PostgreSQL.Schema.SequenceDefinition">SequenceDefinition</a> -&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></li><li><a href="#v:SchemaDropSequence">SchemaDropSequence</a> :: <a href="Orville-PostgreSQL-Schema-SequenceIdentifier.html#t:SequenceIdentifier" title="Orville.PostgreSQL.Schema.SequenceIdentifier">SequenceIdentifier</a> -&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></li></ul></li><li class="src short"><a href="#v:schemaItemSummary">schemaItemSummary</a> :: <a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a> -&gt; <a href="../base-4.17.2.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:MigrationPlan">MigrationPlan</a></li><li class="src short"><a href="#v:generateMigrationPlan">generateMigrationPlan</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; [<a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a>] -&gt; m <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a></li><li class="src short"><a href="#v:migrationPlanSteps">migrationPlanSteps</a> :: <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a> -&gt; [<a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationStep" title="Orville.PostgreSQL.AutoMigration">MigrationStep</a>]</li><li class="src short"><a href="#v:executeMigrationPlan">executeMigrationPlan</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a> -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:MigrationStep">MigrationStep</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:MigrationDataError">MigrationDataError</a></li><li class="src short"><a href="#v:withMigrationLock">withMigrationLock</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; m a -&gt; m a</li><li class="src short"><span class="keyword">data</span> <a href="#t:MigrationLockError">MigrationLockError</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:autoMigrateSchema" class="def">autoMigrateSchema</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; [<a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a>] -&gt; m () <a href="src/Orville.PostgreSQL.AutoMigration.html#autoMigrateSchema" class="link">Source</a> <a href="#v:autoMigrateSchema" class="selflink">#</a></p><div class="doc"><p>This function compares the list of <code><a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></code>s provided against the current
  schema found in the database to determine whether any migration are
  necessary.  If any changes need to be made, this function executes. You can
  call <code><a href="Orville-PostgreSQL-AutoMigration.html#v:generateMigrationPlan" title="Orville.PostgreSQL.AutoMigration">generateMigrationPlan</a></code> and <code><a href="Orville-PostgreSQL-AutoMigration.html#v:executeMigrationPlan" title="Orville.PostgreSQL.AutoMigration">executeMigrationPlan</a></code> yourself if you want
  to have more control over the process, but must then take care to ensure that
  the schema has not changed between the two calls. This function uses an
  PostgreSQL advisory lock to ensure that no other calls to <code><a href="Orville-PostgreSQL-AutoMigration.html#v:autoMigrateSchema" title="Orville.PostgreSQL.AutoMigration">autoMigrateSchema</a></code>
  (potentially on other processes) attempt to modify the schema at the same
  time.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SchemaItem" class="def">SchemaItem</a> <span class="keyword">where</span> <a href="src/Orville.PostgreSQL.AutoMigration.html#SchemaItem" class="link">Source</a> <a href="#t:SchemaItem" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></code> represents a single item in a database schema such as a table,
  index or constraint. The constructor functions below can be used to create
  items from other types (such as <code><a href="Orville-PostgreSQL-Schema-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Schema.TableDefinition">TableDefinition</a></code>) to put them into
  a list to be used with <code><a href="Orville-PostgreSQL-AutoMigration.html#v:autoMigrateSchema" title="Orville.PostgreSQL.AutoMigration">autoMigrateSchema</a></code>.</p><p><em>Since: 1.0.0.0</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SchemaTable" class="def">SchemaTable</a> :: <a href="Orville-PostgreSQL-Schema-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Schema.TableDefinition">TableDefinition</a> key writeEntity readEntity -&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></td><td class="doc"><p>Constructs a <code><a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></code> from a <code><a href="Orville-PostgreSQL-Schema-TableDefinition.html#t:TableDefinition" title="Orville.PostgreSQL.Schema.TableDefinition">TableDefinition</a></code>.
 @since 1.0.0.0</p></td></tr><tr><td class="src"><a id="v:SchemaDropTable" class="def">SchemaDropTable</a> :: <a href="Orville-PostgreSQL-Schema-TableIdentifier.html#t:TableIdentifier" title="Orville.PostgreSQL.Schema.TableIdentifier">TableIdentifier</a> -&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></td><td class="doc"><p>Constructs a <code><a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></code> that will drop the specified table if it is
    found in the database.
 @since 1.0.0.0</p></td></tr><tr><td class="src"><a id="v:SchemaSequence" class="def">SchemaSequence</a> :: <a href="Orville-PostgreSQL-Schema-SequenceDefinition.html#t:SequenceDefinition" title="Orville.PostgreSQL.Schema.SequenceDefinition">SequenceDefinition</a> -&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></td><td class="doc"><p>Constructs a <code><a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></code> from a <code><a href="Orville-PostgreSQL-Schema-SequenceDefinition.html#t:SequenceDefinition" title="Orville.PostgreSQL.Schema.SequenceDefinition">SequenceDefinition</a></code>.
 @since 1.0.0.0</p></td></tr><tr><td class="src"><a id="v:SchemaDropSequence" class="def">SchemaDropSequence</a> :: <a href="Orville-PostgreSQL-Schema-SequenceIdentifier.html#t:SequenceIdentifier" title="Orville.PostgreSQL.Schema.SequenceIdentifier">SequenceIdentifier</a> -&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></td><td class="doc"><p>Constructs a <code><a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></code> that will drop the specified table if it is
    found in the database.
 @since 1.0.0.0</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:schemaItemSummary" class="def">schemaItemSummary</a> :: <a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a> -&gt; <a href="../base-4.17.2.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Orville.PostgreSQL.AutoMigration.html#schemaItemSummary" class="link">Source</a> <a href="#v:schemaItemSummary" class="selflink">#</a></p><div class="doc"><p>Returns a one-line string describe the <code><a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></code>, suitable for a human to
  identify it in a list of output.</p><p>For example, a <code><a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></code> constructed via <code>schemaTable</code> gives <code>Table &lt;table
  name&gt;</code>.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MigrationPlan" class="def">MigrationPlan</a> <a href="src/Orville.PostgreSQL.AutoMigration.html#MigrationPlan" class="link">Source</a> <a href="#t:MigrationPlan" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a></code> contains an ordered list of migration steps. Each one is a
single DDL statement to make a specific database change. The steps are ordered
such that dependencies from earlier steps will be in place before a later step
is executed (e.g. new columns are added before foreign keys referring to them).</p><p>While most steps are executed together in a single transaction this is not
possible for indexes being created concurrently. Any such steps are executed
last after the transaction for the rest of the schema changes has been
successfully committed.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:generateMigrationPlan" class="def">generateMigrationPlan</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; [<a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a>] -&gt; m <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a> <a href="src/Orville.PostgreSQL.AutoMigration.html#generateMigrationPlan" class="link">Source</a> <a href="#v:generateMigrationPlan" class="selflink">#</a></p><div class="doc"><p>Compares the list of <code><a href="Orville-PostgreSQL-AutoMigration.html#t:SchemaItem" title="Orville.PostgreSQL.AutoMigration">SchemaItem</a></code>s provided against the current schema found
  in the database and returns a <code><a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a></code> that could be executed to make
  the database schema match the items given.</p><p>You can execute the <code><a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a></code> yourself using <code><a href="Orville-PostgreSQL-AutoMigration.html#v:executeMigrationPlan" title="Orville.PostgreSQL.AutoMigration">executeMigrationPlan</a></code>
  convenience function, though <code><a href="Orville-PostgreSQL-AutoMigration.html#v:autoMigrateSchema" title="Orville.PostgreSQL.AutoMigration">autoMigrateSchema</a></code> is usually a better option
  because it uses a database lock to ensure that no other processes are also
  using <code><a href="Orville-PostgreSQL-AutoMigration.html#v:autoMigrateSchema" title="Orville.PostgreSQL.AutoMigration">autoMigrateSchema</a></code> to apply migrations at the same time. If you use
  <code><a href="Orville-PostgreSQL-AutoMigration.html#v:generateMigrationPlan" title="Orville.PostgreSQL.AutoMigration">generateMigrationPlan</a></code> and <code><a href="Orville-PostgreSQL-AutoMigration.html#v:executeMigrationPlan" title="Orville.PostgreSQL.AutoMigration">executeMigrationPlan</a></code> separately you are
  responsible for ensuring that the schema has no changed between the time the
  plan is generated and executed yourself.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:migrationPlanSteps" class="def">migrationPlanSteps</a> :: <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a> -&gt; [<a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationStep" title="Orville.PostgreSQL.AutoMigration">MigrationStep</a>] <a href="src/Orville.PostgreSQL.AutoMigration.html#migrationPlanSteps" class="link">Source</a> <a href="#v:migrationPlanSteps" class="selflink">#</a></p><div class="doc"><p>Returns all the <code><a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationStep" title="Orville.PostgreSQL.AutoMigration">MigrationStep</a></code>s found in a <code><a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a></code> together in a
  single list. This is useful if you merely want to examine the steps of a plan
  rather than execute them. You should always use <code><a href="Orville-PostgreSQL-AutoMigration.html#v:executeMigrationPlan" title="Orville.PostgreSQL.AutoMigration">executeMigrationPlan</a></code> to
  execute a migration plan to ensure that the transactional steps are done
  within a transaction while the asynchronous steps are done afterward outside
  of it.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:executeMigrationPlan" class="def">executeMigrationPlan</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a> -&gt; m () <a href="src/Orville.PostgreSQL.AutoMigration.html#executeMigrationPlan" class="link">Source</a> <a href="#v:executeMigrationPlan" class="selflink">#</a></p><div class="doc"><p>Executes a <code><a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a></code> that has be previously devised via
  <code><a href="Orville-PostgreSQL-AutoMigration.html#v:generateMigrationPlan" title="Orville.PostgreSQL.AutoMigration">generateMigrationPlan</a></code>. Normally all the steps in a migration plan are
  executed in a transaction so that they will all be applied together
  successfully or all rolled-back if one of them fails. Any indexes using the
  <code><a href="Orville-PostgreSQL-Schema-IndexDefinition.html#v:Asynchronous" title="Orville.PostgreSQL.Schema.IndexDefinition">Asynchronous</a></code> creation strategy cannot be created this way, however,
  because PostgreSQL does not allow <code>CREATE INDEX CONCURRENTLY</code> to be used from
  inside a transaction. If a <code><a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationPlan" title="Orville.PostgreSQL.AutoMigration">MigrationPlan</a></code> includes any indexes whose
  creation strategy is set to <code><a href="Orville-PostgreSQL-Schema-IndexDefinition.html#v:Asynchronous" title="Orville.PostgreSQL.Schema.IndexDefinition">Asynchronous</a></code>, Orville will begin the
  creation of those indexes after the rest of the migration steps have been
  committed successfully. This function will return before PostgreSQL has
  fineshed creating those indexes. You should check on the status of indexes
  created this way manually to ensure they were created successfully. If they
  could not be, you can drop them and Orville will re-attempt creating them the
  next time migration is performed.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MigrationStep" class="def">MigrationStep</a> <a href="src/Orville.PostgreSQL.AutoMigration.html#MigrationStep" class="link">Source</a> <a href="#t:MigrationStep" class="selflink">#</a></p><div class="doc"><p>A single SQL statement that will be executed in order to migrate the database
  to the desired result. You can use <code><a href="Orville-PostgreSQL-AutoMigration.html#v:generateMigrationPlan" title="Orville.PostgreSQL.AutoMigration">generateMigrationPlan</a></code> to get a list
  of these yourself for inspection and debugging.</p><p><em>Since: 1.0.0.0</em></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MigrationStep">Instances</h4><details id="i:MigrationStep" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationStep:SqlExpression:1"></span> <a href="Orville-PostgreSQL-Raw-RawSql.html#t:SqlExpression" title="Orville.PostgreSQL.Raw.RawSql">SqlExpression</a> <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationStep" title="Orville.PostgreSQL.AutoMigration">MigrationStep</a></span> <a href="src/Orville.PostgreSQL.AutoMigration.html#line-164" class="link">Source</a> <a href="#t:MigrationStep" class="selflink">#</a></td><td class="doc"><p><em>Since: 1.0.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:MigrationStep:SqlExpression:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Orville-PostgreSQL-AutoMigration.html">Orville.PostgreSQL.AutoMigration</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toRawSql">toRawSql</a> :: <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationStep" title="Orville.PostgreSQL.AutoMigration">MigrationStep</a> -&gt; <a href="Orville-PostgreSQL-Raw-RawSql.html#t:RawSql" title="Orville.PostgreSQL.Raw.RawSql">RawSql</a> <a href="src/Orville.PostgreSQL.Raw.RawSql.html#toRawSql" class="link">Source</a> <a href="#v:toRawSql" class="selflink">#</a></p><p class="src"><a href="#v:unsafeFromRawSql">unsafeFromRawSql</a> :: <a href="Orville-PostgreSQL-Raw-RawSql.html#t:RawSql" title="Orville.PostgreSQL.Raw.RawSql">RawSql</a> -&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationStep" title="Orville.PostgreSQL.AutoMigration">MigrationStep</a> <a href="src/Orville.PostgreSQL.Raw.RawSql.html#unsafeFromRawSql" class="link">Source</a> <a href="#v:unsafeFromRawSql" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MigrationDataError" class="def">MigrationDataError</a> <a href="src/Orville.PostgreSQL.AutoMigration.html#MigrationDataError" class="link">Source</a> <a href="#t:MigrationDataError" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationDataError" title="Orville.PostgreSQL.AutoMigration">MigrationDataError</a></code> will be thrown from the migration functions if data
  necessary for migration cannot be found.</p><p><em>Since: 1.0.0.0</em></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MigrationDataError">Instances</h4><details id="i:MigrationDataError" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationDataError:Exception:1"></span> <a href="../base-4.17.2.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationDataError" title="Orville.PostgreSQL.AutoMigration">MigrationDataError</a></span> <a href="src/Orville.PostgreSQL.AutoMigration.html#line-240" class="link">Source</a> <a href="#t:MigrationDataError" class="selflink">#</a></td><td class="doc"><p><em>Since: 1.0.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:MigrationDataError:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Orville-PostgreSQL-AutoMigration.html">Orville.PostgreSQL.AutoMigration</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationDataError" title="Orville.PostgreSQL.AutoMigration">MigrationDataError</a> -&gt; <a href="../base-4.17.2.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.17.2.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="../base-4.17.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationDataError" title="Orville.PostgreSQL.AutoMigration">MigrationDataError</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationDataError" title="Orville.PostgreSQL.AutoMigration">MigrationDataError</a> -&gt; <a href="../base-4.17.2.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationDataError:Show:2"></span> <a href="../base-4.17.2.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationDataError" title="Orville.PostgreSQL.AutoMigration">MigrationDataError</a></span> <a href="src/Orville.PostgreSQL.AutoMigration.html#line-236" class="link">Source</a> <a href="#t:MigrationDataError" class="selflink">#</a></td><td class="doc"><p><em>Since: 1.0.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:MigrationDataError:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Orville-PostgreSQL-AutoMigration.html">Orville.PostgreSQL.AutoMigration</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.17.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationDataError" title="Orville.PostgreSQL.AutoMigration">MigrationDataError</a> -&gt; <a href="../base-4.17.2.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationDataError" title="Orville.PostgreSQL.AutoMigration">MigrationDataError</a> -&gt; <a href="../base-4.17.2.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationDataError" title="Orville.PostgreSQL.AutoMigration">MigrationDataError</a>] -&gt; <a href="../base-4.17.2.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:withMigrationLock" class="def">withMigrationLock</a> :: <a href="Orville-PostgreSQL-Monad-MonadOrville.html#t:MonadOrville" title="Orville.PostgreSQL.Monad.MonadOrville">MonadOrville</a> m =&gt; m a -&gt; m a <a href="src/Orville.PostgreSQL.Internal.MigrationLock.html#withMigrationLock" class="link">Source</a> <a href="#v:withMigrationLock" class="selflink">#</a></p><div class="doc"><p>Executes an Orville action with a PostgreSQL advisory lock held that
  indicates to other Orville processes that a database migration is being done
  an no others should be performed concurrently.</p><p><em>Since: 1.0.0.0</em></p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MigrationLockError" class="def">MigrationLockError</a> <a href="src/Orville.PostgreSQL.Internal.MigrationLock.html#MigrationLockError" class="link">Source</a> <a href="#t:MigrationLockError" class="selflink">#</a></p><div class="doc"><p>Raised if <code><a href="Orville-PostgreSQL-AutoMigration.html#v:withMigrationLock" title="Orville.PostgreSQL.AutoMigration">withMigrationLock</a></code> cannot acquire the migration lock in a
  timely manner.</p><p><em>Since: 1.0.0.0</em></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MigrationLockError">Instances</h4><details id="i:MigrationLockError" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationLockError:Exception:1"></span> <a href="../base-4.17.2.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationLockError" title="Orville.PostgreSQL.AutoMigration">MigrationLockError</a></span> <a href="src/Orville.PostgreSQL.Internal.MigrationLock.html#line-119" class="link">Source</a> <a href="#t:MigrationLockError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationLockError:Exception:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Orville-PostgreSQL-Internal-MigrationLock.html">Orville.PostgreSQL.Internal.MigrationLock</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationLockError" title="Orville.PostgreSQL.AutoMigration">MigrationLockError</a> -&gt; <a href="../base-4.17.2.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.17.2.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="../base-4.17.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationLockError" title="Orville.PostgreSQL.AutoMigration">MigrationLockError</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationLockError" title="Orville.PostgreSQL.AutoMigration">MigrationLockError</a> -&gt; <a href="../base-4.17.2.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MigrationLockError:Show:2"></span> <a href="../base-4.17.2.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationLockError" title="Orville.PostgreSQL.AutoMigration">MigrationLockError</a></span> <a href="src/Orville.PostgreSQL.Internal.MigrationLock.html#line-117" class="link">Source</a> <a href="#t:MigrationLockError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MigrationLockError:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Orville-PostgreSQL-Internal-MigrationLock.html">Orville.PostgreSQL.Internal.MigrationLock</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.17.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationLockError" title="Orville.PostgreSQL.AutoMigration">MigrationLockError</a> -&gt; <a href="../base-4.17.2.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationLockError" title="Orville.PostgreSQL.AutoMigration">MigrationLockError</a> -&gt; <a href="../base-4.17.2.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Orville-PostgreSQL-AutoMigration.html#t:MigrationLockError" title="Orville.PostgreSQL.AutoMigration">MigrationLockError</a>] -&gt; <a href="../base-4.17.2.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.27.0</p></div></body></html>